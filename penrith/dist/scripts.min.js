!function(){"use strict";angular.module("lapentor.livesphere",["LapentorSphere","lapentor.marketplace.plugins","lapentor.marketplace.themes"])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c,l,p,f,u){function h(){y.live_pass?(y.checkPassIsLoading=!0,p.patch(i.read("apiUrl")+"/sphere/active-password/"+y.project._id,{password:y.live_pass}).then(function(e){e.data.status?(g(),y.activePass=!0):f.error("Wrong password")})["finally"](function(){y.checkPassIsLoading=!1})):f.error("Password cannot be empty")}function g(){if(y.lptSphereInstance=new c(y.project._id),n.$on("evt.livesphere.changescene",function(e,t){if(t._id!==y.scene._id){var o={};if(t.target_view)o["view.hlookat"]=t.target_view.hlookat,o["view.vlookat"]=t.target_view.vlookat,o["view.fov"]=t.target_view.fov,t.target_view=null;else if(t.default_view){var o={};o["view.hlookat"]=t.default_view.hlookat,o["view.vlookat"]=t.default_view.vlookat,o["view.fov"]=120!=t.default_view.fov?t.default_view.fov:90}t.limit_view&&(o["view.limitview"]="range",t.limit_view.bottom&&(o["view.vlookatmax"]=t.limit_view.bottom),t.limit_view.top&&(o["view.vlookatmin"]=t.limit_view.top),t.limit_view.left&&t.limit_view.right&&(o["view.hlookatmin"]=t.limit_view.left,o["view.hlookatmax"]=t.limit_view.right)),o["view.maxpixelzoom"]=0,o["view.fovmin"]=t.min_zoom||10,o["view.fovmax"]=t.max_zoom||150,o["krpano.sceneId"]=t._id,y.scene=t,y.lptSphereInstance.loadScene(t.xml,o,t.pano_type),d("scene",y.scene._id)}}),angular.isDefined(y.scenes)){y.scenes.sort(function(e,t){return e.order_in_group-t.order_in_group}),_();try{if(y.project.meta){var t=y.project.meta;if(s.setTitle(t.title),s.setTag("description",t.description),t.image){var o=t.image.replace(/^https:\/\//i,"http://");s.setTag("image",o)}else if(y.scene&&y.scene.pano_thumb){var o=y.scene.pano_thumb.replace(/^https:\/\//i,"http://");s.setTag("image",o)}}else if(s.setTitle(u.title),s.setTag("description",""),y.scene&&y.scene.pano_thumb){var o=y.scene.pano_thumb.replace(/^https:\/\//i,"http://");s.setTag("image",o)}}catch(r){console.log(r)}}if(y.scene){var l={};y.scene.default_view&&(l={"view.hlookat":y.scene.default_view.hlookat,"view.vlookat":y.scene.default_view.vlookat,"view.fov":120!=y.scene.default_view.fov?y.scene.default_view.fov:90,"view.limitview":"range"},a.target_view&&(l["view.hlookat"]=a.target_view.hlookat,l["view.vlookat"]=a.target_view.vlookat,l["view.fov"]=a.target_view.fov),y.scene.limit_view&&(y.scene.limit_view.bottom&&(l["view.vlookatmax"]=y.scene.limit_view.bottom),y.scene.limit_view.top&&(l["view.vlookatmin"]=y.scene.limit_view.top),y.scene.limit_view.left&&y.scene.limit_view.right&&(l["view.hlookatmin"]=y.scene.limit_view.left,l["view.hlookatmax"]=y.scene.limit_view.right)),l["view.maxpixelzoom"]=0,l["view.fovmin"]=y.scene.min_zoom||10,l["view.fovmax"]=y.scene.max_zoom||150),l["krpano.sceneId"]=y.scene._id,y.lptSphereInstance.init(b,y.scene.xml,l)}else y.lptSphereInstance.init(b,i.read("apiUrl")+"/xml-cube");e.$on("evt.krpano.onxmlcomplete",m),n.$on("evt.krpano.onviewchange",function(){0!=y.hotspots.length})}function d(e,t){var o=window.location.href,n="",i=o.split("?"),a=i[0],r=i[1],s="";if(r){i=r.split("&");for(var c=0;c<i.length;c++)i[c].split("=")[0]!=e&&(n+=s+i[c],s="&")}var l=s+""+e+"="+t;o=a+"?"+n+l,window.history.replaceState(null,y.scene.title,o)}function m(){y.lptSphereInstance.on("onclick",function(){n.$broadcast("evt.onsphereclick")}),y.scenes&&angular.forEach(y.scenes,function(e,t){e.hotspots&&angular.forEach(e.hotspots,function(t,o){var n="lptHotspot"+t._id;t.init||e._id!=y.scene._id?y.scene._id==e._id?y.lptSphereInstance.set("hotspot",{name:n,visible:!0}):y.lptSphereInstance.set("hotspot",{name:n,visible:!1}):(t.name=n,y.htmlThemes.indexOf(y.project.theme_hotspot.slug)!=-1?v(t,e._id,!1,!0):v(t,e._id),y.lptSphereInstance.set("hotspot",{name:n,visible:!0}),t.init=!0)})}),y.hotspots=y.scene.hotspots,e.$digest()}function _(){y.project.groups&&y.project.groups.length?(y.project.groups[0].scenes.sort(function(e,t){return e.order_in_group-t.order_in_group}),y.scene=y.project.groups[0].scenes[0],y.scene||(y.scenes.sort(function(e,t){return e.order_in_group-t.order_in_group}),y.scene=y.scenes[0])):(y.scenes.sort(function(e,t){return e.order_in_group-t.order_in_group}),y.scene=y.scenes[0]),null!=a.scene&&(y.scene=l.getObjectBy("_id",a.scene,y.scenes))}function v(e,t,o,i){if(angular.isUndefined(a)){y.themePath=l.makeUrl(Config.THEME_PATH,"hotspot",y.project.theme_hotspot.slug?y.project.theme_hotspot.slug:"default");var a=l.makeUrl(y.themePath,"images",e.type+".png")}try{var r=y.project.theme_hotspot.config;if(r[e.type+"_icon_custom"]){a=r[e.type+"_icon_custom"];var s=(new Date).getTime();a+="?"+s}}catch(c){}if(angular.isDefined(e.icon_custom)&&null!=e.icon_custom&&""!=e.icon_custom){a=e.icon_custom;var s=(new Date).getTime();a+="?"+s}"sound"==e.type&&(a=null),angular.isUndefined(o)&&(o=!0);var p={title:e.title,name:e.name,sceneId:t,lpttype:e.type,ishtml:!!angular.isDefined(i)&&i,url:a,alturl:a,ath:e.position.x,atv:e.position.y,width:e.width,height:e.width,visible:o};if(1==i&&"sound"!=e.type&&(p={title:e.title,name:e.name,sceneId:t,lpttype:e.type,renderer:"css3d",url:"assets/images/none.png",alturl:a,ath:e.position.x,atv:e.position.y,visible:!0,onloaded:function(){n.$broadcast("evt.krpano.hp"+e.name)},ishtml:!!angular.isDefined(i)&&i},"point"==e.type)){var f={name:"c-"+e.name,hptype:"clone",sceneId:t,lpttype:e.type,ishtml:!!angular.isDefined(i)&&i,url:a,ath:e.position.x,atv:e.position.y,width:e.width,height:e.width,visible:!1};y.lptSphereInstance.addHotspot(f)}y.lptSphereInstance.addHotspot(p)}var y=this,b="LiveSphereViewer",w="UA-80287650-7";y.scene=null,y.nextscene=null,y.project=u,y.scenes=u.scenes,y.hotspots=[],y.activePass=!1,y.checkPass=h,y.htmlThemes=["bubble","royal","gify","crystal"],angular.isUndefined(y.project.google)||angular.isUndefined(y.project.google.analytics_id)||(w=y.project.google.analytics_id),function(e,t,o,n,i,a,r){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),r=t.getElementsByTagName(o)[0],a.async=1,a.src=n,r.parentNode.insertBefore(a,r)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",w,"auto"),ga("send","pageview"),y.project.password&&y.project.password.enable||(y.initHotspot=!1,g())}e.$inject=["$scope","$auth","$timeout","$rootScope","envService","$stateParams","$interval","ngMeta","lptSphere","LptHelper","$http","Alertify","project"],angular.module("lapentor.livesphere").controller("LiveSphereCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(n){var i=e.defer();if(LPT_OFFLINE_MODE)var a="db.php";else var a=o.read("apiUrl")+"/sphere/"+n;return t.get(a).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}var i={getProject:n};return i}e.$inject=["$q","$http","envService"],angular.module("lapentor.livesphere").factory("LiveSphere",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins",["LapentorSphere","pst.utils"])}(),function(){"use strict";angular.module("lapentor.marketplace.themes",["ngSanitize","LapentorSphere","ngAudio"])}(),function(){"use strict";angular.module("pst.utils",[])}(),function(){"use strict";function e(e){e.setDefaultTitle("Lapentor - 360Â° VR publishing tool for panoramic photographers & agencies")}function t(e){e.config({domains:{tung:["lpt.local"],development:["app.lapentor.dev","192.168.100.2","lapentor.dev"],production:["app.lapentor.com","360.goterest.com"],staging:["stagingapp-lapentor-com.herokuapp.com"]},vars:{tung:{apiUrl:"http://api.lapentor.com/api/v1",siteUrl:"http://lpt.local",planMonthly:15,planYearly:12.5},development:{apiUrl:"http://api.lapentor.com/api/v1",siteUrl:"http://lapentor.local",planMonthly:15,planYearly:12.5},production:{apiUrl:"https://api.lapentor.com/api/v1",siteUrl:"https://app.lapentor.com",planMonthly:15,planYearly:12.5},staging:{apiUrl:"http://apistaging.lapentor.com/api/v1",siteUrl:"http://stagingapp-lapentor-com.herokuapp.com",planMonthly:15,planYearly:12.5}}}),e.check()}function o(e,t){e.appID(t.intercom_app_id),e.asyncLoading(!0)}function n(e,t,o){e.loginUrl=o.read("apiUrl")+"/auth/login",t.interceptors.push("lptInterceptor"),e.facebook({clientId:"292750687798001",url:o.read("apiUrl")+"/auth/login-facebook",scope:["email","public_profile"],scopeDelimiter:","}),e.google({clientId:"49245343276-l6c6uo54kompfe7co88rqggs9e7n8dld.apps.googleusercontent.com",name:"google",url:o.read("apiUrl")+"/auth/login-google"})}function i(e,t,o){o.html5Mode(!0),e.state("index",{url:LPT_OFFLINE_MODE?"any":"/",templateUrl:"modules/lapentor.app/views/pages/dashboard.html",controller:"DashboardCtrl",controllerAs:"vm",resolve:{requireLogin:r,projects:["Project",function(e){return e.all(0,9)}],user:["$stateParams","User",function(e,t){return angular.isObject(e.user)?e.user:t.get()}]}}).state("edit-profile",{url:"/profile",controller:"ProfileCtrl",controllerAs:"vm",templateUrl:"modules/lapentor.app/views/pages/profile.html",params:{user:null},resolve:{requireLogin:r,user:["$stateParams","User",function(e,t){return angular.isObject(e.user)?e.user:t.get()}]}}).state("project",{"abstract":!0,url:"/project/:id",template:"<ui-view></ui-view>",resolve:{requireLogin:r,project:["$stateParams","$auth","Project",function(e,t,o){if(t.isAuthenticated())return o.get(e.id)}]}}).state("project.editor",{url:"/editor/scene/:scene_id",templateUrl:"modules/lapentor.app/views/pages/project.editor.html",controller:"ProjectEditorCtrl",controllerAs:"vm",resolve:{loadEditorExternalModules:["$ocLazyLoad",function(e){return e.load(["bower_components/angularjs-slider/dist/rzslider.min.js","bower_components/summernote/dist/summernote.min.js","bower_components/angular-summernote/dist/angular-summernote.min.js","bower_components/angular-bootstrap-contextmenu/contextMenu.js","bower_components/angular-bootstrap-colorpicker/js/bootstrap-colorpicker-module.min.js"])}],user:["$stateParams","User",function(e,t){return angular.isObject(e.user)?e.user:t.get()}]}}).state("sphere",{url:LPT_OFFLINE_MODE?"/?scene":"/sphere/:project_slug?scene",templateUrl:"modules/lapentor.livesphere/livesphere.html",controller:"LiveSphereCtrl",controllerAs:"vm",reloadOnSearch:!1,params:{scene:null,project:null,target_view:null},resolve:{project:["$stateParams","LiveSphere",function(e,t){return angular.isObject(e.project)?e.project:t.getProject(e.project_slug)}]}}).state("showcase",{url:"/u/:username",templateUrl:"modules/lapentor.app/views/pages/showcase.html",controller:"ShowcaseCtrl",controllerAs:"vm",resolve:{user:["$stateParams","Showcase",function(e,t){return t.get(e.username)}]}}).state("login",{url:"/auth",templateUrl:"modules/lapentor.app/views/pages/auth/login2.html",params:{tab:"login"},controller:"LoginCtrl",controllerAs:"vm",resolve:{redirectIfLoggedIn:a}}).state("register",{url:"/auth/register",templateUrl:"modules/lapentor.app/views/pages/auth/login2.html",params:{tab:"register"},controller:"LoginCtrl",controllerAs:"vm",resolve:{redirectIfLoggedIn:a}}).state("register-old",{url:"/register",templateUrl:"modules/lapentor.app/views/pages/auth/login2.html",params:{tab:"register"},controller:"LoginCtrl",controllerAs:"vm",resolve:{redirectIfLoggedIn:a}}).state("forgot-password",{url:"/auth/forgot-password",templateUrl:"modules/lapentor.app/views/pages/auth/forgot-password.html",controller:"ForgotPasswordCtrl",controllerAs:"vm",resolve:{redirectIfLoggedIn:a}}).state("reset-password",{url:"/auth/reset-password?token",templateUrl:"modules/lapentor.app/views/pages/auth/reset-password.html",controller:"ResetPasswordCtrl",controllerAs:"vm",resolve:{redirectIfLoggedIn:a}}).state("activate",{url:"/register/activate-account?token",templateUrl:"modules/lapentor.app/views/pages/auth/activate.html",controller:"ActivateAccountCtrl",controllerAs:"vm"}).state("resend-activation-code",{url:"/register/resend-activation-code",templateUrl:"modules/lapentor.app/views/pages/auth/resend-activation-code.html",controller:"ResendActivateAccountCtrl",controllerAs:"vm"}).state("logout",{url:"/logout",template:null,controller:["$auth","$state",function(e,t){e.logout(),t.go("login")}]}).state("404",{url:"/404",templateUrl:"404.html"}),t.otherwise("/404")}function a(e,t,o,n){var i=e.defer();return t.isAuthenticated()?(n(function(){o.go("index")}),i.reject()):i.resolve(),i.promise}function r(e,t,o,n){var i=e.defer();return t.isAuthenticated()?i.resolve():(n(function(){o.go("login")}),i.reject()),i.promise}t.$inject=["envServiceProvider"],o.$inject=["$intercomProvider","CONST"],i.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],n.$inject=["$authProvider","$httpProvider","envServiceProvider"],e.$inject=["ngMetaProvider"],r.$inject=["$q","$auth","$state","$timeout"],a.$inject=["$q","$auth","$state","$timeout"],angular.module("lapentor.app",["oc.lazyLoad","ngCookies","ui.bootstrap","ngResource","ngSanitize","ui.router","satellizer","ngMeta","Alertify","ngFileUpload","angular-nicescroll","ngDragDrop","ui.sortable","720kb.socialshare","pasvaz.bindonce","ngIntercom","LapentorSphere","pst.utils","lapentor.marketplace.themes","lapentor.marketplace.plugins","lapentor.livesphere","toggle-switch","monospaced.qrcode","environment","infinite-scroll"]).constant("CONST",{export_price:15,intercom_app_id:"nszgonve"}).config(t).config(o).config(i).config(n).config(e).run(["ngMeta","$rootScope",function(e,t){t.changeSceneEffect="NOBLEND",e.init()}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("plugin",["$compile","LptHelper",function(e,t){return{restrict:"E",scope:{scene:"=",plugin:"=",project:"=",lptsphereinstance:"="},link:function(t,o,n){function i(n){var i="plugin-"+n,a="<"+i+"></"+i+">";o.empty(),o.append(e(a)(t))}i(t.plugin.slug)},controllerAs:"pluginVm",controller:["$scope",function(e){function t(e,t){angular.forEach(t,function(t,o){e[o]=angular.isUndefined(e[o])?t:e[o]})}function o(){var t={};return angular.isDefined(e.project.plugins)&&angular.forEach(e.project.plugins,function(o){e.plugin.slug==o.slug&&(t=o.config,"undefined"==typeof t&&(t={}))}),t}var n=this;n.plugin=e.plugin,n.project=e.project,n.config=o(),n.scene=e.scene,n.lptsphereinstance=e.lptsphereinstance,n.pluginPath=Config.PLUGIN_PATH+e.plugin.slug,n.initDefaultConfig=t}]}}])}(),function(){"use strict";angular.module("pst.utils").directive("bgSrc",["$rootScope","$timeout",function(e,t){return function(e,t,o){var n=o.bgSrc;n&&t.css({"background-image":'url("'+n+'")'})}}])}(),function(){"use strict";function e(e,t,o){return{restrict:"A",link:function(n,i,a){o(function(){function o(e){if(!angular.element(i).hasClass("ng-hide")){var o,r=0;if(e&&e.target){for(o=e.target;o;o=o.parentNode){var l=o.id,p=o.className,f=c.length;for(p&&void 0!==p.baseVal&&(p=p.baseVal),r=0;r<f;r++)if(void 0!==l&&l===c[r]||p&&p===c[r])return}n.$apply(function(){(s=t(a.clickOutside))(n)})}}}function r(){return"ontouchstart"in window||navigator.maxTouchPoints}var s,c=void 0!==a.outsideIfNot?a.outsideIfNot.replace(", ",",").split(","):[];void 0!==a.id&&c.push(a.id),r()&&e.on("touchstart",o),e.on("click",o),n.$on("$destroy",function(){r()&&e.off("touchstart",o),e.off("click",o)})})}}}angular.module("pst.utils").directive("clickOutside",["$document","$parse","$timeout",e])}(),function(){"use strict";angular.module("pst.utils").directive("compile",["$compile",function(e){return function(t,o,n){t.$watch(function(e){return e.$eval(n.compile)},function(n){o.html(n),e(o.contents())(t)})}}])}(),function(){"use strict";angular.module("pst.utils").directive("hoverClass",function(){return{restrict:"A",scope:{hoverClass:"@"},link:function(e,t){t.on("mouseenter",function(){t.addClass(e.hoverClass)}),t.on("mouseleave",function(){t.removeClass(e.hoverClass)})}}})}(),function(){"use strict";angular.module("pst.utils").directive("loadingSrc",function(){return{link:function(e,t,o){var n,i;n=null,i=function(){t[0].src="bower_components/SVG-Loaders/svg-loaders/puff-dark.svg",n=new Image,n.src=o.loadingSrc,n.onload=function(){t[0].src=o.loadingSrc}},e.$watch(function(){return o.loadingSrc},function(e,t){i()})}}})}(),function(){"use strict";angular.module("pst.utils").directive("selectOnClick",["$window",function(e){return{restrict:"A",link:function(t,o,n){o.on("click",function(){e.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}])}(),function(){"use strict";angular.module("pst.utils").filter("formatNumber",function(){return function(e){return angular.isUndefined(e)?"00":e>=10?e:"0"+e}}).filter("parseEmbed",function(){return function(e){function t(e){try{var t=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g,o=/(?:http?s?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g,n=/([-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?(?:jpg|jpeg|gif|png))/gi;if(t.test(e))var i='<iframe width="100%" height="345" src="//player.vimeo.com/video/$1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',e=e.replace(t,i);if(o.test(e))var i='<iframe width="100%" height="345" src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe>',e=e.replace(o,i);if(n.test(e))var i='<a href="$1" target="_blank"><img class="sml" src="$1" /></a><br />',e=e.replace(n,i)}catch(a){return!1}return e}return t(e)}})}(),function(){"use strict";function e(e,t){function o(e,t){e.sort(function(e,o){return e[t]-o[t]})}function n(){try{return window.self!==window.top}catch(e){return!0}}function i(e,t){angular.forEach(e,function(e,o){t[o]=angular.isUndefined(t[o])?e:t[o]})}function a(e,t){if(0!=t.groups.length){var o=null;return angular.forEach(t.groups,function(n,i){angular.forEach(n.scenes,function(a,r){if(e._id==a._id){if(r<n.scenes.length-1)return void(o=n.scenes[r+1]);try{i<t.groups.length-1&&(o=t.groups[i+1].scenes[0])}catch(s){console.log(s)}}})}),o}try{return t.scenes[$.inArray(e,t.scenes)+1]}catch(n){return console.log(n),null}}function r(e,t){if(0!=t.groups.length){var o=null;return angular.forEach(t.groups,function(n,i){angular.forEach(n.scenes,function(a,r){if(e._id==a._id){if(r>0)return void(o=n.scenes[r-1]);try{i>0&&(o=t.groups[i-1].scenes[t.groups[i-1].scenes.length-1])}catch(s){console.log(s)}}})}),o}try{return t.scenes[$.inArray(e,t.scenes)-1]}catch(n){return console.log(n),null}}function s(e,t){var o={};for(var n in e)o[n]=e[n];for(var n in t)o[n]=t[n];return o}function c(e){if("function"==typeof window[e])return!0;try{return t(e),!0}catch(o){return!(o instanceof TypeError)}return!1}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e,t,o,n,i){n||(n=0),i||(i=0);var a=o.getHotspotParam(t,"ath"),r=o.getHotspotParam(t,"atv"),s=o.spheretoscreen(a,r);angular.element(e).css("transform","translate("+(s.x+n)+"px,"+(s.y+i)+"px)").css("transform","-webkit-translate("+(s.x+n)+"px,"+(s.y+i)+"px)").css("transform","-ms-translate("+(s.x+n)+"px,"+(s.y+i)+"px)").css("transform","-moz-translate("+(s.x+n)+"px,"+(s.y+i)+"px)")}function f(e){return angular.isUndefined(e)||""==e||null==e}function u(e,t,o){var n={};return angular.forEach(o,function(o){if(t==o[e])return void(n=o)}),n}function h(e,t){return angular.forEach(t,function(o,n){JSON.stringify(o)===JSON.stringify(e)&&t.splice(n,1)}),t}function g(e,t,o){return angular.forEach(o,function(n,i){if(n[e]==t)return void o.splice(i,1)}),o}function d(){var e="",t=Array.prototype.slice.call(arguments);for(var o in t)e+=o<t.length-1?t[o]+"/":t[o];return e=e.replace(/([^:]\/)\/+/g,"$1")}var m={isEmpty:f,getObjectBy:u,deleteObjectFromArray:h,deleteObjectFromArrayBy:g,makeUrl:d,stickElementWithHotspot:p,capitalizeFirstLetter:l,isControllerExist:c,extendObject:s,getNextScene:a,getPrevScene:r,initDefaultConfig:i,sortByValue:o,inIframe:n};return m}e.$inject=["$http","$controller"],angular.module("pst.utils").service("LptHelper",e)}(),function(){"use strict";function e(e,t,o,n,i){var a=this,r=null;a.message="Activating your account now",a.isLoading=!0,n.activate(t.token).then(function(e){a.activated=!0,a.countdown=10,r=i(function(){a.countdown>0?a.countdown-=1:(i.cancel(r),o.go("login"))},1e3)})["catch"](function(e){a.message=e})["finally"](function(){a.isLoading=!1})}e.$inject=["$scope","$stateParams","$state","AuthSrv","$interval"],angular.module("lapentor.app").controller("ActivateAccountCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c,l,p,f){function u(){j["export"]={completed:!1}}function h(e){u(),j["export"].project=e,j.showExportLoading=!0,g(e._id)}function g(e){r.download(e).then(function(t){switch(t.download_link?(j["export"].download_link=t.download_link,j["export"].completed=!0,j["export"].size=t.size):c.error("Failed to export project. Please try again or contact our support"),t.status){case 1:j["export"].download_link=t.download_link,j["export"].completed=!0;break;case 0:d(e);break;case-1:d(e);break;default:c.error(t.msg)}},function(e){console.log(e),j.showExportLoading=!1,c.error("Can not download project. Please try again")})["finally"](function(){j.showFluidLoading=!1})}function d(e){p.load("https://checkout.stripe.com/checkout.js").then(function(){var t=StripeCheckout.configure({key:STRIPE_KEY,image:"assets/images/logo-circle.png",locale:"auto",token:function(t){j.showFluidLoading=!0,r.download(e,t.id,t.email).then(function(e){1==e.status?window.open(e.download_link,"_blank"):c.error("Can not export project. Please try again or contact us")},function(e){console.log(e)})["finally"](function(){j.showFluidLoading=!1})}});t.open({name:"Lapentor",description:"one time export",amount:100*f.export_price}),window.addEventListener("popstate",function(){t.close()})})}function m(e){j.showFluidLoading=!0,r.duplicate(e).then(function(e){j.projects.unshift(e)},function(){c.error("Can not duplicate project. Please try again")})["finally"](function(){j.showFluidLoading=!1})}function _(e){}function v(e){t.$emit("evt.openProjectSettingModal",e)}function y(e){t.$emit("evt.openProjectShareModal",e)}function b(){c.prompt("Create new project","Untitled").then(function(e){j.newProject.title=e,r.create(j.newProject).then(function(e){i(function(){o.go("project.editor",{id:e.data.project._id})})},function(e){c.error("Could not create new project. Please try again")})["finally"](function(){j.isLoading=!1})})}function w(e,t){c.confirm("Are you sure? All data will be LOST.").then(function(){j.showFluidLoading=!0,r.remove(e).then(function(e){1==e.data.status?j.projects.splice(t,1):c.error("Can not delete project")},function(e){console.log(e),c.error("Can not delete project")})["finally"](function(){j.showFluidLoading=!1})})}var k,j=this;j.user={},j["export"]={completed:!1},j.showExportLoading=!1,j.newProject={},j.projects=l,j.new_projects=l,j.isLoading=!1,j.isSearch=!1,j.notFound=!1,j.showFluidLoading=!1,j.createProject=b,j.deleteProject=w,j.duplicateProject=m,j.downloadProject=h,j.openProjectSettingModal=v,j.openProjectShareModal=y,j.exportProject=_;var x=1,S=!0,$=!1;j.isLoadMore=!1,j.loadMore=function(){1==S&&0==$&&(S=!1,j.isLoadMore=!0,r.all(9*x,9,j.searchText).then(function(e){0==e.length&&($=!0),e.length>0&&(j.new_projects=j.new_projects.concat(e),x++),j.projects=j.new_projects,j.notFound=!1,0==j.projects.length&&1==j.isSearch&&(j.notFound=!0)},function(e){})["finally"](function(){S=!0,j.isLoadMore=!1,j.isSearch=!1}))},e.$watch("vm.searchText",function(e,t){e!=t&&(j.isSearch=!0,k&&i.cancel(k),k=i(function(){x=0,$=!1,j.new_projects=[],j.loadMore()},1e3))}),j.user=s;var C={email:s.email,name:s.username,user_id:s._id,created_at:s.created_at};n.update(C),e.$on("user.update",function(e,t){j.user=t})}e.$inject=["$scope","$rootScope","$state","$intercom","$timeout","$uibModal","Project","user","Alertify","projects","$ocLazyLoad","CONST"],angular.module("lapentor.app").controller("DashboardCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i){var a=this;a.user=i}e.$inject=["$scope","$rootScope","Alertify","envService","user"],angular.module("lapentor.app").controller("ExportedProjectCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(){if(r.forgotForm.$valid){if(r.isLoading)return;r.isLoading=!0,n.sendResetLink(r.email).then(function(e){r.email=null,r.message="Please check your email and click on the link to reset your password"})["finally"](function(){r.isLoading=!1})}}var r=this;r.email=null,r.submit=a,r.forgotForm=e.forgotForm,r.isLoading=!1}e.$inject=["$scope","$state","$timeout","AuthSrv","Alertify"],angular.module("lapentor.app").controller("ForgotPasswordCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c,l){function p(e){h.isFullLoading||(h.isFullLoading=!0,r.authenticate(e).then(function(e){a(function(){i.go("index")})},function(e){400==e.status&&(h.accountNotActivated=!0,a(function(){h.accountNotActivated=!1},1e4))})["finally"](function(){h.isFullLoading=!1}))}function f(){if(h.loginForm.$valid){if(h.isLoading)return;h.isLoading=!0,r.login(h.user).then(function(e){e.data.status?a(function(){i.go("index")}):c.error("Wrong username / password")},function(e){400==e.status&&(h.accountNotActivated=!0,a(function(){h.accountNotActivated=!1},1e4))})["finally"](function(){h.isLoading=!1})}}function u(){h.registerForm.$valid&&(h.isLoading=!0,s.register(h.user).then(function(e){h.shouldShowWelcome=!0,h.user={}})["catch"](function(e){if(400==e.status){var t=e.data.errors.message;angular.forEach(t,function(e){c.error(e[0])})}})["finally"](function(){h.isLoading=!1}))}l.setTitle("Lapentor.com - The first and only CMS for Sphere photo you ever need");var h=this;e.auth={},h.user={},h.tab=n.tab?n.tab:"login",h.submitLogin=f,h.submitLoginSocial=p,h.submitRegister=u,h.loginForm=e.loginForm,h.registerForm=e.registerForm,h.isLoading=!1}e.$inject=["$scope","$resource","$rootScope","$stateParams","$state","$timeout","$auth","AuthSrv","Alertify","ngMeta"],angular.module("lapentor.app").controller("LoginCtrl",e)}(),function(){"use strict";function e(e,t,o,n){e.$on("evt.openMediaLib",function(t,n){n&&(n.makePanoCallback&&(e.makePanoCallback=n.makePanoCallback),n.chooseAssetCallback&&(e.chooseAsset=n.chooseAssetCallback),n.canelMediaLibCallback&&(e.canelMediaLib=n.canelMediaLibCallback),n.tab&&(e.currentFileType=n.tab),n.isReplacePano&&(e.isReplacePano=n.isReplacePano,e.sceneId=n.sceneId),angular.isDefined(n.canChooseMultipleFile)?e.canChooseMultipleFile=n.canChooseMultipleFile:e.canChooseMultipleFile=!0);var i=o.open({size:"lg",animation:!1,templateUrl:"modules/lapentor.app/views/partials/media_library.html",controller:"MediaLibraryModalCtrl",controllerAs:"vm",scope:e,resolve:{user:["$stateParams","User",function(e,t){return angular.isObject(e.user)?e.user:t.get()}]},backdrop:"static"});i.closed.then(function(){angular.element(".modal-backdrop").length&&(angular.element(".modal-backdrop").hide(),angular.element("body").removeClass("modal-open"))})})}function t(e,t,o,n,i,a,r,s,c,l){function p(n){$.selectedMedias.length?$.selectedMedias.length<=300?(angular.element("#block-ui").show(),$.isCreateScene=!0,angular.forEach($.selectedMedias,function(e){$.filesCreateScene[e]=o("filter")($.files,{_id:e})[0]}),$.rendering=0,$.makePanoProgress=0,$.renderingComplate=0,1==e.isReplacePano?($.rendering=1,$.renderingTotal=1,$.filesCreateScene[$.selectedMedias[0]]["class"]="working",l.replace(e.sceneId,$.selectedMedias[0],"lapentor",$.project._id,n).then(function(t){0==t?(c.error("Can not replace scene"),$.filesCreateScene[$.selectedMedias[0]]["class"]="fail"):($.filesCreateScene[$.selectedMedias[0]]["class"]="success",e.makePanoCallback(e.sceneId))},function(e){c.error("Can not replace scene"),$.filesCreateScene[$.selectedMedias[0]]["class"]="fail"})["finally"](function(){$.makePanoProgress=100,t(function(){$.isCreateScene=!1,$.selectedMedias=[],$.filesCreateScene={},angular.element("#block-ui").hide()},2e3)})):($.renderingTotal=$.selectedMedias.length,f($.selectedMedias,"lapentor",$.project._id,n,0,$.renderingTotal),$.selectedMedias.length>=2&&!angular.isUndefined($.user.subscribed)&&$.user.subscribed&&f($.selectedMedias,"lapentor",$.project._id,n,1,$.renderingTotal))):c.error("You can only make 300 sphere at a time. Sorry!"):c.error("Can't do that :( You have to select at least 1 pano image")}function f(o,n,i,a,r,s){if(!angular.isUndefined($.filesCreateScene[o[r]]["class"])){var p=r+1;return s>p&&f(o,n,i,a,p,s),!1}$.filesCreateScene[o[r]]["class"]="working",$.rendering<$.renderingTotal&&$.rendering++;var u=[];u.push(o[r]),l.create(u,n,i,a).then(function(t){try{if(t=JSON.parse('{"status'+t.data.split('{"status')[1]),0==t.status)$.filesCreateScene[o[r]]["class"]="fail",c.error(t.errors.message);else{$.filesCreateScene[o[r]]["class"]="success";var n=t.scenes;e.makePanoCallback(n)}}catch(i){console.log(i)}},function(e){c.error("Can not create scene"),$.filesCreateScene[o[r]]["class"]="fail",console.log(e)})["finally"](function(){if($.renderingComplate=$.renderingComplate+1,$.makePanoProgress=100/s*$.renderingComplate,s-$.renderingComplate==0)t(function(){$.isCreateScene=!1,$.selectedMedias=[],angular.forEach($.filesCreateScene,function(e){delete e["class"]}),$.filesCreateScene={},angular.element("#block-ui").hide()},2e3);else{var e=r+1;s>e&&f(o,n,i,a,e,s)}})}function u(){gapi.load("auth",{callback:w}),gapi.load("picker",{callback:k}),angular.element(".picker-dialog-bg,.picker-dialog").remove()}function h(t){t.length?t.length<=3?($.isLoading=!0,angular.element("#block-ui").show(),1==e.isReplacePano?l.replace(e.sceneId,t[0],"google",$.project._id).then(function(t){0==t?c.error("Can not replace scene"):(m(),e.makePanoCallback(e.sceneId))},function(e){c.error("Can not replace scene")})["finally"](function(){$.isLoading=!1,angular.element("#block-ui").hide()}):l.create(t,"google",$.project._id).then(function(t){try{if(t=JSON.parse('{"status'+t.data.split('{"status')[1]),0==t.status)c.error(t.errors.message);else{m();var o=t.scenes;e.makePanoCallback(o)}}catch(n){console.log(n)}},function(e){c.error("Can not create scene"),console.log(e)})["finally"](function(){$.isLoading=!1,angular.element("#block-ui").hide()})):c.error("You can only make 3 sphere at a time. Sorry!"):c.error("Can't do that :( You have to select at least 1 pano image")}function g(){$.selectedMedias.length>0?c.confirm("Are you sure you want to delete these files?").then(function(){$.isLoading=!0,r.remove($.selectedMedias).then(function(e){1==e.data.status?($.files=$.files.filter(function(e){return $.selectedMedias.indexOf(e._id)==-1}),$.selectedMedias=[]):c.error(e.data.errors.message)},function(e){c.error("Can not delete files"),console.log(e)})["finally"](function(){$.isLoading=!1})}):c.error("You must select a file to delete")}function d(e){$.currentFileType=e,$.selectedMedias=[]}function m(){angular.element(".modal-backdrop").remove(),angular.element("body").removeClass("modal-open"),a.dismiss(),"function"==typeof e.canelMediaLib&&e.canelMediaLib()}function _(e,t){angular.forEach(t,function(e){"dimensions"==e.$error&&c.error(e.name+" width must > 2000px"),"maxTotalSize"==e.$error&&c.error("Maximum upload size is "+e.$errorParam)}),e&&e.length&&($.isUploading=!0,r.upload(e,$.project._id,$.currentFileType).then(function(e){angular.isDefined(e.data.files)&&($.files=e.data.files.concat($.files))},function(e){c.error("Can not upload file. Please try again"),console.log(e)},function(e){var t=parseInt(100*e.loaded/e.total);$.uploadProgress=t})["finally"](function(){$.isUploading=!1,$.uploadProgress=0}))}function v(t){var o=$.selectedMedias.indexOf(t);o==-1?(e.canChooseMultipleFile||($.selectedMedias.length=0),$.selectedMedias.push(t)):$.selectedMedias.splice(o,1)}function y(){if($.selectedMedias.length==$.files.length)$.selectedMedias=[];else{$.selectedMedias=[];for(var e in $.files)$.selectedMedias.push($.files[e]._id)}}function b(){if(0==e.canChooseMultipleFile){var t=$.files.filter(function(e){return e._id==$.selectedMedias[0]});angular.isDefined(e.chooseAsset)&&e.chooseAsset(t[0]),m()}else if(1==e.canChooseMultipleFile){var o=[];angular.forEach($.selectedMedias,function(e,t){
$.files.filter(function(t){t._id==e&&o.push(t)})}),angular.isDefined(e.chooseAsset)&&e.chooseAsset(o),m()}else c.error("Please select a file")}function w(){window.gapi.auth.authorize({client_id:P,scope:E,immediate:!1},j)}function k(){A=!0,x()}function j(e){e&&!e.error&&(C=e.access_token,x())}function x(){if(A&&C){var e=(new google.picker.PickerBuilder).addView(google.picker.ViewId.DOCS).setOAuthToken(C).setDeveloperKey(T).setCallback(S).build();e.setVisible(!0)}}function S(e){var t="nothing";if(e[google.picker.Response.ACTION]==google.picker.Action.PICKED){var o=e[google.picker.Response.DOCUMENTS][0];t=o[google.picker.Document.URL];var n=o[google.picker.Document.ID],i=[];gapi.client.request({path:"/drive/v2/files/"+n,method:"GET",callback:function(e,t){var n=e.downloadUrl;o.download=n,o.oauthToken=C,i.push(o),h(i)}})}}var $=this;$.user=s,$.selectedMedias=[],$.files=[],$.project=e.project,$.uploadProgress=0,$.makePanoProgress=0,$.isUploading=!1,$.isLoading=!0,$.isCreateScene=!1,$.filesCreateScene={},$.rendering=0,$.renderingComplate=0,$.renderingTotal=0;var C,T="AIzaSyDFcThFQZ-f70UujAeL4BIdZGcVNszjdDo",P=Config.GOOGLE_DRIVE_CLIENT_ID,E=["https://www.googleapis.com/auth/photos","https://www.googleapis.com/auth/drive.readonly"],A=!1;angular.isDefined(e.currentFileType)?$.currentFileType=e.currentFileType:$.currentFileType="pano",$.cancel=m,$.upload=_,$.selectMedia=v,$.selectAll=y,$.tabSelect=d,$.deleteSelected=g,$.makePano=p,$.makePanoDriverGoogle=u,$.chooseAsset=b,r.all($.project._id).then(function(e){$.files=e})["catch"](function(e){c.error("Can not fetch files"),console.log(e)})["finally"](function(){$.isLoading=!1})}e.$inject=["$scope","$rootScope","$uibModal","User"],t.$inject=["$scope","$timeout","$filter","$state","$rootScope","$uibModalInstance","Media","user","Alertify","Scene"],angular.module("lapentor.app").controller("MediaLibraryCtrl",e).controller("MediaLibraryModalCtrl",t)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function s(){o.confirm("Do you really want to cancel your subscription? This action is irreversible").then(function(){h.isLoading||(h.isLoading=!0,r.cancelSubscription().then(function(e){1==e.status&&(o.success("Your subscription is cancelled"),h.user=e.user)},function(e){o.error("Sorry. Please try again")})["finally"](function(){h.isLoading=!1}))})}function c(){h.isLoading||(h.isLoading=!0,r.resumeSubscription().then(function(e){1==e.status&&(o.success("Welcome back :D"),h.user=e.user)},function(e){o.error("Sorry. Please try again")})["finally"](function(){h.isLoading=!1}))}function l(){h.isLoading||(h.isLoading=!0,Stripe.card.createToken(h.card,p))}function p(e,t){if(t.error)o.error(t.error.message),h.isLoading=!1;else{var n=t.id;r.updateCard(n).then(function(e){1==e.status&&(h.card={},o.success("Your card is updated"),h.user=e.user,h.showUpdateCardDetailForm=!1)},function(e){o.error("Sorry. Your card is not valid. Please try again")})["finally"](function(){h.isLoading=!1})}}function f(e,t){e&&e.length&&(h.preview[t]=e[0],h.isUploading=!0,i.upload({url:n.read("apiUrl")+"/user/upload",method:"post",data:{file:e[0],type:t}}).then(function(e){h.user[t]=e.data.url},function(e){o.error("Can not upload file"),h.preview[t]=null},function(e){var t=parseInt(100*e.loaded/e.total);h.uploadProgress=t})["finally"](function(){h.isUploading=!1,h.uploadProgress=0}))}function u(){return h.user.password&&h.user.password!=h.user.repassword?(o.error("Password confirmation is not match. Please try again"),!1):""==h.user.first_name&&""==h.user.last_name?(o.error("Please enter your name"),!1):(h.isSaving=!0,void r.update(h.user).then(function(){o.success("Profile saved")})["finally"](function(){h.isSaving=!1}))}var h=this;h.user=a,h.card={},h.isSaving=!1,h.preview=[],h.saveProfile=u,h.upload=f,h.updateCard=l,h.cancelSubscription=s,h.resumeSubscription=c}e.$inject=["$scope","$rootScope","Alertify","envService","Upload","user","User"],angular.module("lapentor.app").controller("ProfileCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c,l){function p(e){$.isDeletingSnapshot=!0,c.deleteSnapshot(e).then(function(t){t&&jQuery("#snapshot"+e).remove()},function(e){console.log(e)})["finally"](function(){$.isDeletingSnapshot=!1})}function f(){c.getExportedVersions(s._id).then(function(e){$.exportedVersions=e},function(e){console.log(e)})}function u(e){e&&e.length&&($.project.scenes=e.concat($.project.scenes),n.go("project.editor",{id:e[0].project_id,scene_id:e[0]._id}))}function h(){t.$broadcast("evt.openMediaLib",{makePanoCallback:u})}function g(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:d,canChooseMultipleFile:!1})}function d(e){e.mime_type.indexOf("image")!=-1&&($.project.meta.image=e.path)}function m(){$.isSaving=!0,c.update($.project).then(function(e){1!=e?r.error("Can not update project"):r.success("Project updated")})["finally"](function(){$.titleIsLoading=!1,$.isSaving=!1})}function _(){$.isSavingGoogle=!0,c.update($.project).then(function(e){1!=e?r.error("Can not update project"):r.success("Project updated")})["finally"](function(){$.isSavingGoogle=!1})}function v(){c.updateTitle($.project.title,$.project._id).then(function(e){$.project.slug=e,r.success("Project updated")})["catch"](function(){r.error("Can not update project")})["finally"](function(){$.titleIsLoading=!1})}function y(){$.projectPublicityIsLoading=!0,c.updatePublicAccess($.project["public"],$.project._id).then(function(e){r.success("Project publicity updated")})["catch"](function(){r.error("Can not update project")})["finally"](function(){$.projectPublicityIsLoading=!1})}function b(){$.projectCanListInPortfolioLoading=!0,c.updateCanListInPortfolio($.project.in_portfolio,$.project._id).then(function(e){r.success("Project updated")})["catch"](function(){r.error("Can not update project")})["finally"](function(){$.projectCanListInPortfolioLoading=!1})}function w(e){"input"==e?(o.cancel(x),x=o(function(){$.project.password.string.length>5?k():r.error("You have entered less than 6 characters for password")},1500)):k()}function k(){$.isUpdatingPassword=!0,c.updatePasswordProject($.project.password,$.project._id).then(function(e){r.success("Project updated")})["catch"](function(){r.error("Can not update project")})["finally"](function(){$.isUpdatingPassword=!1})}function j(){var e=$.project._id;r.confirm("Are you sure? All data will be lost").then(function(){c.remove(e).then(function(e){1==e.data.status?n.go("index"):r.error("Can not delete project")},function(e){console.log(e),r.error("Can not delete project")})})}var x,S,$=this;if(a.setTitle(s.title),$.deleteProject=j,$.titleIsLoading=!1,$.settingIsLoading=!1,$.project=s,$.project["public"]=angular.isDefined($.project["public"])?$.project["public"]:1,$.project.in_portfolio=angular.isDefined($.project.in_portfolio)?$.project.in_portfolio:1,$.project.shareUrl=i("shareUrl")($.project.slug),$.updateProject=m,$.updateGoogleProject=_,$.updatePublicAccess=y,$.updateCanListInPortfolio=b,$.updatePasswordProject=w,$.openMediaLib=h,$.openMediaAssetLib=g,$.deleteSnapshot=p,angular.isUndefined($.project.meta)||0==$.project.meta.length){$.project.meta={};var C=angular.fromJson(angular.toJson($.project));$.project.meta.title=C.title,C.scenes.length&&!$.project.meta.image&&($.project.meta.image=C.scenes[0].pano_thumb)}0==$.project.scenes.length&&o(function(){$.openMediaLib()},1e3),f(),$.isDeletingSnapshot=!1,e.$watch("vm.project.title",function(e,t){e!=t&&(S&&o.cancel(S),S=o(function(){$.titleIsLoading=!0,v()},1e3))})}e.$inject=["$scope","$rootScope","$timeout","$state","$filter","ngMeta","Alertify","project","Project","CONST"],angular.module("lapentor.app").controller("ProjectCtrl",e)}(),function(){"use strict";function e(e,t,o){t.$on("evt.openProjectSettingModal",function(t,n){e.project=n,o.open({templateUrl:"modules/lapentor.app/views/partials/project.setting.modal.html",scope:e,controllerAs:"projectSettingVm",controller:["$scope","$uibModalInstance","Alertify","Project",function(e,t,o,n){function i(){t.dismiss(),angular.element("body").removeClass("modal-open"),angular.element(".modal-backdrop").remove()}function a(){r.isLoading=!0,n.update(r.project).then(function(e){1!=e?o.error("Can not update project"):o.success("Project saved")})["finally"](function(){r.isLoading=!1})}var r=this;r.dismiss=i,r.project=e.project,r.updateProject=a}]})})}e.$inject=["$scope","$rootScope","$uibModal"],angular.module("lapentor.app").controller("ProjectSettingModalCtrl",e)}(),function(){"use strict";function e(e,t,o,n){t.$on("evt.openProjectShareModal",function(t,i){e.project=i,o.open({templateUrl:"modules/lapentor.app/views/partials/project.share.modal.html",scope:e,controllerAs:"projectShareVm",controller:["$scope","$uibModalInstance","Alertify","Project",function(e,t,o,i){function a(){t.dismiss(),angular.element("body").removeClass("modal-open"),angular.element(".modal-backdrop").remove()}var r=this;r.project=e.project,r.shareUrl=n.read("siteUrl")+"/sphere/"+r.project.slug,r.dismiss=a}]})})}e.$inject=["$scope","$rootScope","$uibModal","envService"],angular.module("lapentor.app").controller("ProjectShareModalCtrl",e)}(),function(){"use strict";function e(e,t,o,n){var i=this;i.submit=function(){i.isLoading=!0,i.resendForm.$valid?o.resendActivation(i.email).then(function(e){i.message="Your activation link was send. Please check your email (both Inbox and Spam)."})["catch"](function(e){i.message=e,i.messageClass="danger",n(function(){i.message=null,i.messageClass=""},1e4)})["finally"](function(){i.isLoading=!1,i.errorClass=""}):(i.isLoading=!1,i.errorClass="",n(function(){i.errorClass="pulse"},100))}}e.$inject=["$scope","$state","AuthSrv","$timeout"],angular.module("lapentor.app").controller("ResendActivateAccountCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a){var r=this;r.submit=function(){r.isLoading||(r.password==r.passwordConfirmation?r.resetForm.$valid?(r.isLoading=!0,a.resetPassword({token:n.token,password:r.password,password_confirmation:r.passwordConfirmation}).then(function(e){r.message="Your new password is saved. You will be redirect to sign in page in 5 seconds",o(function(){t.go("login")},5e3)})["finally"](function(){r.isLoading=!1})):(i.error("Password field is required"),r.isLoading=!1):(i.error("Password is not match"),r.isLoading=!1))}}e.$inject=["$scope","$state","$timeout","$stateParams","Alertify","AuthSrv"],angular.module("lapentor.app").controller("ResetPasswordCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a){var r=this;r.user=i,r.user.sceneCount=0,angular.forEach(r.user.projects,function(e){r.user.sceneCount+=e.scenes.length}),r.openProject=function(e){window.open(n("shareUrl")(e))};try{if(angular.isDefined(i.first_name)&&angular.isDefined(i.last_name)?""==i.first_name&&""==i.last_name||o.setTitle(i.first_name+" "+i.last_name):o.setTitle(i.username),""!=i.bio&&o.setTag("description",i.bio),angular.isDefined(i.avatar)&&""!=i.avatar){var s=i.avatar.replace(/^https:\/\//i,"http://");o.setTag("image",s)}else if(angular.isDefined(i.cover)&&""!=i.cover){var s=i.cover.replace(/^https:\/\//i,"http://");o.setTag("image",s)}}catch(c){o.setTitle(i.username),console.log(c)}}e.$inject=["$scope","$stateParams","ngMeta","$filter","user","Showcase"],angular.module("lapentor.app").controller("ShowcaseCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(){p.isLoading||(p.isLoading=!0,Stripe.card.createToken(p.card,r))}function r(e,a){if(a.error)o.error(a.error.message),p.isLoading=!1;else{var r=a.id;t.post(n.read("apiUrl")+"/user/upgrade",{stripeToken:r,type:p.method,coupon:p.coupon}).then(function(e){1==e.data.status&&(p.card={},p.showCongrat=!0,i.$broadcast("user.update",e.data.user))},function(e){o.error("Sorry. Please try again")})["finally"](function(){p.isLoading=!1})}}function s(e){jQuery("#upgradeModal").show(),e.subscribed&&(p.showCongrat=!0,p.showPaymentForm=!1)}function c(){jQuery("#upgradeModal").hide()}function l(e){switch(p.method=e,e){case"monthly":p.price=n.read("planMonthly");break;case"yearly":p.price=n.read("planYearly")}}var p=this;p.openUpgradeForm=s,p.switchMethod=l,p.closeUpgradeForm=c,p.submit=a,p.showPaymentForm=!1,p.isLoading=!1,p.card={},p.switchMethod("yearly")}e.$inject=["$scope","$http","Alertify","envService","$rootScope"],angular.module("lapentor.app").controller("UpgradeCtrl",e)}(),function(){"use strict";angular.module("lapentor.app").directive("editorControlbar",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/project.editor/editor.controlbar.html",controller:"EditorControlBarCtrl",controllerAs:"ebVm"}})}(),function(){"use strict";angular.module("lapentor.app").directive("editorMarket",function(){return{restrict:"E",controller:"EditorMarketCtrl",templateUrl:"modules/lapentor.app/views/partials/project.editor/market.html"}})}(),function(){"use strict";angular.module("lapentor.app").directive("editorScenesManagement",function(){return{restrict:"E",controller:"EditorScenesManagementCtrl",templateUrl:"modules/lapentor.app/views/partials/project.editor/scenes.management.html"}})}(),function(){"use strict";angular.module("lapentor.app").directive("editorToolbar",function(){return{restrict:"E",controller:"EditorToolbarCtrl",templateUrl:"modules/lapentor.app/views/partials/project.editor/toolbar.html"}})}(),function(){"use strict";angular.module("lapentor.app").directive("focusme",["$timeout",function(e){return{scope:{trigger:"@focus"},link:function(t,o){t.$watch("trigger",function(t){"true"===t&&e(function(){o[0].focus()})})}}}])}(),function(){"use strict";angular.module("lapentor.app").directive("lptAudio",["$sce",function(e){return{restrict:"E",scope:{hotspotid:"=",src:"=",volume:"="},replace:!0,template:'<audio id="sound{{ hotspotid }}" ng-src="{{ url }}" controls></audio>',link:function(t,o){t.$watch("src",function(o,n){void 0!==o&&(t.url=e.trustAsResourceUrl(o))});var n=angular.element(o)[0];t.$watch("volume",function(e,t){void 0!==e&&(n.volume=e/100)})}}}])}(),function(){"use strict";angular.module("lapentor.app").directive("marketplaceItemConfig",function(){return{restrict:"E",controller:"MarketplaceItemConfigCtrl",controllerAs:"vm",scope:{project:"="}}})}(),function(){"use strict";angular.module("lapentor.app").directive("mediaLibrary",function(){return{restrict:"E",controller:"MediaLibraryCtrl",controllerAs:"vm",scope:{project:"=",chooseAsset:"&"}}})}(),function(){"use strict";angular.module("lapentor.app").directive("projectSettingModal",function(){return{restrict:"E",controller:"ProjectSettingModalCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("projectShareModal",function(){return{restrict:"E",controller:"ProjectShareModalCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").filter("shareUrl",["envService",function(e){return function(t){return angular.isUndefined(t)?"":e.read("siteUrl")+"/sphere/"+t}}])}(),function(){"use strict";function e(e,t,o){var n={response:function(e){return e},requestError:function(t){return e.reject(t)},responseError:function(n){return 401==n.status&&(t.get("$auth").logout(),localStorage.removeItem("satellizer_token"),t.get("$state").go("login")),404==n.status&&t.get("$state").go("404"),402==n.status&&o.error("Your trial is ended. Please Upgrade to Premium plan"),e.reject(n)}};return n}e.$inject=["$q","$injector","Alertify"],angular.module("lapentor.app").factory("lptInterceptor",e)}(),function(){"use strict";function e(e,t,o,n){function i(i){var a=o.defer();return e({method:"POST",url:t.read("apiUrl")+"/auth/send-reset-link",data:{email:i}}).then(function(e){e.data.status?a.resolve(e.data.status):a.reject(e)})["catch"](function(e){switch(e.status){case 500:n.error("There is something wrong. Please try again");break;case 400:n.error("User with this email is not found or your account is not activated");break;case 422:p(e.data)}a.reject()}),a.promise}function a(o){return e({method:"POST",url:t.read("apiUrl")+"/auth/register",data:o})}function r(o){return e({method:"POST",url:t.read("apiUrl")+"/auth/login",data:o})}function s(i){var a=o.defer();return e({method:"POST",url:t.read("apiUrl")+"/auth/reset-password",data:i}).then(function(e){e.data.status?a.resolve(e.data.status):a.reject(e)})["catch"](function(e){switch(e.status){case 500:a.reject("Can not reset your password. Please try again");break;case 400:n.error("Token is not valid or expired :("),a.reject();break;case 422:p(e.data);break;default:a.reject()}}),a.promise}function c(n){var i=o.defer();return e({method:"POST",url:t.read("apiUrl")+"/auth/register/activate",data:{token:n}}).then(function(e){e.data.status?i.resolve(e.data.status):i.reject(e)})["catch"](function(e){switch(e.status){case 500:i.reject("Can not activate your account. Please try again");break;case 400:i.reject("Token is not valid or expired :(");break;case 422:i.reject("The activation token is required");break;default:i.reject()}}),i.promise}function l(n){var i=o.defer();return e({method:"POST",url:t.read("apiUrl")+"/auth/register/resend-activate",data:{email:n}}).then(function(e){e.data.status?i.resolve(e.data.status):i.reject(e)})["catch"](function(e){switch(e.status){case 500:i.reject("Can not generate a new activation link. Please try again");break;case 400:i.reject("User with this email is not found or your account is already activated");break;case 422:i.reject("Email is not valid");break;default:i.reject()}}),i.promise}function p(e){e&&angular.forEach(e,function(e){n.error(e[0])})}var f={register:a,activate:c,resendActivation:l,sendResetLink:i,resetPassword:s,login:r};return f}e.$inject=["$http","envService","$q","Alertify"],angular.module("lapentor.app").factory("AuthSrv",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(o){var i=e.defer();return t.get(n.read("apiUrl")+"/hotspots",{params:{scene_id:o}}).then(function(e){i.resolve(e.data)},function(e){console.log("ERR: Get all hotspots",e),i.reject(e)}),i.promise}function r(e,o,i,a){return t.post(n.read("apiUrl")+"/hotspot/create",{x:e,y:o,scene_id:a,type:i})}function s(e){return t.put(n.read("apiUrl")+"/hotspot/"+e._id,e)}function c(e,t){var o="lptHotspot"+e._id;t.addHotspot({title:e.title,name:o,url:"assets/images/hotspots/"+e.type+".png",ath:e.position.x,atv:e.position.y})}function l(e){var t="assets/images/hotspots";return e&&(t=i.makeUrl(Config.THEME_PATH,"hotspot",e,"images")),[{name:"point",tooltip:"Point Hotspot",icon:t+"/point.png"},{name:"sound",tooltip:"Directional sound Hotspot",icon:t+"/sound.png"},{name:"image",tooltip:"Image Hotspot",icon:t+"/image.png"},{name:"video",tooltip:"Video Hotspot",icon:t+"/video.png"},{name:"article",tooltip:"Article Hotspot",icon:t+"/article.png"},{name:"textf",tooltip:"Info Hotspot",icon:t+"/textf.png"},{name:"url",tooltip:"Url Hotspot",icon:t+"/url.png"}]}function p(){function e(){return o+=16}function t(){return n++}var o=-60,n=1;return[{_id:t(),title:"Point hotspot",position:{x:e(),y:0},type:"point"},{_id:t(),title:"Image hotspot",position:{x:e(),y:0},type:"image"},{_id:t(),title:"Video hotspot",position:{x:e(),y:0},type:"video"},{_id:t(),title:"Article hotspot",position:{x:e(),y:0},type:"article"},{_id:t(),title:"Text field hotspot",position:{x:e(),y:0},type:"textf"},{_id:t(),title:"Url hotspot",position:{x:e(),y:0},type:"url"}]}function f(e){return t["delete"](n.read("apiUrl")+"/hotspot/"+e)}var u={all:a,create:r,append:c,update:s,getTypes:l,remove:f,getDemoHotspots:p};return u}e.$inject=["$q","$http","lptSphere","envService","LptHelper"],angular.module("lapentor.app").factory("Hotspot",e)}(),function(){"use strict";function e(){function e(e){switch(e){case"glyphicon":return["glyphicon glyphicon-asterisk","glyphicon glyphicon-plus","glyphicon glyphicon-euro","glyphicon glyphicon-eur","glyphicon glyphicon-minus","glyphicon glyphicon-cloud","glyphicon glyphicon-envelope","glyphicon glyphicon-pencil","glyphicon glyphicon-glass","glyphicon glyphicon-music","glyphicon glyphicon-search","glyphicon glyphicon-heart","glyphicon glyphicon-star","glyphicon glyphicon-star-empty","glyphicon glyphicon-user","glyphicon glyphicon-film","glyphicon glyphicon-th-large","glyphicon glyphicon-th","glyphicon glyphicon-th-list","glyphicon glyphicon-ok","glyphicon glyphicon-remove","glyphicon glyphicon-zoom-in","glyphicon glyphicon-zoom-out","glyphicon glyphicon-off","glyphicon glyphicon-signal","glyphicon glyphicon-cog","glyphicon glyphicon-trash","glyphicon glyphicon-home","glyphicon glyphicon-file","glyphicon glyphicon-time","glyphicon glyphicon-road","glyphicon glyphicon-download-alt","glyphicon glyphicon-download","glyphicon glyphicon-upload","glyphicon glyphicon-inbox","glyphicon glyphicon-play-circle","glyphicon glyphicon-repeat","glyphicon glyphicon-refresh","glyphicon glyphicon-list-alt","glyphicon glyphicon-lock","glyphicon glyphicon-flag","glyphicon glyphicon-headphones","glyphicon glyphicon-volume-off","glyphicon glyphicon-volume-down","glyphicon glyphicon-volume-up","glyphicon glyphicon-qrcode","glyphicon glyphicon-barcode","glyphicon glyphicon-tag","glyphicon glyphicon-tags","glyphicon glyphicon-book","glyphicon glyphicon-bookmark","glyphicon glyphicon-print","glyphicon glyphicon-camera","glyphicon glyphicon-font","glyphicon glyphicon-bold","glyphicon glyphicon-italic","glyphicon glyphicon-text-height","glyphicon glyphicon-text-width","glyphicon glyphicon-align-left","glyphicon glyphicon-align-center","glyphicon glyphicon-align-right","glyphicon glyphicon-align-justify","glyphicon glyphicon-list","glyphicon glyphicon-indent-left","glyphicon glyphicon-indent-right","glyphicon glyphicon-facetime-video","glyphicon glyphicon-picture","glyphicon glyphicon-map-marker","glyphicon glyphicon-adjust","glyphicon glyphicon-tint","glyphicon glyphicon-edit","glyphicon glyphicon-share","glyphicon glyphicon-check","glyphicon glyphicon-move","glyphicon glyphicon-step-backward","glyphicon glyphicon-fast-backward","glyphicon glyphicon-backward","glyphicon glyphicon-play","glyphicon glyphicon-pause","glyphicon glyphicon-stop","glyphicon glyphicon-forward","glyphicon glyphicon-fast-forward","glyphicon glyphicon-step-forward","glyphicon glyphicon-eject","glyphicon glyphicon-chevron-left","glyphicon glyphicon-chevron-right","glyphicon glyphicon-plus-sign","glyphicon glyphicon-minus-sign","glyphicon glyphicon-remove-sign","glyphicon glyphicon-ok-sign","glyphicon glyphicon-question-sign","glyphicon glyphicon-info-sign","glyphicon glyphicon-screenshot","glyphicon glyphicon-remove-circle","glyphicon glyphicon-ok-circle","glyphicon glyphicon-ban-circle","glyphicon glyphicon-arrow-left","glyphicon glyphicon-arrow-right","glyphicon glyphicon-arrow-up","glyphicon glyphicon-arrow-down","glyphicon glyphicon-share-alt","glyphicon glyphicon-resize-full","glyphicon glyphicon-resize-small","glyphicon glyphicon-exclamation-sign","glyphicon glyphicon-gift","glyphicon glyphicon-leaf","glyphicon glyphicon-fire","glyphicon glyphicon-eye-open","glyphicon glyphicon-eye-close","glyphicon glyphicon-warning-sign","glyphicon glyphicon-plane","glyphicon glyphicon-calendar","glyphicon glyphicon-random","glyphicon glyphicon-comment","glyphicon glyphicon-magnet","glyphicon glyphicon-chevron-up","glyphicon glyphicon-chevron-down","glyphicon glyphicon-retweet","glyphicon glyphicon-shopping-cart","glyphicon glyphicon-folder-close","glyphicon glyphicon-folder-open","glyphicon glyphicon-resize-vertical","glyphicon glyphicon-resize-horizontal","glyphicon glyphicon-hdd","glyphicon glyphicon-bullhorn","glyphicon glyphicon-bell","glyphicon glyphicon-certificate","glyphicon glyphicon-thumbs-up","glyphicon glyphicon-thumbs-down","glyphicon glyphicon-hand-right","glyphicon glyphicon-hand-left","glyphicon glyphicon-hand-up","glyphicon glyphicon-hand-down","glyphicon glyphicon-circle-arrow-right","glyphicon glyphicon-circle-arrow-left","glyphicon glyphicon-circle-arrow-up","glyphicon glyphicon-circle-arrow-down","glyphicon glyphicon-globe","glyphicon glyphicon-wrench","glyphicon glyphicon-tasks","glyphicon glyphicon-filter","glyphicon glyphicon-briefcase","glyphicon glyphicon-fullscreen","glyphicon glyphicon-dashboard","glyphicon glyphicon-paperclip","glyphicon glyphicon-heart-empty","glyphicon glyphicon-link","glyphicon glyphicon-phone","glyphicon glyphicon-pushpin","glyphicon glyphicon-usd","glyphicon glyphicon-gbp","glyphicon glyphicon-sort","glyphicon glyphicon-sort-by-alphabet","glyphicon glyphicon-sort-by-alphabet-alt","glyphicon glyphicon-sort-by-order","glyphicon glyphicon-sort-by-order-alt","glyphicon glyphicon-sort-by-attributes","glyphicon glyphicon-sort-by-attributes-alt","glyphicon glyphicon-unchecked","glyphicon glyphicon-expand","glyphicon glyphicon-collapse-down","glyphicon glyphicon-collapse-up","glyphicon glyphicon-log-in","glyphicon glyphicon-flash","glyphicon glyphicon-log-out","glyphicon glyphicon-new-window","glyphicon glyphicon-record","glyphicon glyphicon-save","glyphicon glyphicon-open","glyphicon glyphicon-saved","glyphicon glyphicon-import","glyphicon glyphicon-export","glyphicon glyphicon-send","glyphicon glyphicon-floppy-disk","glyphicon glyphicon-floppy-saved","glyphicon glyphicon-floppy-remove","glyphicon glyphicon-floppy-save","glyphicon glyphicon-floppy-open","glyphicon glyphicon-credit-card","glyphicon glyphicon-transfer","glyphicon glyphicon-cutlery","glyphicon glyphicon-header","glyphicon glyphicon-compressed","glyphicon glyphicon-earphone","glyphicon glyphicon-phone-alt","glyphicon glyphicon-tower","glyphicon glyphicon-stats","glyphicon glyphicon-sd-video","glyphicon glyphicon-hd-video","glyphicon glyphicon-subtitles","glyphicon glyphicon-sound-stereo","glyphicon glyphicon-sound-dolby","glyphicon glyphicon-sound-5-1","glyphicon glyphicon-sound-6-1","glyphicon glyphicon-sound-7-1","glyphicon glyphicon-copyright-mark","glyphicon glyphicon-registration-mark","glyphicon glyphicon-cloud-download","glyphicon glyphicon-cloud-upload","glyphicon glyphicon-tree-conifer","glyphicon glyphicon-tree-deciduous","glyphicon glyphicon-cd","glyphicon glyphicon-save-file","glyphicon glyphicon-open-file","glyphicon glyphicon-level-up","glyphicon glyphicon-copy","glyphicon glyphicon-paste","glyphicon glyphicon-alert","glyphicon glyphicon-equalizer","glyphicon glyphicon-king","glyphicon glyphicon-queen","glyphicon glyphicon-pawn","glyphicon glyphicon-bishop","glyphicon glyphicon-knight","glyphicon glyphicon-baby-formula","glyphicon glyphicon-tent","glyphicon glyphicon-blackboard","glyphicon glyphicon-bed","glyphicon glyphicon-apple","glyphicon glyphicon-erase","glyphicon glyphicon-hourglass","glyphicon glyphicon-lamp","glyphicon glyphicon-duplicate","glyphicon glyphicon-piggy-bank","glyphicon glyphicon-scissors","glyphicon glyphicon-bitcoin","glyphicon glyphicon-btc","glyphicon glyphicon-xbt","glyphicon glyphicon-yen","glyphicon glyphicon-jpy","glyphicon glyphicon-ruble","glyphicon glyphicon-rub","glyphicon glyphicon-scale","glyphicon glyphicon-ice-lolly","glyphicon glyphicon-ice-lolly-tasted","glyphicon glyphicon-education","glyphicon glyphicon-option-horizontal","glyphicon glyphicon-option-vertical","glyphicon glyphicon-menu-hamburger","glyphicon glyphicon-modal-window","glyphicon glyphicon-oil","glyphicon glyphicon-grain","glyphicon glyphicon-sunglasses","glyphicon glyphicon-text-size","glyphicon glyphicon-text-color","glyphicon glyphicon-text-background","glyphicon glyphicon-object-align-top","glyphicon glyphicon-object-align-bottom","glyphicon glyphicon-object-align-horizontal","glyphicon glyphicon-object-align-left","glyphicon glyphicon-object-align-vertical","glyphicon glyphicon-object-align-right","glyphicon glyphicon-triangle-right","glyphicon glyphicon-triangle-left","glyphicon glyphicon-triangle-bottom","glyphicon glyphicon-triangle-top","glyphicon glyphicon-console","glyphicon glyphicon-superscript","glyphicon glyphicon-subscript","glyphicon glyphicon-menu-left","glyphicon glyphicon-menu-right","glyphicon glyphicon-menu-down","glyphicon glyphicon-menu-up"];case"fontawesome":return["fa fa-bluetooth","fa fa-bluetooth-b","fa fa-codiepie","fa fa-credit-card-alt","fa fa-edge","fa fa-fort-awesome","fa fa-hashtag","fa fa-mixcloud","fa fa-modx","fa fa-pause-circle","fa fa-pause-circle-o","fa fa-percent","fa fa-product-hunt","fa fa-reddit-alien","fa fa-scribd","fa fa-shopping-bag","fa fa-shopping-basket","fa fa-stop-circle","fa fa-stop-circle-o","fa fa-usb","fa fa-adjust","fa fa-anchor","fa fa-archive","fa fa-area-chart","fa fa-arrows","fa fa-arrows-h","fa fa-arrows-v","fa fa-asterisk","fa fa-at","fa fa-automobile","fa fa-balance-scale","fa fa-ban","fa fa-bank","fa fa-bar-chart","fa fa-bar-chart-o","fa fa-barcode","fa fa-bars","fa fa-battery-0","fa fa-battery-1","fa fa-battery-2","fa fa-battery-3","fa fa-battery-4","fa fa-battery-empty","fa fa-battery-full","fa fa-battery-half","fa fa-battery-quarter","fa fa-battery-three-quarters","fa fa-bed","fa fa-beer","fa fa-bell","fa fa-bell-o","fa fa-bell-slash","fa fa-bell-slash-o","fa fa-bicycle","fa fa-binoculars","fa fa-birthday-cake","fa fa-bolt","fa fa-bomb","fa fa-book","fa fa-bookmark","fa fa-bookmark-o","fa fa-briefcase","fa fa-bug","fa fa-building","fa fa-building-o","fa fa-bullhorn","fa fa-bullseye","fa fa-bus","fa fa-cab","fa fa-calculator","fa fa-calendar","fa fa-calendar-check-o","fa fa-calendar-minus-o","fa fa-calendar-o","fa fa-calendar-plus-o","fa fa-calendar-times-o","fa fa-camera","fa fa-camera-retro","fa fa-car","fa fa-caret-square-o-down","fa fa-caret-square-o-left","fa fa-caret-square-o-right","fa fa-caret-square-o-up","fa fa-cart-arrow-down","fa fa-cart-plus","fa fa-cc","fa fa-certificate","fa fa-check","fa fa-check-circle","fa fa-check-circle-o","fa fa-check-square","fa fa-check-square-o","fa fa-child","fa fa-circle","fa fa-circle-o","fa fa-circle-o-notch","fa fa-circle-thin","fa fa-clock-o","fa fa-clone","fa fa-close","fa fa-cloud","fa fa-cloud-download","fa fa-cloud-upload","fa fa-code","fa fa-code-fork","fa fa-coffee","fa fa-cog","fa fa-cogs","fa fa-comment","fa fa-comment-o","fa fa-commenting","fa fa-commenting-o","fa fa-comments","fa fa-comments-o","fa fa-compass","fa fa-copyright","fa fa-creative-commons","fa fa-credit-card","fa fa-crop","fa fa-crosshairs","fa fa-cube","fa fa-cubes","fa fa-cutlery","fa fa-dashboard","fa fa-database","fa fa-desktop","fa fa-diamond","fa fa-dot-circle-o","fa fa-download","fa fa-edit","fa fa-ellipsis-h","fa fa-ellipsis-v","fa fa-envelope","fa fa-envelope-o","fa fa-envelope-square","fa fa-eraser","fa fa-exchange","fa fa-exclamation","fa fa-exclamation-circle","fa fa-exclamation-triangle","fa fa-external-link","fa fa-external-link-square","fa fa-eye","fa fa-eye-slash","fa fa-eyedropper","fa fa-fax","fa fa-feed","fa fa-female","fa fa-fighter-jet","fa fa-file-archive-o","fa fa-file-audio-o","fa fa-file-code-o","fa fa-file-excel-o","fa fa-file-image-o","fa fa-file-movie-o","fa fa-file-pdf-o","fa fa-file-photo-o","fa fa-file-picture-o","fa fa-file-powerpoint-o","fa fa-file-sound-o","fa fa-file-video-o","fa fa-file-word-o","fa fa-file-zip-o","fa fa-film","fa fa-filter","fa fa-fire","fa fa-fire-extinguisher","fa fa-flag","fa fa-flag-checkered","fa fa-flag-o","fa fa-flash","fa fa-flask","fa fa-folder","fa fa-folder-o","fa fa-folder-open","fa fa-folder-open-o","fa fa-frown-o","fa fa-futbol-o","fa fa-gamepad","fa fa-gavel","fa fa-gear","fa fa-gears","fa fa-gift","fa fa-glass","fa fa-globe","fa fa-graduation-cap","fa fa-group","fa fa-hand-grab-o","fa fa-hand-lizard-o","fa fa-hand-paper-o","fa fa-hand-peace-o","fa fa-hand-pointer-o","fa fa-hand-rock-o","fa fa-hand-scissors-o","fa fa-hand-spock-o","fa fa-hand-stop-o","fa fa-hdd-o","fa fa-headphones","fa fa-heart","fa fa-heart-o","fa fa-heartbeat","fa fa-history","fa fa-home","fa fa-hotel","fa fa-hourglass","fa fa-hourglass-1","fa fa-hourglass-2","fa fa-hourglass-3","fa fa-hourglass-end","fa fa-hourglass-half","fa fa-hourglass-o","fa fa-hourglass-start","fa fa-i-cursor","fa fa-image","fa fa-inbox","fa fa-industry","fa fa-info","fa fa-info-circle","fa fa-institution","fa fa-key","fa fa-keyboard-o","fa fa-language","fa fa-laptop","fa fa-leaf","fa fa-legal","fa fa-lemon-o","fa fa-level-down","fa fa-level-up","fa fa-life-bouy","fa fa-life-buoy","fa fa-life-ring","fa fa-life-saver","fa fa-lightbulb-o","fa fa-line-chart","fa fa-location-arrow","fa fa-lock","fa fa-magic","fa fa-magnet","fa fa-mail-forward","fa fa-mail-reply","fa fa-mail-reply-all","fa fa-male","fa fa-map","fa fa-map-marker","fa fa-map-o","fa fa-map-pin","fa fa-map-signs","fa fa-meh-o","fa fa-microphone","fa fa-microphone-slash","fa fa-minus","fa fa-minus-circle","fa fa-minus-square","fa fa-minus-square-o","fa fa-mobile","fa fa-mobile-phone","fa fa-money","fa fa-moon-o","fa fa-mortar-board","fa fa-motorcycle","fa fa-mouse-pointer","fa fa-music","fa fa-navicon","fa fa-newspaper-o","fa fa-object-group","fa fa-object-ungroup","fa fa-paint-brush","fa fa-paper-plane","fa fa-paper-plane-o","fa fa-paw","fa fa-pencil","fa fa-pencil-square","fa fa-pencil-square-o","fa fa-phone","fa fa-phone-square","fa fa-photo","fa fa-picture-o","fa fa-pie-chart","fa fa-plane","fa fa-plug","fa fa-plus","fa fa-plus-circle","fa fa-plus-square","fa fa-plus-square-o","fa fa-power-off","fa fa-print","fa fa-puzzle-piece","fa fa-qrcode","fa fa-question","fa fa-question-circle","fa fa-quote-left","fa fa-quote-right","fa fa-random","fa fa-recycle","fa fa-refresh","fa fa-registered","fa fa-remove","fa fa-reorder","fa fa-reply","fa fa-reply-all","fa fa-retweet","fa fa-road","fa fa-rocket","fa fa-rss","fa fa-rss-square","fa fa-search","fa fa-search-minus","fa fa-search-plus","fa fa-send","fa fa-send-o","fa fa-server","fa fa-share","fa fa-share-alt","fa fa-share-alt-square","fa fa-share-square","fa fa-share-square-o","fa fa-shield","fa fa-ship","fa fa-shopping-cart","fa fa-sign-in","fa fa-sign-out","fa fa-signal","fa fa-sitemap","fa fa-sliders","fa fa-smile-o","fa fa-soccer-ball-o","fa fa-sort","fa fa-sort-alpha-asc","fa fa-sort-alpha-desc","fa fa-sort-amount-asc","fa fa-sort-amount-desc","fa fa-sort-asc","fa fa-sort-desc","fa fa-sort-down","fa fa-sort-numeric-asc","fa fa-sort-numeric-desc","fa fa-sort-up","fa fa-space-shuttle","fa fa-spinner","fa fa-spoon","fa fa-square","fa fa-square-o","fa fa-star","fa fa-star-half","fa fa-star-half-empty","fa fa-star-half-full","fa fa-star-half-o","fa fa-star-o","fa fa-sticky-note","fa fa-sticky-note-o","fa fa-street-view","fa fa-suitcase","fa fa-sun-o","fa fa-support","fa fa-tablet","fa fa-tachometer","fa fa-tag","fa fa-tags","fa fa-tasks","fa fa-taxi","fa fa-television","fa fa-terminal","fa fa-thumb-tack","fa fa-thumbs-down","fa fa-thumbs-o-down","fa fa-thumbs-o-up","fa fa-thumbs-up","fa fa-ticket","fa fa-times","fa fa-times-circle","fa fa-times-circle-o","fa fa-tint","fa fa-toggle-down","fa fa-toggle-left","fa fa-toggle-off","fa fa-toggle-on","fa fa-toggle-right","fa fa-toggle-up","fa fa-trademark","fa fa-trash","fa fa-trash-o","fa fa-tree","fa fa-trophy","fa fa-truck","fa fa-tty","fa fa-tv","fa fa-umbrella","fa fa-university","fa fa-unlock","fa fa-unlock-alt","fa fa-unsorted","fa fa-upload","fa fa-user","fa fa-user-plus","fa fa-user-secret","fa fa-user-times","fa fa-users","fa fa-video-camera","fa fa-volume-down","fa fa-volume-off","fa fa-volume-up","fa fa-warning","fa fa-wheelchair","fa fa-wifi","fa fa-wrench","fa fa-hand-o-down","fa fa-hand-o-left","fa fa-hand-o-right","fa fa-hand-o-up","fa fa-ambulance","fa fa-subway","fa fa-train","fa fa-genderless","fa fa-intersex","fa fa-mars","fa fa-mars-double","fa fa-mars-stroke","fa fa-mars-stroke-h","fa fa-mars-stroke-v","fa fa-mercury","fa fa-neuter","fa fa-transgender","fa fa-transgender-alt","fa fa-venus","fa fa-venus-double","fa fa-venus-mars","fa fa-file","fa fa-file-o","fa fa-file-text","fa fa-file-text-o","fa fa-cc-amex","fa fa-cc-diners-club","fa fa-cc-discover","fa fa-cc-jcb","fa fa-cc-mastercard","fa fa-cc-paypal","fa fa-cc-stripe","fa fa-cc-visa","fa fa-google-wallet","fa fa-paypal","fa fa-bitcoin","fa fa-btc","fa fa-cny","fa fa-dollar","fa fa-eur","fa fa-euro","fa fa-gbp","fa fa-gg","fa fa-gg-circle","fa fa-ils","fa fa-inr","fa fa-jpy","fa fa-krw","fa fa-rmb","fa fa-rouble","fa fa-rub","fa fa-ruble","fa fa-rupee","fa fa-shekel","fa fa-sheqel","fa fa-try","fa fa-turkish-lira","fa fa-usd","fa fa-won","fa fa-yen","fa fa-align-center","fa fa-align-justify","fa fa-align-left","fa fa-align-right","fa fa-bold","fa fa-chain","fa fa-chain-broken","fa fa-clipboard","fa fa-columns","fa fa-copy","fa fa-cut","fa fa-dedent","fa fa-files-o","fa fa-floppy-o","fa fa-font","fa fa-header","fa fa-indent","fa fa-italic","fa fa-link","fa fa-list","fa fa-list-alt","fa fa-list-ol","fa fa-list-ul","fa fa-outdent","fa fa-paperclip","fa fa-paragraph","fa fa-paste","fa fa-repeat","fa fa-rotate-left","fa fa-rotate-right","fa fa-save","fa fa-scissors","fa fa-strikethrough","fa fa-subscript","fa fa-superscript","fa fa-table","fa fa-text-height","fa fa-text-width","fa fa-th","fa fa-th-large","fa fa-th-list","fa fa-underline","fa fa-undo","fa fa-unlink","fa fa-angle-double-down","fa fa-angle-double-left","fa fa-angle-double-right","fa fa-angle-double-up","fa fa-angle-down","fa fa-angle-left","fa fa-angle-right","fa fa-angle-up","fa fa-arrow-circle-down","fa fa-arrow-circle-left","fa fa-arrow-circle-o-down","fa fa-arrow-circle-o-left","fa fa-arrow-circle-o-right","fa fa-arrow-circle-o-up","fa fa-arrow-circle-right","fa fa-arrow-circle-up","fa fa-arrow-down","fa fa-arrow-left","fa fa-arrow-right","fa fa-arrow-up","fa fa-arrows-alt","fa fa-caret-down","fa fa-caret-left","fa fa-caret-right","fa fa-caret-up","fa fa-chevron-circle-down","fa fa-chevron-circle-left","fa fa-chevron-circle-right","fa fa-chevron-circle-up","fa fa-chevron-down","fa fa-chevron-left","fa fa-chevron-right","fa fa-chevron-up","fa fa-long-arrow-down","fa fa-long-arrow-left","fa fa-long-arrow-right","fa fa-long-arrow-up","fa fa-backward","fa fa-compress","fa fa-eject","fa fa-expand","fa fa-fast-backward","fa fa-fast-forward","fa fa-forward","fa fa-pause","fa fa-play","fa fa-play-circle","fa fa-play-circle-o","fa fa-step-backward","fa fa-step-forward","fa fa-stop","fa fa-youtube-play","fa fa-500px","fa fa-adn","fa fa-amazon","fa fa-android","fa fa-angellist","fa fa-apple","fa fa-behance","fa fa-behance-square","fa fa-bitbucket","fa fa-bitbucket-square","fa fa-black-tie","fa fa-buysellads","fa fa-chrome","fa fa-codepen","fa fa-connectdevelop","fa fa-contao","fa fa-css3","fa fa-dashcube","fa fa-delicious","fa fa-deviantart","fa fa-digg","fa fa-dribbble","fa fa-dropbox","fa fa-drupal","fa fa-empire","fa fa-expeditedssl","fa fa-facebook","fa fa-facebook-f","fa fa-facebook-official","fa fa-facebook-square","fa fa-firefox","fa fa-flickr","fa fa-fonticons","fa fa-forumbee","fa fa-foursquare","fa fa-ge","fa fa-get-pocket","fa fa-git","fa fa-git-square","fa fa-github","fa fa-github-alt","fa fa-github-square","fa fa-gittip","fa fa-google","fa fa-google-plus","fa fa-google-plus-square","fa fa-gratipay","fa fa-hacker-news","fa fa-houzz","fa fa-html5","fa fa-instagram","fa fa-internet-explorer","fa fa-ioxhost","fa fa-joomla","fa fa-jsfiddle","fa fa-lastfm","fa fa-lastfm-square","fa fa-leanpub","fa fa-linkedin","fa fa-linkedin-square","fa fa-linux","fa fa-maxcdn","fa fa-meanpath","fa fa-medium","fa fa-odnoklassniki","fa fa-odnoklassniki-square","fa fa-opencart","fa fa-openid","fa fa-opera","fa fa-optin-monster","fa fa-pagelines","fa fa-pied-piper","fa fa-pied-piper-alt","fa fa-pinterest","fa fa-pinterest-p","fa fa-pinterest-square","fa fa-qq","fa fa-ra","fa fa-rebel","fa fa-reddit","fa fa-reddit-square","fa fa-renren","fa fa-safari","fa fa-sellsy","fa fa-shirtsinbulk","fa fa-simplybuilt","fa fa-skyatlas","fa fa-skype","fa fa-slack","fa fa-slideshare","fa fa-soundcloud","fa fa-spotify","fa fa-stack-exchange","fa fa-stack-overflow","fa fa-steam","fa fa-steam-square","fa fa-stumbleupon","fa fa-stumbleupon-circle","fa fa-tencent-weibo","fa fa-trello","fa fa-tripadvisor","fa fa-tumblr","fa fa-tumblr-square","fa fa-twitch","fa fa-twitter","fa fa-twitter-square","fa fa-viacoin","fa fa-vimeo","fa fa-vimeo-square","fa fa-vine","fa fa-vk","fa fa-wechat","fa fa-weibo","fa fa-weixin","fa fa-whatsapp","fa fa-wikipedia-w","fa fa-windows","fa fa-wordpress","fa fa-xing","fa fa-xing-square","fa fa-y-combinator","fa fa-y-combinator-square","fa fa-yahoo","fa fa-yc","fa fa-yc-square","fa fa-yelp","fa fa-youtube","fa fa-youtube-square","fa fa-h-square","fa fa-hospital-o","fa fa-medkit","fa fa-stethoscope","fa fa-user-md"];
}}var t={get:e};return t}angular.module("lapentor.app").factory("Icon",e)}(),function(){"use strict";function e(e,t,o,n){function i(){var i=e.defer();return t.get(n.read("apiUrl")+"/marketplace/items").then(function(e){var t=e.data;angular.forEach(t,function(e){var t="";switch(e.type){case"plugin":t=e.type+o.capitalizeFirstLetter(e.slug)+"ConfigCtrl";break;case"theme":t=e.theme_type+o.capitalizeFirstLetter(e.slug)+"ConfigCtrl"}switch(o.isControllerExist(t)?e.has_config=!0:e.has_config=!1,e.type){case"plugin":e.screenshot?e.screenshot=o.makeUrl(Config.PLUGIN_PATH,e.slug,e.screenshot):e.screenshot=o.makeUrl(Config.PLUGIN_PATH,e.slug,"screenshot.jpg");break;case"theme":e.screenshot?e.screenshot=o.makeUrl(Config.THEME_PATH,e.theme_type,e.slug,e.screenshot):e.screenshot=o.makeUrl(Config.THEME_PATH,e.theme_type,e.slug,"screenshot.jpg")}}),i.resolve(t)},function(e){i.reject(e)}),i.promise}function a(){var o=e.defer();return t.get(n.read("apiUrl")+"/marketplace/categories").then(function(e){var t=e.data;o.resolve(t)},function(e){o.reject(e)}),o.promise}function r(e,t){var n="asc",i=[];if(angular.isDefined(e)&&angular.forEach(e,function(e){if(angular.isDefined(e.buttons)){for(var t in e.buttons)e.buttons[t].plugin_slug=e.slug,e.buttons[t].icon_url&&e.buttons[t].icon_url.indexOf("/")==-1&&(e.buttons[t].icon_url=o.makeUrl(Config.PLUGIN_PATH,e.buttons[t].plugin_slug,"images",e.buttons[t].icon_url));i=i.concat(e.buttons)}}),i=i.sort(function(e,t){return"asc"==n?0==e.index?-1:e.index>t.index:e.index<t.index}),t)return i;var a=[];angular.forEach(i,function(e){"commonbuttons-fullscreen"==e.id&&isMobile.apple.device||a.push(e)}),i=a;var r=[];return angular.forEach(i,function(e,t){e.hide||r.push(e)}),r}var s={getItems:i,getCategories:a,getPluginButtons:r};return s}e.$inject=["$q","$http","LptHelper","envService"],angular.module("lapentor.app").factory("Marketplace",e)}(),function(){"use strict";function e(e,t,o,n,i,a){function r(o){var i=e.defer();return f?i.resolve(f):t.get(a.read("apiUrl")+"/files",{params:{project_id:o}}).then(function(e){angular.isDefined(e.data.errors)?(n.error(e.data.errors.message),console.log(e.data.errors),i.resolve([])):i.resolve(e.data)},function(e){console.log("ERR: Get all files",e),i.reject(e)}),i.promise}function s(o){var n=e.defer();return t.get(a.read("apiUrl")+"/file/"+o).then(function(e){n.resolve(e.data)},function(e){console.log("ERR: Get media",e),n.reject(e)}),n.promise}function c(e,t,o){return i.upload({url:a.read("apiUrl")+"/file/create",method:"post",data:{project_id:t,files:e,type:o}})}function l(e){return t.put(a.read("apiUrl")+"/file/"+e._id,e)}function p(e){return e=JSON.stringify(e),t["delete"](a.read("apiUrl")+"/files",{params:{ids:e}})}var f=null,u={all:r,get:s,upload:c,update:l,remove:p};return u}e.$inject=["$q","$http","$state","Alertify","Upload","envService"],angular.module("lapentor.app").factory("Media",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(o,n,a){var r=e.defer();return w?r.resolve(w):t.get(i.read("apiUrl")+"/projects",{params:{offset:o,limit:n,search:a}}).then(function(e){r.resolve(e.data)},function(e){console.log("ERR: Get all projects",e),r.reject(e)}),r.promise}function r(a){var r=e.defer();return t.get(i.read("apiUrl")+"/project/"+a).then(function(e){var t=e.data;t?r.resolve(t):(o.logout(),n.go("login"),r.reject())},function(e){console.log("ERR: Get project",e),r.reject(e)}),r.promise}function s(o){var n=e.defer();return t.get(i.read("apiUrl")+"/projects/exported/"+o).then(function(e){var e=e.data;1==e.status?n.resolve(e.exportedVersions):n.reject()},function(e){console.log("ERR: Get project",e),n.reject(e)}),n.promise}function c(o){var n=e.defer();return t["delete"](i.read("apiUrl")+"/projects/exported/"+o).then(function(e){var e=e.data;1==e.status?n.resolve(!0):n.reject()},function(e){console.log("ERR: Delete snapshot",e),n.reject(e)}),n.promise}function l(e){return t.post(i.read("apiUrl")+"/project/create",e)}function p(o){var n=e.defer();return t.post(i.read("apiUrl")+"/project/duplicate/"+o).then(function(e){1==e.data.status?n.resolve(e.data.duplicatedProject):n.reject()},function(e){console.log("ERR: Can not duplicate project"),console.log(e),n.reject(!1)}),n.promise}function f(o,n,a){var r=e.defer(),s=i.read("apiUrl")+"/export-project/"+o,c={token:n,email:a};return t.post(s,c).then(function(e){r.resolve(e.data)},function(e){console.log("ERR: Can not download project"),console.log(e),r.reject(!1)}),r.promise}function u(o){var n=e.defer();return t.put(i.read("apiUrl")+"/project/"+o._id,o).then(function(e){n.resolve(e.data.status)},function(e){console.log("ERR: Update project ",e),n.resolve(!1)}),n.promise}function h(o,n){var a=e.defer();return t.patch(i.read("apiUrl")+"/project/title/"+n,{title:o}).then(function(e){e.data.status?a.resolve(e.data.slug):a.reject(e)},function(e){console.log("ERR: Update project ",e),a.reject(e)}),a.promise}function g(o,n){var a=e.defer();return t.patch(i.read("apiUrl")+"/project/public-access/"+n,{"public":o}).then(function(e){e.data.status?a.resolve(e.data.status):a.reject(e)},function(e){console.log("ERR: Update project ",e),a.reject(e)}),a.promise}function d(o,n){var a=e.defer();return t.patch(i.read("apiUrl")+"/project/can-list-in-portfolio/"+n,{in_portfolio:o}).then(function(e){e.data.status?a.resolve(e.data.status):a.reject(e)},function(e){console.log("ERR: Update project ",e),a.reject(e)}),a.promise}function m(o,n){var a=e.defer();return t.patch(i.read("apiUrl")+"/project/password/"+n,{password:o}).then(function(e){e.data.status?a.resolve(e.data.status):a.reject(e)},function(e){console.log("ERR: Update project ",e),a.reject(e)}),a.promise}function _(e,o){var n=!1;return t.patch(i.read("apiUrl")+"/sphere/active-password/"+o,{password:e}).then(function(e){return e.data.status&&(n=!0),n},function(e){}),n}function v(o,n){var a=e.defer();return t.patch(i.read("apiUrl")+"/project/plugin/"+n,o).then(function(e){e.data.status?a.resolve(e.data):a.reject(e)},function(e){console.log("ERR: Update project ",e),a.reject(e)}),a.promise}function y(o,n,a){var r=e.defer();return t.patch(i.read("apiUrl")+"/project/theme/"+n,{theme_type:o,config:a}).then(function(e){e.data.status?r.resolve(e.data):r.reject(e)},function(e){console.log("ERR: Update project ",e),r.reject(e)}),r.promise}function b(e){return t["delete"](i.read("apiUrl")+"/project/"+e)}var w=null,k={all:a,get:r,create:l,duplicate:p,update:u,updateTitle:h,updatePublicAccess:g,updateCanListInPortfolio:d,updatePluginConfig:v,updateThemeConfig:y,updatePasswordProject:m,checkPasswordProject:_,remove:b,download:f,getExportedVersions:s,deleteSnapshot:c};return k}e.$inject=["$q","$http","$auth","$state","envService"],angular.module("lapentor.app").factory("Project",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(o){var n=e.defer();return u?n.resolve(u):t.get(i.read("apiUrl")+"/scenes",{params:{project_id:o}}).then(function(e){n.resolve(e.data)},function(e){console.log("ERR: Get all scenes",e),n.reject(e)}),n.promise}function r(e,o,n,a){return t({method:"POST",url:i.read("apiUrl")+"/scene/create",eventHandlers:{progress:function(t){var n=t.target.responseText;n=n.split("##").splice(-1)[0],n&&(n=n.split("%%"),100==n[0]?("lapentor"==o&&angular.element("#"+e[0]).html("Complete."),"dropbox"==o&&angular.element("#"+e[0].id).html("Complete.")):("lapentor"==o&&angular.element("#"+e[0]).html(n[1]),"dropbox"==o&&angular.element("#"+e[0].id).html(n[1])))}},onProgress:function(e){},data:{ids:e,type:o,project_id:n,pano_type:a}})}function s(o,n,a,r,s){var c=e.defer();return t({method:"PUT",url:i.read("apiUrl")+"/scene/replace/"+o,eventHandlers:{progress:function(e){var t=e.target.responseText;t=t.split("##").splice(-1)[0],t&&(t=t.split("%%"),100==t[0]?angular.element("#"+n).html("Complete."):angular.element("#"+n).html(t[1]),console.log(t))}},onProgress:function(e){},data:{id:n,type:a,project_id:r,pano_type:s}}).then(function(e){c.resolve(e.data.status)},function(e){console.log(e,"ERR: can not replace scene"),c.reject(!1)}),c.promise}function c(o){var a=e.defer();return n.isEmpty(o)&&a.reject(!1),t.put(i.read("apiUrl")+"/scene/"+o._id,o).then(function(e){a.resolve(e.data.status)},function(e){console.log(e,"ERR: can not update scene"),a.reject(!1)}),a.promise}function l(o,a){var r=e.defer();return n.isEmpty(o)&&r.reject(!1),t.put(i.read("apiUrl")+"/scenes/save-limit-view",{limit_view:o,project_id:a}).then(function(e){r.resolve(e.data.status)},function(e){console.log(e,"ERR: Can not update scene"),r.reject(!1)}),r.promise}function p(o){var n=e.defer();return t.get(i.read("apiUrl")+"/scene/"+o).then(function(e){n.resolve(e.data)},function(e){console.log("ERR: Get scene",e),n.reject(e)}),n.promise}function f(e){return t["delete"](i.read("apiUrl")+"/scene/"+e)}var u=null,h={all:a,get:p,create:r,replace:s,update:c,updateLimitViewForAllScene:l,remove:f};return h}e.$inject=["$q","$http","$state","LptHelper","envService"],angular.module("lapentor.app").decorator("$xhrFactory",["$delegate","$injector",function(e,t){return function(o,n){var i=e(o,n),a=t.get("$http"),r=a.pendingRequests[a.pendingRequests.length-1];return angular.isFunction(r.onProgress)&&i.addEventListener("progress",r.onProgress),i}}]).factory("Scene",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(o){var i=e.defer();return f?i.resolve(f):t.get(n.read("apiUrl")+"/groups",{params:{project_id:o}}).then(function(e){i.resolve(e.data)},function(e){console.log("ERR: Get all groups",e),i.reject(e)}),i.promise}function r(o,i){var a=e.defer();return t.post(n.read("apiUrl")+"/group/create",{title:o,project_id:i}).then(function(e){a.resolve(e.data)},function(e){console.log("ERR: Create group",e),a.reject(e)}),a.promise}function s(o){var i=e.defer();return t.put(n.read("apiUrl")+"/group/"+o._id,o).then(function(e){1==e.data.status?i.resolve(!0):i.reject(!1)},function(e){console.log("ERR: ",e),i.reject(!1)}),i.promise}function c(o){var i=e.defer();return t.put(n.read("apiUrl")+"/groups",{groups:o}).then(function(e){1==e.data.status?i.resolve(!0):i.reject(!1)},function(e){console.log(e),i.reject(!1)}),i.promise}function l(o){var i=e.defer();return t.get(n.read("apiUrl")+"/group/"+o).then(function(e){i.resolve(e.data)},function(e){console.log("ERR: Get group",e),i.reject(e)}),i.promise}function p(o){var a=e.defer();return t["delete"](n.read("apiUrl")+"/group/"+o).then(function(e){1==e.data.status?a.resolve(!0):(i.error("Can not delete group"),console.log(e),a.reject(!1))},function(e){i.error("Can not delete group"),console.log(e),a.reject(!1)}),a.promise}var f=null,u={all:a,get:l,create:r,update:s,updateAll:c,remove:p};return u}e.$inject=["$q","$http","$state","envService","Alertify"],angular.module("lapentor.app").factory("SceneGroup",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(){var o=e.defer();return t.get("http://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=en-US").then(function(e){if(e.images){var t="http://bing.com"+e.images[0].url;o.resolve(t)}else o.reject()},function(e){o.reject()}),o.promise}function r(o){var a=e.defer();return t.get(i.read("apiUrl")+"/u/"+o).then(function(e){var t=e.data;t?a.resolve(t):a.reject()},function(e){404==e.status&&n.go("404"),a.reject(e)}),a.promise}var s={get:r,getRandomCover:a};return s}e.$inject=["$q","$http","$auth","$state","envService"],angular.module("lapentor.app").factory("Showcase",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(o){var i=e.defer();return t.put(n.read("apiUrl")+"/user/update-card",{stripeToken:o}).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}function r(){var o=e.defer();return t.put(n.read("apiUrl")+"/user/cancel-subscription",{}).then(function(e){o.resolve(e.data)},function(e){o.reject(e)}),o.promise}function s(){var o=e.defer();return t.put(n.read("apiUrl")+"/user/resume-subscription",{}).then(function(e){o.resolve(e.data)},function(e){o.reject(e)}),o.promise}function c(){var o=e.defer();return t.get(n.read("apiUrl")+"/user/me").then(function(e){o.resolve(e.data)},function(e){o.reject(e)}),o.promise}function l(o){var a=e.defer();return t.put(n.read("apiUrl")+"/user/me",o).then(function(e){a.resolve(e.data.status)},function(e){400==e.status&&angular.forEach(e.data.errors.message,function(e,t){angular.forEach(e,function(e){i.error(e)})}),a.reject(!1)}),a.promise}var p={get:c,update:l,updateCard:a,cancelSubscription:r,resumeSubscription:s};return p}e.$inject=["$q","$http","$state","envService","Alertify"],angular.module("lapentor.app").factory("User",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("controlbar",["$compile","$rootScope","LptHelper",function(e,t,o){return{restrict:"E",scope:{scene:"=",project:"=",lptsphereinstance:"="},link:function(o,n,i){function a(t){var i="<controlbar-"+t+"></controlbar-"+t+">";n.empty(),n.append(e(i)(o))}function r(e,t){angular.forEach(t,function(t,o){e[o]=angular.isUndefined(e[o])?t:e[o]})}o.onbtnclick=function(e){t.$emit("evt.controlbar."+e.plugin_slug+e.id,"click")},o.initDefaultConfig=r,angular.isUndefined(o.project.theme_controlbar)||(angular.isUndefined(o.project.theme_controlbar.config)&&(o.project.theme_controlbar.config={}),a(o.project.theme_controlbar.slug))}}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspot",["$compile","$sce","$timeout","$window","$uibModal","$rootScope","LptHelper","ngAudio","Alertify",function(e,t,o,n,i,a,r,s,c){return{restrict:"E",scope:{scene:"=",hotspot:"=",project:"=",lptsphereinstance:"="},link:function(s,c,l){function p(){"sound"==s.hotspot.type&&(isMobile.any&&confirm("Allow audio to play on this device")&&(localStorage.setItem("sound.allow","yes"),"off"!=localStorage.getItem("sound")&&_.play()),a.$on("evt.krpano.onviewchange",function(){try{var e=s.hotspot.volume/100;null!=_&&(_.volume=f(s.hotspot.position.x,s.hotspot.position.y,s.hotspot.reach)*e)}catch(t){}}),"off"==localStorage.getItem("sound")&&_.pause())}function f(e,t,o){var i,a,r,c=s.lptsphereinstance.screentosphere(n.innerWidth/2,n.innerHeight/2),l=c.x,p=c.y,f=e-o,u=e+o,h=t-o,g=t+o;return l-f>360&&(l-=360),u-l>360&&(l+=360),f<l&&l<u&&h<p&&p<g?(l<e&&(i=e-l),l>e&&(i=l-e),p<t&&(a=t-p),p>t&&(a=p-t),r=i>a?(o-i)/o:(o-a)/o,r=r.toFixed(2)):r=0,r}function u(e){angular.isDefined(s.lptsphereinstance)?s.lptsphereinstance.loadScene(e):console.log("lptsphereinstance is undefined")}function h(t){var o="hotspot-"+t,n="<"+o+' id="'+v.name+'" class="hotspot-move-trigger" px="'+v.position.x+'" py="'+v.position.y+'" size="'+v.width+'"></'+o+">",i=["bubble","royal","gify","crystal"];i.indexOf(t)!=-1?(angular.element("#sprite-"+v.name).empty(),angular.element("#sprite-"+v.name).append(e(n)(s))):(c.empty(),c.append(e(n)(s)))}function g(e,t,o){if(angular.isUndefined(n))var n=r.makeUrl(s.themePath,"images",e.type+".png");try{var i=s.project.theme_hotspot.config;if(i[s.hotspot.type+"_icon_custom"]){n=i[s.hotspot.type+"_icon_custom"];var a=(new Date).getTime();n+="?"+a}}catch(c){}if(angular.isDefined(e.icon_custom)&&null!=e.icon_custom&&""!=e.icon_custom){n=e.icon_custom;var a=(new Date).getTime();n+="?"+a}"sound"==e.type&&(n=null),angular.isUndefined(t)&&(t=!0);var l={title:e.title,name:e.name,lpttype:e.type,ishtml:!!angular.isDefined(o)&&o,url:n,alturl:n,ath:e.position.x,atv:e.position.y,width:e.width,height:e.width,visible:t};s.lptsphereinstance.addHotspot(l)}function d(e){switch(v.type){case"url":m()}}function m(){if(angular.isDefined(v.url)){var e=/^((http|https):\/\/)/;if(e.test(v.url)||(v.url="http://"+v.url),v.iframe)return void i.open({template:'<div class="hotspot-modal hotspot-url-iframe-popup"><iframe src="'+v.url+'" style="width:100%;height: 100% "></iframe><span class="close close-black" ng-click="cancel()"><i class="ilpt-close"></i></span></div>',size:"lg",scope:s,controller:["$scope","$uibModalInstance",function(e,t){e.cancel=function(){t.dismiss("cancel")}}]});window.open(v.url,"_blank")}}var _=null,v=s.hotspot;s.loadScene=u,s.addHotspotToViewer=g,s.config=s.project.theme_hotspot.config,s.onHotspotClick=d,angular.isUndefined(s.project.theme_hotspot.slug)&&(s.project.theme_hotspot.slug="default"),angular.isUndefined(s.project.theme_hotspot.config)&&(s.project.theme_hotspot.config={}),s.hotspot.name="lptHotspot"+s.hotspot._id,s.themePath=r.makeUrl(Config.THEME_PATH,"hotspot",s.project.theme_hotspot.slug),c.empty(),a.$on("evt.krpano.hp"+v.name,function(){s.lptsphereinstance.set("hotspot",{name:v.name,"sprite.id":"sprite-"+v.name}),h(s.project.theme_hotspot.slug)}),o(function(){if(h(s.project.theme_hotspot.slug),"sound"==v.type){var o=1==v.is_loop?"loop":"",n='<audio id="sound-'+v._id+'" autoplay '+o+'><source src="'+v.src+'" type="audio/mpeg"></audio>';c.empty(),c.append(e(n)(s)),_=document.getElementById("sound-"+v._id),p()}switch(v.type){case"point":s.lptsphereinstance.addHotspotEventCallback(v.name,"onclick",function(){if(v.target_scene_id){var e=r.getObjectBy("_id",v.target_scene_id,s.project.scenes);v.target_view&&(e.target_view=v.target_view),a.$emit("evt.livesphere.changescene",e)}});break;case"url":s.lptsphereinstance.addHotspotEventCallback(v.name,"onclick",function(){m()});case"article":s.hotspot.content=t.trustAsHtml(s.hotspot.content);break;case"textf":s.hotspot.content=t.trustAsHtml(s.hotspot.content)}},100)}}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("sceneList",["$compile","$timeout","LptHelper",function(e,t,o){return{restrict:"E",scope:{scene:"=",project:"=",lptsphereinstance:"="},link:function(t,o,n){function i(){try{var e=t.project.theme_scenelist.config?t.project.theme_scenelist.config:{}}catch(o){var e={}}return e}function a(n){var i="<scenelist-"+n+"></scenelist-"+n+">";o.empty(),o.append(e(i)(t))}function r(e,t){angular.forEach(e,function(e,o){t[o]=angular.isUndefined(t[o])?e:t[o]})}t.ScenelistHelper={initDefaultConfig:r,getConfig:i,allGroupIsEmpty:!0},angular.forEach(t.project.groups,function(e){if(e.scenes.length)return void(t.ScenelistHelper.allGroupIsEmpty=!1)}),angular.isUndefined(t.project.theme_scenelist)||(angular.isUndefined(t.project.theme_scenelist.config)&&(t.project.theme_scenelist.config={}),a(t.project.theme_scenelist.slug))}}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginArrows",function(){return{restrict:"E",controllerAs:"vm",template:"<style>.hotspot-{{project.theme_hotspot.slug}}-point{display: none!important;}</style>",controller:["$scope","$ocLazyLoad","$timeout","$rootScope","LptHelper",function(e,t,o,n,i){function a(){for(var t=0,n=0;n<c.get("hotspot.count");n++)c.get("hotspot["+n+"].lpttype")&&c.get("hotspot["+n+"].sceneId")==c.get("krpano.sceneId")&&"clone"!=c.get("hotspot["+n+"].hptype")&&("point"==c.get("hotspot["+n+"].lpttype")?null!=c.get("hotspot["+n+"].onclick")&&t++:t++);t==e.scene.hotspots.length?(c.call("removechevrons()"),c.call("addchevrons()")):s<50&&(s++,o(function(){a()},100))}var r=e.pluginVm,s=0,c=r.lptsphereinstance.krpano();e.$on("evt.krpano.onxmlcomplete",function(){c.set("krpano.arrows",!0);var t=c.get("webvr.isenabled");try{t||0!=c.get("view.fisheye")||a()}catch(o){console.log(o),a()}angular.element(".hotspot-"+e.project.theme_hotspot.slug+"-point").css("display","none")})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginAutotransitionConfigCtrl",["$scope","LptHelper","project","item",function(e,t,o,n){var i=this;i.project=o;var a=n;i.config=a.config,i.updateConfig=function(){i.isUpdating=!0,e.updateConfig(n,i.config,function(){i.isUpdating=!1})}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginAutotransition",function(){return{restrict:"E",controller:["$scope","$rootScope","$timeout",function(e,t,o){function n(){o.cancel(c);var t=0;angular.forEach(s,function(o,n){e.scene._id==o._id&&(t=n)});var n=s[t+1];n||(n=s[0]),r.set("krpano.autorotate",!0),a.config.enabled?(0!=r.get("view.fisheye")||r.get("webvr.isenabled")?r.set("autorotate.enabled",!1):r.set("autorotate.enabled",!0),r.set("autorotate.waittime",a.config.waittime?a.config.waittime:2),r.set("autorotate.speed",a.config.speed?a.config.speed:1)):r.set("krpano.autorotate",!1),a.config.changeEnabled&&s&&s.length>1&&(angular.element("html,body").on("mousedown mousewheel",function(){o.cancel(c),i(n)}),i(n))}function i(e){c=o(function(){r.get("webvr.isenabled")?i(e):t.$emit("evt.livesphere.changescene",e)},a.config.changeWaittime?parseInt(a.config.changeWaittime+"000"):1e4)}var a=e.pluginVm,r=a.lptsphereinstance.krpano(),s=[];e.project.groups&&e.project.groups.length>0?angular.forEach(e.project.groups,function(t,o){t.scenes.length>0&&angular.forEach(t.scenes,function(t,o){angular.forEach(e.project.scenes,function(e,o){t._id==e._id&&s.push(e)})})}):s=e.project.scenes;var c;e.$on("evt.krpano.onxmlcomplete",n)}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(){l.isUpdating=!0,l.config.version=1,e.updateConfig(i,l.config,function(){l.isUpdating=!1})}function r(){o.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:s,canChooseMultipleFile:!0})}function s(e){var t=[];l.config.audios&&angular.forEach(l.config.audios,function(e,o){t.push(e._id)}),angular.forEach(e,function(e,o){var n=e;n.mime_type.indexOf("audio")!=-1&&t.indexOf(n._id)<0&&(n.volume=80,n.is_loop="1",l.config.audios[n._id]=n)})}function c(e){return t.trustAsResourceUrl(e)}var l=this;l.project=n,l.scenes=n.scenes,l.updateConfig=a,l.openMediaLib=r,l.trustAsResourceUrl=c,l.config=i.config?i.config:{},l.config.audios=angular.isDefined(l.config.audios)?l.config.audios:{},l.toggleAll=function(){var e=l.select_all;angular.forEach(l.config.audios[l.targetAudio].scenes,function(t,o){l.config.audios[l.targetAudio].scenes[o]=e})},l.selectScene=function(){l.select_all=!0,angular.forEach(l.config.audios[l.targetAudio].scenes,function(e,t){e||(l.select_all=!1)})},l.showOptionAudio=function(e){l.targetAudio=e,l.config.audios[l.targetAudio].scenes=l.config.audios[l.targetAudio].scenes||{},angular.forEach(l.scenes,function(e,t){angular.isUndefined(l.config.audios[l.targetAudio].scenes[e._id])&&(l.config.audios[l.targetAudio].scenes[e._id]=!1)}),l.selectScene()},l.deleteAudio=function(e){delete l.config.audios[e]}}e.$inject=["$scope","$sce","$rootScope","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginBackgroundsoundConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginDetailGooglemap",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"googlemap/tpl/detail.html",controller:["$scope",function(e){e.vm}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginBackgroundsound",function(){return{restrict:"E",controllerAs:"vm",template:'<audio ng-if="!vm.pluginInterface.config.version" id="background-sound" autoplay><source id="background-source" src="{{ getAudioUrl() }}" type="audio/mpeg"></audio><audio ng-if="vm.pluginInterface.config.version" ng-repeat="audio in vm.pluginInterface.config.audios" id="background-sound-{{ audio._id }}"><source id="background-source-{{ audio._id }}"  type="audio/mpeg"></audio>',controller:["$scope","$sce","$rootScope","ngAudio","LptHelper","Alertify","$timeout",function(e,t,o,n,i,a,r){function s(){if(c.sceneId=e.scene._id,angular.isUndefined(c.pluginInterface.config.audios)||1!=c.pluginInterface.config.version)try{c.pluginInterface.config.scenes[e.scene._id]&&1==c.pluginInterface.config.scenes[e.scene._id]?document.getElementById("background-sound").volume=c.pluginInterface.config.volume/100:document.getElementById("background-sound").volume=0}catch(t){console.log(t)}else angular.forEach(c.pluginInterface.config.audios,function(e,t){var o=document.getElementById("background-sound-"+e._id),n=document.getElementById("background-source-"+e._id);if(angular.isUndefined(e.scenes)||angular.isUndefined(e.scenes[c.sceneId])||!e.scenes[c.sceneId])e.run&&(o.volume=0);else{if(angular.isUndefined(e.run)){n.src=e.path,o.load(),o.play(),"1"==e.is_loop?o.loop=!0:o.loop=!1,e.run=!0;try{isMobile.any&&(confirm("Do you want to allow audio play on this device?")?"off"!=localStorage.getItem("sound")&&(o.load(),o.play(),o.volume=e.volume/100):delete e.run)}catch(i){console.log(i)}}e.run&&(o.volume=e.volume/100)}})}var c=this;if(c.pluginInterface=e.pluginVm,!c.pluginInterface.config.version){try{r(function(){document.getElementById("background-sound").onplay=function(){1==c.pluginInterface.config.is_loop&&(document.getElementById("background-sound").loop=!0)}})}catch(l){console.log(l)}try{isMobile.any&&confirm("Do you want to allow audio play on this device?")&&"off"!=localStorage.getItem("sound")&&document.getElementById("background-sound")&&document.getElementById("background-sound").play()}catch(l){console.log(l)}}e.$on("evt.krpano.onxmlcomplete",s),e.getAudioUrl=function(){return t.trustAsResourceUrl(c.pluginInterface.config.src)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginChangesceneeffectConfigCtrl",["$scope","LptHelper","project","item",function(e,t,o,n){var i=this;i.project=o;var a=n;i.config=a.config,i.blend={"Simple crossblending":"simple-crossblending","Zoom blend":"zoom-blend","Black-out":"black-out","White-flash":"white-flash","Right-to-left":"right-to-left","Top-to-bottom":"top-to-bottom",Diagonal:"diagonal","Circle open":"circle-open","Vertical open":"vertica-open","Horizontal open":"horizontal-open","Elliptic + zoom":"elliptic-zoom"},i.updateConfig=function(){i.isUpdating=!0,e.updateConfig(n,i.config,function(){i.isUpdating=!1})}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginChangesceneeffect",function(){return{restrict:"E",controller:["$scope","$rootScope",function(e,t){var o=e.pluginVm;try{o.config.effect_type&&("simple-crossblending"==o.config.effect_type?t.changeSceneEffect="BLEND("+(o.config.time||"1.0")+", easeInCubic)":"zoom-blend"==o.config.effect_type?t.changeSceneEffect="ZOOMBLEND("+(o.config.time||"2.0")+", 2.0, easeInOutSine)":"black-out"==o.config.effect_type?t.changeSceneEffect="COLORBLEND("+(o.config.time||"2.0")+", 0x000000, easeOutSine)":"white-flash"==o.config.effect_type?t.changeSceneEffect="LIGHTBLEND("+(o.config.time||"1.0")+", 0xFFFFFF, 2.0, linear)":"right-to-left"==o.config.effect_type?t.changeSceneEffect="SLIDEBLEND("+(o.config.time||"1.0")+", 0.0, 0.2, linear)":"top-to-bottom"==o.config.effect_type?t.changeSceneEffect="SLIDEBLEND("+(o.config.time||"1.0")+", 90.0, 0.01, linear)":"diagonal"==o.config.effect_type?t.changeSceneEffect="SLIDEBLEND("+(o.config.time||"1.0")+", 135.0, 0.4, linear)":"circle-open"==o.config.effect_type?t.changeSceneEffect="OPENBLEND("+(o.config.time||"1.0")+", 0.0, 0.2, 0.0, linear)":"vertica-open"==o.config.effect_type?t.changeSceneEffect="OPENBLEND("+(o.config.time||"0.7")+", 1.0, 0.1, 0.0, linear)":"horizontal-open"==o.config.effect_type?t.changeSceneEffect="OPENBLEND("+(o.config.time||"1.0")+", -1.0, 0.3, 0.0, linear)":"elliptic-zoom"==o.config.effect_type?t.changeSceneEffect="OPENBLEND("+(o.config.time||"1.0")+", -0.5, 0.3, 0.8, linear)":t.changeSceneEffect=o.config.effect_type)}catch(n){console.log(n)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginCommonbuttons",function(){return{restrict:"E",controllerAs:"vm",controller:["$scope","$rootScope",function(e,t){var o=e.pluginVm,n="evt.controlbar."+o.plugin.slug+"commonbuttons-";t.$on(n+"zoomin",function(e,t){"click"==t&&o.lptsphereinstance.zoomIn()}),t.$on(n+"zoomout",function(e,t){"click"==t&&o.lptsphereinstance.zoomOut()}),t.$on(n+"fullscreen",function(e,t){"click"==t&&o.lptsphereinstance.toggleFullScreen()}),t.$on(n+"up",function(e,t){if("click"==t){var n=o.lptsphereinstance.krpano().get("view.vlookat")-10;o.lptsphereinstance.tween("view.vlookat",n)}}),t.$on(n+"down",function(e,t){if("click"==t){var n=o.lptsphereinstance.krpano().get("view.vlookat")+10;o.lptsphereinstance.tween("view.vlookat",n)}}),t.$on(n+"left",function(e,t){if("click"==t){var n=o.lptsphereinstance.krpano().get("view.hlookat")-10;o.lptsphereinstance.tween("view.hlookat",n)}}),t.$on(n+"right",function(e,t){if("click"==t){var n=o.lptsphereinstance.krpano().get("view.hlookat")+10;o.lptsphereinstance.tween("view.hlookat",n)}});var i=!0;t.$on(n+"sound",function(e,o){if("click"==o){var n=angular.element("audio");i?(angular.forEach(n,function(e){e.pause()}),i=!1,localStorage.setItem("sound","off"),t.$emit("evt.commonbuttons.togglesound","off")):(i=!0,angular.forEach(n,function(e){e.play()}),localStorage.setItem("sound","on"),t.$emit("evt.commonbuttons.togglesound","on"))}})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginCopyrightConfigCtrl",["$scope","$rootScope","$ocLazyLoad","$http","LptHelper","project","item",function(e,t,o,n,i,a,r){function s(){angular.isDefined(l.config.fontfamily)&&""==l.config.fontfamily||o.load("css!https://fonts.googleapis.com/css?family="+l.config.fontfamily)}function c(){l.isUpdating=!0,e.updateConfig(r,l.config,function(){l.isUpdating=!1})}var l=this;l.project=a;i.getObjectBy("slug","patch",l.project.plugins);l.textSummernoteOptions={height:200,focus:!0,dialogsInBody:!0,toolbar:[["style",["bold","italic","underline","link","picture"]]]},l.googlefonts=[],l.positionOptions=[{value:"top-left",title:"Top left"},{value:"top-right",title:"Top right"},{value:"bottom-left",title:"Bottom left"},{value:"bottom-right",title:"Bottom right"}],l.config=r.config||{},l.config.position=l.config.position||"bottom-right",l.config.offest_top=l.config.offest_top||20,l.config.offest_left=l.config.offest_left||0,l.config.offest_right=l.config.offest_right||0,l.config.offest_bottom=l.config.offest_bottom||20,l.config.color=l.config.color||"#ffffff",l.config.text=l.config.text||"text here",l.updateConfig=c,l.fontFamilyChange=s,l.config.fontfamily&&o.load("css!https://fonts.googleapis.com/css?family="+l.config.fontfamily),n.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDY31rAJVkfb6GoONiVs03LB87ThdbHZj0").then(function(e){e.data&&(l.googlefonts=e.data.items)},function(e){console.log(e)})}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginCopyright",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/copyright/tpl/copyright.html",controllerAs:"vm",controller:["$scope","$ocLazyLoad","$timeout","$rootScope","LptHelper",function(e,t,o,n,i){var a=this;switch(a.pluginInterface=e.pluginVm,a.config=a.pluginInterface.config,a.config.position=a.config.position||"bottom-right",a.config.url&&a.config.url.indexOf("http")==-1&&(a.config.url="http://"+a.config.url),a.config.fontfamily&&t.load("css!https://fonts.googleapis.com/css?family="+a.config.fontfamily),a.style={"font-family":a.config.fontfamily||"sans-serif","font-size":a.config.fontsize||14,color:a.config.color||"white"},a.config.position){case"top-left":a.style.top=a.config.offset_top||20,a.style.left=a.config.offset_left||0;break;case"top-right":a.style.top=a.config.offset_top||20,a.style.right=a.config.offset_right||0;break;case"bottom-left":a.style.bottom=a.config.offset_bottom||20,a.style.left=a.config.offset_left||0;break;case"bottom-right":a.style.bottom=a.config.offset_bottom||20,a.style.right=a.config.offset_right||0;break;case"bottom-center":a.style.bottom=a.config.offset_bottom||20;break;default:a.style.top=a.config.offset_top||20}e.$on("evt.krpano.onxmlcomplete",function(){a.currentSceneTitle=e.scene.title})}]}})}(),function(){"use strict";function e(e,t,o){function n(){i.isUpdating=!0;var t={custom_html:i.config.custom_html,custom_css:i.config.custom_css};e.updateConfig(o,t,function(){i.isUpdating=!1})}var i=this;i.project=t,i.config=o.config||{},i.updateConfig=n}e.$inject=["$scope","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginCustomcodeConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginCustomcode",function(){
return{restrict:"E",templateUrl:"modules/lapentor.marketplace/plugins/customcode/tpl/template.html",controllerAs:"vm",controller:["$scope","$sce",function(e,t){var o=this;o.pluginInterface=e.pluginVm||{},o.config=o.pluginInterface.config,o.project=e.project;try{o.config.custom_html=t.trustAsHtml(o.config.custom_html)}catch(n){console.log(n)}}]}})}(),function(){"use strict";function e(e,t,o,n,i,a,r){function s(e){e.mime_type.indexOf("image")!=-1&&(u.config.icon=e.path)}function c(e){var t=[];u.config.floorplans&&angular.forEach(u.config.floorplans,function(e,o){t.push(e._id)}),angular.forEach(e,function(e,o){var n=e;n.placemarkers=[],n.mime_type.indexOf("image")!=-1&&t.indexOf(n._id)<0&&u.config.floorplans.push(n)})}function l(e){return u.config.floorplans.filter(function(t){return t._id==e})[0]}function p(){u.isUpdating=!0,e.updateConfig(r,u.config,function(){u.isUpdating=!1})}function f(e,t,o,n,i,a){var r=this,s=!1,c=new a("embedKrpano");if(r.project=u.project,r.placemarker=u.placemarker,r.placemarker.targetScene&&(r.targetScene=r.placemarker.targetScene,r.selectedScene=i.getObjectBy("_id",r.targetScene,r.project.scenes),r.selectedScene._id)){var l={"view.fov":90,"view.hlookat":r.placemarker.heading};o.opened.then(t(function(){r.shouldShowPreview=!0,c.init("krpanoTour",r.selectedScene.xml,l)})),s=!0}r.select=function(){r.selectedScene=i.getObjectBy("_id",r.targetScene,r.project.scenes);var e={"view.fov":90};0==s?(s=!0,r.shouldShowPreview=!0,c.init("krpanoTour",r.selectedScene.xml,e)):c.loadScene(r.selectedScene.xml)},r.getHeading=function(){0!=s&&(r.heading=c.screentosphere(angular.element("#krpanoTour").width()/2,angular.element("#krpanoTour").height()/2).x,u.placemarker.targetScene=r.targetScene,u.placemarker.heading=r.heading)},r.dismiss=function(){r.getHeading(),u.updateConfig(),o.dismiss()},r.cancel=function(){o.dismiss()}}f.$inject=["$scope","$timeout","$uibModalInstance","Alertify","LptHelper","lptSphere"];var u=this;u.project=a,u.updateConfig=p,u.config=r.config,angular.isUndefined(u.config)&&(u.config={position:"bottom-left"}),u.config.bg_color=u.config.bg_color||"#1b1b1b",angular.isUndefined(u.config.floorplans)&&(u.config.floorplans=[]),u.config.icon=u.config.icon?u.config.icon:Config.PLUGIN_PATH+"floorplan/images/radar.png",angular.isUndefined(u.config.radars)&&(u.config.radars={active:!1,radius:50,left:12.5,top:12.5,border:"none",background:"rgba(241, 118, 118, 0.49)"}),u.config.placemarkWidthHeight=u.config.placemarkWidthHeight||25,u.openLiveView=function(){t.$emit("evt.editor.openLiveView")},u.openMediaLib=function(e){"icon"==e&&t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:s,canChooseMultipleFile:!1}),"floorplan"==e&&t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:c,canChooseMultipleFile:!0})},u.showFloorplan=function(e){u.formMap=!0;var t=l(e);u.mapId=e,u.mapName=t.name,u.map=t.path,u.mapWidth=t.resizeWidth?t.resizeWidth:t.width,u.mapHeight=t.resizeHeight?t.resizeHeight:t.height,t.resizeWidth||(t.width>400&&t.width>t.height?(u.mapWidth=400,u.mapHeight=parseInt(400/t.width*t.height),t.resizeWidth=u.mapWidth,t.resizeHeight=u.mapHeight):t.height>400&&t.height>t.width?(u.mapWidth=parseInt(400/t.height*t.width),u.mapHeight=400,t.resizeWidth=u.mapWidth,t.resizeHeight=u.mapHeight):t.width>400&&t.width==t.height&&(u.mapWidth=400,u.mapHeight=400,t.resizeWidth=400,t.resizeHeight=400)),u.placemarkers=t.placemarkers?t.placemarkers:[]},u.floorplanUpdate=function(e){var t=l(e);t.name=u.mapName,u.mapHeight=parseInt(u.mapWidth/t.width*t.height),t.resizeWidth=u.mapWidth,t.resizeHeight=u.mapHeight},u.newPlacemarker=function(e,t){if(u.mapId){var o=l(u.mapId);angular.isUndefined(o.placemarkers)&&(o.placemarkers=[]),u.placemarkers.push({type:"placemarker",top:u.positionTop,left:u.positionLeft-12.5,targetScene:null,heading:0})}},u.markerUpdateWidthHeight=function(){u.config.radars.top>u.config.placemarkWidthHeight&&(u.config.radars.top=u.config.placemarkWidthHeight),u.config.radars.left>u.config.placemarkWidthHeight&&(u.config.radars.left=u.config.placemarkWidthHeight)},u.updatePlacemarker=function(e,t,o){u.placemarkers[o].top=u.positionTop,u.placemarkers[o].left=u.positionLeft},u.drag=function(e,t){u.positionTop=t.position.top,u.positionLeft=t.position.left},u.menuOptionsPlacemarker=[["Choose represent scene",function(t){u.placemarker=t.placemarker,o.open({templateUrl:"modules/lapentor.marketplace/plugins/floorplan/tpl/marker-config.html",controller:f,controllerAs:"vmPm",size:"sm",scope:e})}],["Delete marker",function(e){u.placemarkers.splice(e.$index,1)}]],u.menuOptionsFloorplan=[["Delete floor plan",function(e){u.config.floorplans.splice(e.$index,1),u.mapId&&u.mapId==e.floorplan._id&&(u.formMap=!1)}]]}e.$inject=["$scope","$rootScope","$uibModal","Alertify","LptHelper","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginFloorplanConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginFloorplan",function(){return{restrict:"E",controllerAs:"vm",templateUrl:"modules/lapentor.marketplace/plugins/floorplan/tpl/floorplan.html",controller:["$scope","$timeout","$rootScope","LptHelper",function(e,t,o,n){function i(e){return c.config.floorplans.filter(function(t){return t._id==e})[0]}function a(){if(r(),e.placemarkers&&c.config.radars.active){var t=l.screentosphere(0,$("#"+p).height()/2),o=t.x+180;t=l.screentosphere($("#"+p).width(),$("#"+p).height()/2);var n=t.x+180;e.placemarkers.filter(function(t){t.targetScene&&t.targetScene==e.scene._id&&s(o,n,t.heading,t.inTop,t.inLeft,c.config.radars.radius,c.config.radars.top,c.config.radars.left,c.config.radars.background,c.config.radars.border)})}}function r(){var e=document.getElementById("canvas-map"),t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)}function s(t,o,n,i,a,r,s,c,l,p){var f=document.getElementById("canvas-map"),u=f.getContext("2d");u.save(),u.clearRect(0,0,f.width,f.height),u.translate(a+c*e.resizeIcon,i+s*e.resizeIcon),u.beginPath();var h=t+(270-(n+180)),g=o+(270-(n+180)),d=h/180*Math.PI,m=g/180*Math.PI;u.arc(0,0,r,d,m),u.lineTo(0,0),u.closePath(),u.strokeStyle=l,u.fillStyle=l,u.fill(),u.stroke(),u.restore()}var c=e.pluginVm,l=c.lptsphereinstance.krpano(),p=c.lptsphereinstance.getPanoId();angular.isUndefined(c.config)&&(c.config={}),e.floorplans=c.config.floorplans?c.config.floorplans:[],e.icon=c.config.icon?c.config.icon:"",e.placemarkWidthHeight=c.config.placemarkWidthHeight?c.config.placemarkWidthHeight:25,e.listShow=!1;var f="center";c.config.on_start&&(e.listShow=JSON.parse(c.config.on_start)),c.initDefaultConfig(c.config,{position:"center"}),e.config=c.config,o.$on("evt.krpano.onviewchange",function(){e.viewMap&&1==e.viewMap&&a()}),o.$on("evt.krpano.onxmlcomplete",function(){e.listShow&&e.floorplans.length&&e.showMap(e.floorplans[0]._id)}),angular.element(window).on("resize load",function(){e.mapId&&e.showMap(e.mapId)});var u=1,h=.1;$("html,body").delegate("#canvas-map","mousewheel",function(e){"bottom-left"==c.config.position?f="bottom left":"bottom-right"==c.config.position&&(f="bottom right");parseInt($(this).attr("width")),parseFloat($(this).attr("height"));e.originalEvent.wheelDelta/120>0?u<2.5&&(u+=h):u>1&&(u-=h),$("#map-floorplan").css({transform:"scale("+u+")","-webkit-transform":"scale("+u+")","-moz-transform":"scale("+u+")","transform-origin":f})}),e.showMap=function(o){e.currentFloorplanId=o;var r=i(o);e.viewMap=!0,e.mapId=o,e.mapName=r.name,e.map=r.path,e.ctnWidth=r.resizeWidth||r.width,e.ctnHeight=r.resizeHeight||r.height,e.ctnWidth>window.innerWidth&&(e.ctnWidth=window.innerWidth,e.ctnHeight=parseInt(window.innerWidth/r.width*r.height)),e.ctnHeight>window.innerHeight&&(e.ctnWidth=parseInt(window.innerHeight/r.height*r.width),e.ctnHeight=window.innerHeight),t(function(){var t=document.getElementById("canvas-map").offsetWidth,o=document.getElementById("canvas-map").offsetHeight;t>o?(e.mapWidth=t,e.mapHeight=parseInt(t/r.width*r.height)):t<o&&(e.mapWidth=parseInt(o/r.height*r.width),e.mapHeight=o),e.resizeIcon=1,r.resizeWidth&&(e.resizeIcon=document.getElementById("canvas-map").offsetWidth/r.resizeWidth)}),e.placemarkers=r.placemarkers?r.placemarkers:[],angular.forEach(e.placemarkers,function(o,i){var a=o;if(a.active=!1,a.targetScene){var s=n.getObjectBy("_id",a.targetScene,e.project.scenes);s._id&&(a.active=!0,a.title=s.title,a.inLeft=a.left,a.inTop=a.top,r.resizeWidth&&r.resizeHeight&&t(function(){a.inLeft=a.left/r.resizeWidth*document.getElementById("canvas-map").offsetWidth,a.inTop=a.top/r.resizeHeight*document.getElementById("canvas-map").offsetHeight}))}}),t(function(){a()})},e.close=function(){e.viewMap=!1},e.initScene=function(t){var i=n.getObjectBy("_id",t,e.project.scenes);o.$emit("evt.livesphere.changescene",i)};var g="evt.controlbar."+c.plugin.slug+"floorplan-";o.$on(g+"toggle",function(t,o){"click"==o&&(e.listShow=!e.listShow,e.floorplans.length&&e.showMap(e.floorplans[0]._id))})}]}})}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){d=!1,angular.element("#gallery").children(".photo").each(function(e){var t=$(this).attr("photo-id");"scene"==g.config.type&&(g.config.gallery[g.targetScene][t].sort=e),"project"==g.config.type&&(g.config.gallery.project[t].sort=e)}),d=!0}function l(){return"scene"==g.config.type?$.map(g.config.gallery[g.targetScene],function(e,t){return[e]}):"project"==g.config.type?$.map(g.config.gallery.project,function(e,t){return[e]}):void 0}function p(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:f,canChooseMultipleFile:!0})}function f(e){var t=[];g.config.gallery[g.targetScene]&&angular.forEach(g.config.gallery[g.targetScene],function(e,o){t.push(e._id)}),angular.forEach(e,function(e,o){var n=e;n.mime_type.indexOf("image")!=-1&&t.indexOf(n._id)<0&&("project"==g.config.type&&(g.config.gallery.project||(g.config.gallery.project={}),g.config.gallery.project[n._id]=n),"scene"==g.config.type&&(g.config.gallery[g.targetScene]||(g.config.gallery[g.targetScene]={}),g.config.gallery[g.targetScene][n._id]=n))})}function u(e){"project"==g.config.type&&delete g.config.gallery.project[e],"scene"==g.config.type&&delete g.config.gallery[g.targetScene][e],o(function(){c()})}function h(){0!=d&&(g.isUpdating=!0,e.updateConfig(s,g.config,function(){g.isUpdating=!1}))}var g=this,d=!0;g.project=r,g.updateConfig=h,g.openMediaLib=p,g.arrayTargetSceneGallery=l,g.deletePhoto=u,g.config=s.config||{},g.galleryType={clipped:"Clipped SVG",fancybox:"Fancy"},g.config.theme_type=g.config.theme_type||Object.keys(g.galleryType)[0],g.sortableOptions={update:function(e,t){c()}},angular.isUndefined(g.config)&&(g.config={}),angular.isUndefined(g.config.gallery)&&(g.config.gallery={})}e.$inject=["$scope","$rootScope","$timeout","$uibModal","lptSphere","LptHelper","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginGalleryConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginGallery",["$compile",function(e){return{restrict:"E",link:function(t,o,n){function i(n){var i="plugin-"+t.plugin.slug+"-"+n,a="<"+i+"></"+i+">";o.empty(),o.append(e(a)(t))}var a=t.pluginVm.config;a.theme_type||(a.theme_type="clipped"),i(a.theme_type)}}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){isNaN(k.config.zoom)?k.map.setZoom(k.config.zoom):k.map.setZoom(parseInt(k.config.zoom)),k.map.setCenter(new google.maps.LatLng(k.center.lat,k.center.lng))}function l(e){e.mime_type.indexOf("image")!=-1&&(k.config.icon=e.path,k.config.placemarkWidth=50,k.ratio=e.width/e.height,k.config.placemarkHeight=50/k.ratio,k.changeIconMap())}function p(){var e="modules/lapentor.marketplace/plugins/googlemap/images/marker.svg";k.map=new google.maps.Map(document.getElementById("map-canvas"),{center:{lat:k.center.lat,lng:k.center.lng},zoom:k.config.zoom,mapTypeId:k.config.map_type,styles:(k.config.map_style?JSON.parse(k.config.map_style):"")||""}),k.markers.project=new google.maps.Marker({position:new google.maps.LatLng(k.config.project.lat,k.config.project.lng),draggable:!0,map:k.map,icon:k.config.icon||e}),k.infowindow.project=_(k.project),m(k.markers.project,k.infowindow.project),k.infowindow.project.open(k.map,k.markers.project),angular.forEach(k.config.scenes,function(t,o){k.markers.scenes[o]=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lng),animation:google.maps.Animation.DROP,draggable:!0,map:k.map,icon:k.config.icon||e}),m(k.markers.scenes[o],k.infowindow.scenes[o],o)}),f(k.map),u(k.map)}function f(e){var t=document.createElement("INPUT");t.setAttribute("id","pac-input"),t.setAttribute("type","text"),t.setAttribute("class","controls"),t.setAttribute("placeholder","Search Box");var o=new google.maps.places.SearchBox(t);e.controls[google.maps.ControlPosition.TOP_LEFT].push(t),e.addListener("bounds_changed",function(){o.setBounds(e.getBounds())});var n=[];o.addListener("places_changed",function(){var t=o.getPlaces();if(0!=t.length){n.forEach(function(e){e.setMap(null)}),n=[];var i=new google.maps.LatLngBounds;t.forEach(function(e){if(e.geometry){({url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)});"project"==k.config.type&&k.markers.project.setPosition(e.geometry.location),"scenes"==k.config.type&&k.targetScene&&(k.markers.scenes[k.targetScene]?k.markers.scenes[k.targetScene].setPosition(e.geometry.location):(k.markers.scenes[k.targetScene]=new google.maps.Marker({position:e.geometry.location,animation:google.maps.Animation.DROP,draggable:!0,map:k.map}),k.changeIconMap())),e.geometry.viewport?i.union(e.geometry.viewport):i.extend(e.geometry.location)}}),e.fitBounds(i)}})}function u(e){e.addListener("click",function(e){"project"==k.config.type&&k.markers.project.setPosition(e.latLng),"scenes"==k.config.type&&k.targetScene&&(k.markers.scenes[k.targetScene]||(k.markers.scenes[k.targetScene]=new google.maps.Marker({position:e.latLng,animation:google.maps.Animation.DROP,draggable:!0,map:k.map}),m(k.markers.scenes[k.targetScene],k.infowindow[k.targetScene],k.targetScene),v(k.markers.scenes[k.targetScene]),k.changeIconMap()))})}function h(){if(k.config.map_style){var e=new google.maps.StyledMapType(JSON.parse(k.config.map_style),{name:"Styled Map"});k.map.mapTypes.set("styled_map",e),k.map.setMapTypeId("styled_map")}}function g(){"project"==k.config.type&&(k.markers.project.setMap(k.map),k.map.panTo(k.markers.project.getPosition()),angular.forEach(k.markers.scenes,function(e,t){e.setMap(null)})),"scenes"==k.config.type&&(k.markers.project.setMap(null),angular.forEach(k.markers.scenes,function(e,t){e.setMap(k.map)}),k.map.panTo(k.config.project),k.targetScene&&v(k.markers.scenes[k.targetScene]))}function d(){k.markers.scenes[k.targetScene]?(k.map.panTo(k.markers.scenes[k.targetScene].getPosition()),v(k.markers.scenes[k.targetScene])):y()}function m(e,t,o){e.addListener("click",function(){k.targetScene=o,k.map.panTo(e.getPosition()),"project"==k.config.type&&k.infowindow.project.open(k.map,k.markers.project),"scenes"==k.config.type&&null==e.getAnimation()&&v(e)})}function _(e){return new google.maps.InfoWindow({content:e.title})}function v(e){angular.forEach(k.markers.scenes,function(e,t){e.setAnimation(null)}),e.setAnimation(google.maps.Animation.BOUNCE)}function y(){angular.forEach(k.markers.scenes,function(e,t){e.setAnimation(null)})}function b(e){e?(k.markers.scenes[e].setMap(null),delete k.infowindow.scenes[e],delete k.markers.scenes[e]):(angular.forEach(k.markers.scenes,function(e,t){e.setMap(null)}),k.markers.scenes={})}function w(){if("project"==k.config.type)try{k.config.project={lat:k.markers.project.getPosition().lat(),lng:k.markers.project.getPosition().lng()}}catch(t){i.error("You have to select your location")}"scenes"==k.config.type&&($.isEmptyObject(k.markers.scenes)?(k.enabledSave=!1,i.error("Please choose a location on the map")):k.enabledSave=!0,angular.forEach(k.markers.scenes,function(e,t){k.config.scenes[t]={lat:e.getPosition().lat(),lng:e.getPosition().lng()}})),k.config.zoom=k.map.getZoom(),k.enabledSave&&(k.isUpdating=!0,e.updateConfig(s,k.config,function(){k.isUpdating=!1}))}var k=this;if(k.project=r,k.scenes={},angular.forEach(k.project.scenes,function(e,t){k.scenes[e._id]=e}),k.updateConfig=w,k.mapChangeType=g,k.changeScene=d,k.deleteMarkerScene=b,k.config=s.config,k.enabledSave=!0,k.ratio=1,k.config=k.config||{},k.config.type=k.config.type||"project",k.config.position=k.config.position||"left",k.config.theme=k.config.theme||"square",k.config.map_type=k.config.map_type||"roadmap",k.config.map_style=k.config.map_style||'[{"featureType":"administrative","elementType":"all","stylers":[{"saturation":"-100"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"all","stylers":[{"saturation":-100},{"lightness":65},{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"saturation":-100},{"lightness":"50"},{"visibility":"simplified"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":"-100"}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"all","stylers":[{"lightness":"30"}]},{"featureType":"road.local","elementType":"all","stylers":[{"lightness":"40"}]},{"featureType":"transit","elementType":"all","stylers":[{"saturation":-100},{"visibility":"simplified"}]},{"featureType":"water","elementType":"geometry","stylers":[{"hue":"#ffff00"},{"lightness":-25},{"saturation":-97}]},{"featureType":"water","elementType":"labels","stylers":[{"lightness":-25},{"saturation":-100}]}]',k.config.show_on_start=k.config.show_on_start||"0",k.config.zoom=k.config.zoom||10,k.config.placemarkWidth=k.config.placemarkWidth||0,angular.isUndefined(k.config.project)&&(k.config.project={lat:40.73061,lng:-73.935242}),k.config.scenes=k.config.scenes||{},"project"==k.config.type&&(k.center=k.config.project),"scenes"==k.config.type&&($.isEmptyObject(k.config.scenes)?k.center=k.config.project:k.center=k.config.scenes[Object.keys(k.config.scenes)[0]]),k.map,k.markers={},k.markers.scenes={},k.infowindow={},k.infowindow.scenes={},"undefined"==typeof google)n.load("js!https://maps.googleapis.com/maps/api/js?key="+LPT_GOOGLE_KEY_API+"&libraries=places&sensor=false").then(function(){o(function(){p(),g()},1e3)});else try{o(function(){p(),g()})}catch(j){console.log(j)}k.onMapTypeChange=function(){k.map.setMapTypeId(k.config.map_type)},k.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:l,canChooseMultipleFile:!1})},k.onMapChangeStyle=h,k.onMapChangeZoom=c,k.markerUpdateWidthHeight=function(){k.config.icon&&(k.config.placemarkHeight=k.config.placemarkWidth/k.ratio,k.changeIconMap())},k.changeIconMap=function(){k.markers.project&&k.markers.project.setIcon({url:k.config.icon||"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi_hdpi.png",scaledSize:new google.maps.Size(k.config.icon?k.config.placemarkWidth:22,k.config.icon?k.config.placemarkHeight:40)}),k.markers.scenes&&angular.forEach(k.markers.scenes,function(e,t){e.setIcon({url:k.config.icon||"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi_hdpi.png",scaledSize:new google.maps.Size(k.config.icon?k.config.placemarkWidth:22,k.config.icon?k.config.placemarkHeight:40)})})},k.deleteIcon=function(){k.config.icon=null,k.markers.project&&k.markers.project.setIcon({url:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi_hdpi.png",scaledSize:new google.maps.Size(22,40)}),k.markers.scenes&&angular.forEach(k.markers.scenes,function(e,t){e.setIcon({url:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi_hdpi.png",scaledSize:new google.maps.Size(22,40)})})}}e.$inject=["$scope","$rootScope","$timeout","$ocLazyLoad","Alertify","LptHelper","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginGooglemapConfigCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i){function a(){"scenes"==f.config.type&&($.isEmptyObject(f.map)?f.config.scenes[e.scene._id]&&(f.center=f.config.scenes[e.scene._id]):f.markers.scenes[e.scene._id]&&(f.map.panTo(f.markers.scenes[e.scene._id].getPosition()),p(),f.infowindow[e.scene._id].open(f.map,f.markers.scenes[e.scene._id])),r())}function r(){f.mapShow&&o(function(){"undefined"!=typeof google?s():t.load("js!https://maps.googleapis.com/maps/api/js?key="+LPT_GOOGLE_KEY_API+"&libraries=places").then(function(){s()})},1e3)}function s(){if(f.center.lat&&f.center.lng){var t={center:{lat:f.center.lat,lng:f.center.lng},zoom:f.config.zoom,mapTypeId:f.config.map_type,styles:JSON.parse(f.config.map_style),disableDefaultUI:!0},o="modules/lapentor.marketplace/plugins/googlemap/images/marker.svg";f.map=new google.maps.Map(document.getElementById("map-canvas"),t),"project"==f.config.type&&(f.markers.project=new google.maps.Marker({position:new google.maps.LatLng(f.config.project.lat,f.config.project.lng),map:f.map,icon:f.config.icon||o}),f.infowindow.project=l(f.project),c(f.markers.project,f.infowindow.project),f.infowindow.project.open(f.map,f.markers.project)),"scenes"==f.config.type&&angular.forEach(f.config.scenes,function(t,n){f.markers.scenes[n]=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lng),map:f.map,icon:f.config.icon||o}),f.infowindow[n]=l(f.scenes[n]),c(f.markers.scenes[n],f.infowindow[n],n),n==e.scene._id&&(f.infowindow[n].open(f.map,f.markers.scenes[n]),f.map.panTo(f.markers.scenes[e.scene._id].getPosition()))}),f.config.icon&&(f.markers.project&&f.markers.project.setIcon({url:f.config.icon||o,scaledSize:new google.maps.Size(f.config.icon?f.config.placemarkWidth:22,f.config.icon?f.config.placemarkHeight:40)}),f.markers.scenes&&angular.forEach(f.markers.scenes,function(e,t){e.setIcon({url:f.config.icon||o,scaledSize:new google.maps.Size(f.config.icon?f.config.placemarkWidth:22,f.config.icon?f.config.placemarkHeight:40)})}))}}function c(t,o,a){t.addListener("click",function(){if(p(),o.open(f.map,t),f.map.panTo(t.getPosition()),"scenes"==f.config.type){var r=i.getObjectBy("_id",a,e.project.scenes);n.$emit("evt.livesphere.changescene",r)}})}function l(e){return new google.maps.InfoWindow({content:e.title})}function p(){angular.forEach(f.infowindow,function(e,t){e.close()})}var f=this;f.pluginInterface=e.pluginVm,f.config=f.pluginInterface.config,f.project=e.project,f.scenes={},angular.isDefined(f.config.show_on_start)?f.mapShow=1==f.config.show_on_start:f.mapShow=!1,angular.forEach(f.project.scenes,function(e,t){f.scenes[e._id]=e}),f.config=f.config||{},f.config.zoom=f.config.zoom||10,f.config.type=f.config.type||"project",f.config.project=f.config.project||{lat:40.73061,lng:-73.935242},f.config.scenes=f.config.scenes||{},f.config.map_style=f.config.map_style||'[{"featureType":"administrative","elementType":"all","stylers":[{"saturation":"-100"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"all","stylers":[{"saturation":-100},{"lightness":65},{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"saturation":-100},{"lightness":"50"},{"visibility":"simplified"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":"-100"}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"all","stylers":[{"lightness":"30"}]},{"featureType":"road.local","elementType":"all","stylers":[{"lightness":"40"}]},{"featureType":"transit","elementType":"all","stylers":[{"saturation":-100},{"visibility":"simplified"}]},{"featureType":"water","elementType":"geometry","stylers":[{"hue":"#ffff00"},{"lightness":-25},{"saturation":-97}]},{"featureType":"water","elementType":"labels","stylers":[{"lightness":-25},{"saturation":-100}]}]',f.map={},f.markers={},f.markers.scenes={},f.center={lat:37.2756895,lng:-104.6556336},f.infowindow={},"project"==f.config.type&&(f.center=f.config.project),"scenes"==f.config.type&&($.isEmptyObject(f.config.scenes)||(f.center=f.config.scenes[e.scene._id]||{})),r();var u="evt.controlbar."+f.pluginInterface.plugin.slug+"googlemap-";n.$on(u+"toggle",function(e,t){"click"==t&&(f.mapShow=!0,"scenes"==f.config.type?a():r())}),e.$on("evt.krpano.onxmlcomplete",a)}e.$inject=["$scope","$ocLazyLoad","$timeout","$rootScope","LptHelper"],angular.module("lapentor.marketplace.plugins").directive("pluginGooglemap",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/googlemap/tpl/googlemap.html",controllerAs:"vm",controller:e}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginGyroConfigCtrl",["$scope","$rootScope","LptHelper","project","item",function(e,t,o,n,i){function a(){r.isUpdating=!0,e.updateConfig(i,r.config,function(){r.isUpdating=!1})}var r=this;r.project=n,r.config=angular.isDefined(i.config)?i.config:{},r.updateConfig=a}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginGyro",function(){return{restrict:"E",controllerAs:"vm",controller:["$scope","$timeout","$rootScope","Alertify",function(e,t,o,n){function i(){if(r.set("plugin[gyro].keep",!0),r.set("plugin[gyro].devices","html5"),r.set("plugin[gyro].url","bower_components/krpano/plugins/gyro2.js"),r.set("plugin[gyro].html5_url","bower_components/krpano/plugins/gyro2.js"),r.set("plugin[gyro].enabled",!1),r.call("addplugin(gyro)"),isMobile.any)try{1==a.config.turnonbydefault&&r.call("set(plugin[gyro].enabled, true);")}catch(e){console.log(e)}}var a=e.pluginVm,r=a.lptsphereinstance.krpano();e.$on("evt.krpano.onxmlcomplete",i);var s="evt.controlbar."+a.plugin.slug+"gyro-";o.$on(s+"toggle",function(e,t){"click"==t&&(isMobile.any?(r.call("switch(plugin[gyro].enabled);"),1==r.get("plugin[gyro].enabled")?angular.element("#gyro-toggle").css("opacity","1"):angular.element("#gyro-toggle").css("opacity","0.5")):n.error("Gyroscope only work on mobile/tablet devices"))})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginHotspotlistConfigCtrl",["$scope","project","item",function(e,t,o){function n(){angular.forEach(a.project.scenes,function(e,t){e._id==a.targetScene&&(a.hotspots=e.hotspots,angular.isUndefined(a.config.scenes[e._id])&&(a.config.scenes[e._id]={}),angular.forEach(a.hotspots,function(t,o){angular.isUndefined(a.config.scenes[e._id][t._id])&&"sound"!=t.type&&(a.config.scenes[e._id][t._id]=!0)}))}),a.selectHotspot()}function i(){a.isUpdating=!0,e.updateConfig(o,a.config,function(){a.isUpdating=!1})}var a=this;a.project=t,a.config=o.config||{},a.hotspots=[],a.changeScene=n,a.updateConfig=i,angular.isUndefined(a.config.scenes)&&(a.config.scenes={}),a.config.show_on_start=a.config.show_on_start||!1,a.toggleAll=function(){var e=a.select_all;angular.forEach(a.config.scenes[a.targetScene],function(t,o){a.config.scenes[a.targetScene][o]=e})},a.selectHotspot=function(){a.select_all=!0,angular.forEach(a.config.scenes[a.targetScene],function(e,t){e||(a.select_all=!1)})}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginHotspotlist",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/hotspotlist/tpl/hotspotlist.html",controllerAs:"vm",controller:["$scope","$ocLazyLoad","$timeout","Hotspot","$rootScope",function(e,t,o,n,i){function a(){s.hotspotCount=0,s.currentScene=e.scene,s.currentScene.hotspots.sort(function(e,t){var o=e.title.toUpperCase(),n=t.title.toUpperCase();return o<n?-1:o>n?1:0}),angular.forEach(s.currentScene.hotspots,function(e){e.show=!0,s.config.scenes=s.config.scenes||{},s.config.scenes[s.currentScene._id]=s.config.scenes[s.currentScene._id]||{},angular.isUndefined(s.config.scenes[s.currentScene._id][e._id])||(e.show=s.config.scenes[s.currentScene._id][e._id]),angular.forEach(s.hotspotTypes,function(t){t.name==e.type&&(e.icon=t.icon)}),"sound"!=e.type&&e.show&&s.hotspotCount++})}function r(e){s.pluginInterface.lptsphereinstance.moveViewerTo(e.position.x,e.position.y)}var s=this;s.pluginInterface=e.pluginVm,s.currentScene=s.pluginInterface.scene,s.hotspotTypes=n.getTypes(s.pluginInterface.project.theme_hotspot.slug),s.config=s.pluginInterface.config,s.hotspotCount=0,s.moveViewerTo=r,s.config.show_on_start&&"true"==s.config.show_on_start&&(s.isShow=!0),e.$on("evt.krpano.onxmlcomplete",a),o(function(){jQuery("#PluginHotspotlist>ul").mCustomScrollbar({axis:"y"})})}]}})}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c){function l(){angular.isDefined(u.config.fontfamily)&&""==u.config.fontfamily||i.load("css!https://fonts.googleapis.com/css?family="+u.config.fontfamily)}function p(e){var t=$.summernote.ui,n=t.button({contents:'<i class="note-icon-picture"/>',tooltip:"Image",click:function(){e.invoke("editor.saveRange"),o.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:function(t){e.invoke("editor.restoreRange"),angular.forEach(t,function(t,o){t.mime_type.indexOf("image")!=-1&&e.invoke("editor.insertImage",t.path)})},canelMediaLibCallback:function(){e.invoke("editor.restoreRange")},canChooseMultipleFile:!0})}});return n.render()}function f(){u.isUpdating=!0,e.updateConfig(c,u.config,function(){u.isUpdating=!1})}var u=this;u.project=s,u.config=c.config,u.updateConfig=f,u.introTheme={fullscreen:"Full screen",circle:"Circle",bootstrap:"Popup"},u.googlefonts=[],u.config=u.config||{},u.config.theme_type=u.config.theme_type||"fullscreen",u.fontFamilyChange=l,u.summernoteOptions={height:300,focus:!0,dialogsInBody:!0,toolbar:[["headline",["style"]],["style",["bold","italic","underline","strikethrough","clear"]],["fontface",["fontname"]],["textsize",["fontsize"]],["fontclr",["color"]],["alignment",["ul","ol","paragraph","lineheight"]],["height",["height"]],["table",["table"]],["insert",["link","image","video","hr"]],["view",["fullscreen","codeview"]]],buttons:{image:p}},u.config.fontfamily&&i.load("css!https://fonts.googleapis.com/css?family="+u.config.fontfamily),t.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDY31rAJVkfb6GoONiVs03LB87ThdbHZj0").then(function(e){e.data&&(u.googlefonts=e.data.items)},function(e){console.log(e)})}e.$inject=["$scope","$http","$rootScope","$timeout","$ocLazyLoad","lptSphere","LptHelper","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginIntropopupConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginIntropopup",["$compile","$ocLazyLoad",function(e,t){return{restrict:"E",link:function(o,n,i){function a(t){var i="plugin-"+o.plugin.slug+"-"+t,a="<"+i+"></"+i+">";n.empty(),n.append(e(a)(o))}var r=o.pluginVm.config;r.theme_type||(r.theme_type="bootstrap"),a(r.theme_type),r.fontfamily&&t.load("css!https://fonts.googleapis.com/css?family="+r.fontfamily)}}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r){function s(){f.selectedScene=i.getObjectBy("_id",f.targetScene,f.project.scenes);var e={"view.fov":90};f.config.lensflare[f.selectedScene._id]&&(e["view.hlookat"]=f.config.lensflare[f.selectedScene._id].x,e["view.vlookat"]=f.config.lensflare[f.selectedScene._id].y),0==u?(u=!0,f.shouldShowPreview=!0,h.init("lensTour",f.selectedScene.xml,e),h.on("onxmlcomplete",function(){h.set("layer",{name:"h",type:"container",width:"100",height:"2",align:"center",bgcolor:"0xef5041",bgalpha:"1",keep:!0}),h.set("layer",{name:"v",type:"container",width:"2",height:"100",align:"center",bgcolor:"0xef5041",bgalpha:"1",keep:!0}),h.deleteHotspot("lensflare"),f.config.lensflare[f.targetScene]&&l(f.config.lensflare[f.targetScene].x,f.config.lensflare[f.targetScene].y)})):h.loadScene(f.selectedScene.xml,e)}function c(){1==u&&(f.config.lensflare[f.targetScene]={x:h.getCurrentView("hlookat"),y:h.getCurrentView("vlookat")}),f.isUpdating=!0,e.updateConfig(r,f.config,function(){f.isUpdating=!1,l(f.config.lensflare[f.targetScene].x,f.config.lensflare[f.targetScene].y)});
}function l(e,t){h.addHotspot({name:"lensflare",url:"modules/lapentor.marketplace/plugins/lensflare/images/flare1.png",width:400,height:400,ath:e,atv:t,enabled:!1})}function p(){1==u&&f.config.lensflare[f.targetScene]&&(delete f.config.lensflare[f.targetScene],h.deleteHotspot("lensflare"),f.isUpdating=!0,e.updateConfig(r,f.config,function(){f.isUpdating=!1}))}var f=this;f.project=a,f.updateConfig=c,f.selectScene=s,f.config=r.config,f.removeLensflare=p;var u=!1,h=new n("lensflareKrpano");angular.isUndefined(f.config)&&(f.config={}),angular.isUndefined(f.config.lensflare)&&(f.config.lensflare={})}e.$inject=["$scope","$rootScope","$uibModal","lptSphere","LptHelper","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginLensflareConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginLensflare",function(){return{restrict:"E",controllerAs:"vm",templateUrl:"modules/lapentor.marketplace/plugins/lensflare/tpl/lensflare.html",controller:["$scope","$timeout","$rootScope","$window","LptHelper",function(e,t,o,n,i){function a(e,t,o){var i,a,s=0,c=p.screentosphere(n.innerWidth/2,n.innerHeight/2),l=c.x,f=c.y;l-(e-o)>360&&(l-=360),e+o-l>360&&(l+=360),l>e-o&&l<e+o&&f>t-o&&f<t+o&&(l<e&&(i=e-l),l>e&&(i=l-e),f<t&&(a=t-f),f>t&&(a=f-t),s=i>a?(o-i)/o*.5:(o-a)/o*.5);var u=p.spheretoscreen(e,t),h=p.spheretoscreen(l,f);r(u.x,u.y,h.x,h.y,s)}function r(e,t,o,n,i){return l.lensflareShow=!0,e?(d||(d=0,m=0),f=e,u=t,h=o,g=n,d-=.1*(d-h),m-=.1*(m-g),s("l1",.4,1.5,0,0),s("l2",.3,2,0,0),s("l3",.2,5,0,0),void angular.element("#flash").css("opacity",i)):(l.lensflareShow=!1,angular.element("#flash").css("opacity",0),!1)}function s(e,t,o,n,i){var a=(f-d)/-o,r=(u-m)/-o,s=_*t,c=document.getElementById(e).style;c.top=Math.round(r-.5*s+u+i)+"px",c.left=Math.round(a-.5*s+f+n)+"px",c.width=Math.round(s)+"px",c.height=Math.round(s)+"px"}var c=e.pluginVm,l=this,p=c.lptsphereinstance.krpano(),f=0,u=0,h=0,g=0,d=0,m=0,_=400;o.$on("evt.livesphere.changescene",function(){l.lensflareShow=!1}),e.$on("evt.krpano.onxmlcomplete",function(){l.lensflareShow=!1;try{c.config.lensflare[e.scene._id]?(l.lensflareShow=!0,c.lptsphereinstance.addHotspot({name:"lensflare",url:c.pluginPath+"/images/flare1.png",width:400,height:400,ath:c.config.lensflare[e.scene._id].x,atv:c.config.lensflare[e.scene._id].y,enabled:!1})):c.lptsphereinstance.deleteHotspot("lensflare")}catch(t){console.log("WARN:lensflare: empty config")}}),o.$on("evt.krpano.onviewchange",function(){try{c.config.lensflare[e.scene._id]&&a(c.config.lensflare[e.scene._id].x,c.config.lensflare[e.scene._id].y,30)}catch(t){}})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginLittleplanetConfigCtrl",["$scope","LptHelper","project","item",function(e,t,o,n){function i(){a.isUpdating=!0,e.updateConfig(n,a.config,function(){a.isUpdating=!1})}var a=this;a.updateConfig=i,a.project=o;var r=n;a.config=r.config||{},a.config.scenes=a.config.scenes?a.config.scenes:{},a.select_all=!0,angular.forEach(a.project.scenes,function(e){a.config.scenes[e._id]||(a.config.scenes[e._id]=!1)}),angular.forEach(a.config.scenes,function(e,t){e||(a.select_all=!1)}),a.toggleAll=function(){var e=a.select_all;angular.forEach(a.config.scenes,function(t,o){a.config.scenes[o]=e})},a.selectScene=function(){a.select_all=!0,angular.forEach(a.config.scenes,function(e,t){e||(a.select_all=!1)})}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginLittleplanet",function(){return{restrict:"E",controller:["$scope","$rootScope","$timeout",function(e,t,o){function n(){try{p=s.get("view.vlookat"),f=s.get("view.hlookat"),u=s.get("view.fov"),r.config.scenes[e.scene._id]&&1==r.config.scenes[e.scene._id]&&!s.get("webvr.isenabled")&&(i(),o(a,1e3*r.config.timeout))}catch(t){}}function i(e){var t=90,o=90;r.scene.default_view&&(o=r.scene.default_view.hlookat),e?(r.lptsphereinstance.tween("view.fov",150),r.lptsphereinstance.tween("view.fisheye",1),r.lptsphereinstance.tween("view.vlookat",t),r.lptsphereinstance.tween("view.hlookat",o)):(r.lptsphereinstance.set("view.fov",150),r.lptsphereinstance.set("view.fisheye",1),r.lptsphereinstance.set("view.vlookat",t),r.lptsphereinstance.set("view.hlookat",o)),s.get("krpano.arrows")&&s.call("removechevrons()"),c=!1}function a(){r.scene.default_view?(r.lptsphereinstance.tween("view.vlookat",p,2.5,"easeInOutQuad"),r.lptsphereinstance.tween("view.hlookat",f,2.5,"easeInOutQuad")):(r.lptsphereinstance.tween("view.vlookat",p,2.5,"easeInOutQuad"),r.lptsphereinstance.tween("view.hlookat",f,2.5,"easeInOutQuad")),r.lptsphereinstance.tween("view.fov",u,2.5,"easeInOutQuad"),r.lptsphereinstance.tween("view.fisheye",0,2.5,"easeInOutQuad"),o(function(){angular.element("scene-list").removeClass("hide"),s.get("krpano.arrows")&&s.call("addchevrons"),s.get("krpano.autorotate")&&s.set("autorotate.enabled",!0)},3e3)}var r=e.pluginVm,s=r.lptsphereinstance.krpano(),c=!1,l=!1,p=0,f=0,u=90;r.config=r.config||{},(angular.isUndefined(r.config.timeout)||isNaN(r.config.timeout)||null==r.config.timeout)&&(r.config.timeout=2),angular.isUndefined(r.config.scenes)&&(r.config.scenes={}),angular.forEach(r.config.scenes,function(e,t){if(t==r.scene._id&&1==e)return void(c=!0)}),e.$on("evt.krpano.onxmlcomplete",n),t.$on("evt.controlbar."+r.plugin.slug+"littleplanet-toggle",function(e,t){"click"==t&&(l?(a(),l=!1):(i(!0),l=!0))})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginLogoConfigCtrl",["$scope","$timeout","$rootScope","$ocLazyLoad","LptHelper","project","item",function(e,t,o,n,i,a,r){function s(){return $.map(u.config.logos,function(e,t){return[e]})}function c(){angular.element(".list-logos").children(".item-logo").each(function(e){var t=$(this).attr("logo-id");u.config.logos[t].sort=e})}function l(e){var t=[];u.config.logos&&angular.forEach(u.config.logos,function(e,o){t.push(e._id)}),angular.forEach(e,function(e,o){var n=e;n.oldWidth=n.width,n.oldHeight=n.height,n.mime_type.indexOf("image")!=-1&&t.indexOf(n._id)<0&&(u.config.logos[n._id]=n)}),c()}function p(){u.config.logos[u.targetLogo].height=parseInt(u.config.logos[u.targetLogo].width/u.config.logos[u.targetLogo].oldWidth*u.config.logos[u.targetLogo].oldHeight)}function f(){u.isUpdating=!0,u.config.version=1,u.config.width=u.config.width>0?u.config.width:0,u.config.height=u.config.height>0?u.config.height:0,e.updateConfig(r,u.config,function(){u.isUpdating=!1})}var u=this;u.project=a,u.scenes=a.scenes,u.config=angular.isDefined(r.config)?r.config:{},u.config.icon=angular.isDefined(u.config.icon)?u.config.icon:"",u.config.width=angular.isDefined(u.config.width)?u.config.width:100,u.config.height=angular.isDefined(u.config.height)?u.config.height:100,u.config.oldWidth=angular.isDefined(u.config.oldWidth)?u.config.oldWidth:100,u.config.oldHeight=angular.isDefined(u.config.oldHeight)?u.config.oldHeight:100,u.config.margin_top=angular.isDefined(u.config.margin_top)?u.config.margin_top:10,u.config.margin_left=angular.isDefined(u.config.margin_left)?u.config.margin_left:10,u.config.margin_bottom=angular.isDefined(u.config.margin_bottom)?u.config.margin_bottom:10,u.config.margin_right=angular.isDefined(u.config.margin_right)?u.config.margin_right:10,u.config.autoSize=!angular.isDefined(u.config.autoSize)||u.config.autoSize,u.config.logos=angular.isDefined(u.config.logos)?u.config.logos:{},0==u.config.logos.length&&(u.config.logos={}),u.changeWidth=p,u.updateConfig=f,u.arrayTargetLogos=s,u.sortableOptions={update:function(e,t){c()}},u.openMediaLib=function(){o.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:l,canChooseMultipleFile:!0})},u.showOptionLogo=function(e){u.targetLogo=e,u.config.logos[u.targetLogo].scenes=u.config.logos[u.targetLogo].scenes||{},angular.forEach(u.scenes,function(e,t){angular.isUndefined(u.config.logos[u.targetLogo].scenes[e._id])&&(u.config.logos[u.targetLogo].scenes[e._id]=!0,u.config.logos[u.targetLogo].margin_top=10,u.config.logos[u.targetLogo].margin_bottom=10,u.config.logos[u.targetLogo].margin_left=10,u.config.logos[u.targetLogo].margin_right=10)}),u.selectScene()},u.deleteLogo=function(e){delete u.config.logos[e]},u.toggleAll=function(){var e=u.select_all;angular.forEach(u.config.logos[u.targetLogo].scenes,function(t,o){u.config.logos[u.targetLogo].scenes[o]=e})},u.selectScene=function(){u.select_all=!0,angular.forEach(u.config.logos[u.targetLogo].scenes,function(e,t){e||(u.select_all=!1)})}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginLogo",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/logo/tpl/logo.html",controllerAs:"vm",controller:["$scope","$ocLazyLoad","$timeout","$rootScope","$uibModal","LptHelper",function(e,t,o,n,i,a){var r=this;r.pluginInterface=e.pluginVm,r.project=e.project,r.config=r.pluginInterface.config,r.margin="",r.config.align&&("top-center"==r.config.align&&(r.margin="top:"+r.config.margin_top+"px;"),"top-left"==r.config.align&&(r.margin="top:"+r.config.margin_top+"px;left:"+r.config.margin_left+"px;"),"top-right"==r.config.align&&(r.margin="top:"+r.config.margin_top+"px;right:"+r.config.margin_right+"px;"),"bottom-left"==r.config.align&&(r.margin="bottom:"+r.config.margin_bottom+"px;left:"+r.config.margin_left+"px;"),"bottom-right"==r.config.align&&(r.margin="bottom:"+r.config.margin_bottom+"px;right:"+r.config.margin_right+"px;")),angular.forEach(r.config.logos,function(e,t){if(angular.isDefined(e.link)){var o=/^((http|https):\/\/)/;o.test(e.link)||(e.link="http://"+e.link)}else e.link="#";e.align=angular.isDefined(e.align)?e.align:"",e.margins="","top-center"==e.align&&(e.margins="top:"+e.margin_top+"px;"),"bottom-center"==e.align&&(e.margins="bottom:"+e.margin_bottom+"px;"),"top-left"==e.align&&(e.margins="top:"+e.margin_top+"px;left:"+e.margin_left+"px;"),"top-right"==e.align&&(e.margins="top:"+e.margin_top+"px;right:"+e.margin_right+"px;"),"bottom-left"==e.align&&(e.margins="bottom:"+e.margin_bottom+"px;left:"+e.margin_left+"px;"),"bottom-right"==e.align&&(e.margins="bottom:"+e.margin_bottom+"px;right:"+e.margin_right+"px;")}),r.clickLogo=function(t){t.modal?"iframe"==t.modal&&i.open({template:'<div class="plugin-modal logo-iframe-popup"><iframe src="'+t.link+'" style="width:100%;height: 100% "></iframe><span class="close close-black" ng-click="cancel()"><i class="ilpt-close"></i></span></div>',size:"lg",scope:e,controller:["$scope","$uibModalInstance",function(e,t){e.cancel=function(){t.dismiss("cancel")}}]}):window.open(t.link,"_blank")},e.$on("evt.krpano.onxmlcomplete",function(){r.sceneId=e.scene._id,angular.forEach(r.config.logos,function(e,t){e.show=!1,angular.isUndefined(e.scenes)||angular.isUndefined(e.scenes[r.sceneId])||(e.show=e.scenes[r.sceneId])})}),r.arrayTargetLogos=function(){return $.map(r.config.logos,function(e,t){return[e]})}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextscene",["$compile",function(e){return{restrict:"E",link:function(t,o,n){function i(n){var i="plugin-"+t.plugin.slug+"-"+n,a="<"+i+"></"+i+">";o.empty(),o.append(e(a)(t))}var a=t.pluginVm.config||{},r=[];a.theme=a.theme||"royal",i(a.theme),t.project&&t.project.groups&&t.project.groups.length>0?(angular.forEach(t.project.groups,function(e,o){e.scenes.length>0&&angular.forEach(e.scenes,function(e,o){angular.forEach(t.project.scenes,function(t,o){e._id==t._id&&r.push(t)})})}),0==r.length&&(r=t.project.scenes)):r=t.project.scenes,t.pluginVm.config.scenes=r}}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginNextsceneConfigCtrl",["$scope","$timeout","$rootScope","item",function(e,t,o,n){function i(){a.isUpdating=!0,e.updateConfig(n,a.config,function(){a.isUpdating=!1})}var a=this;a.config=angular.isDefined(n.config)?n.config:{},a.config.theme=angular.isDefined(a.config.theme)?a.config.theme:"royal",a.updateConfig=i,a.themePreviews={royal:"https://s3.amazonaws.com/lapentor-sphere/screenshots/plugins/nextscene/royal.gif",ontheline:"https://s3.amazonaws.com/lapentor-sphere/screenshots/plugins/nextscene/ontheline.gif",circle:"https://s3.amazonaws.com/lapentor-sphere/screenshots/plugins/nextscene/circle.gif",doubleflip:"",fillpath:"",roundslide:"",slide:"",split:""}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginPatchConfigCtrl",["$scope","$rootScope","LptHelper","project","item",function(e,t,o,n,i){function a(e){e.mime_type.indexOf("image")!=-1&&(s.config.icon=e.path,r())}function r(){s.isUpdating=!0,angular.forEach(s.selectValue,function(e,t){var o=s.config.scenes.indexOf(t);o==-1?e&&s.config.scenes.push(t):e||s.config.scenes.splice(o,1)}),e.updateConfig(i,s.config,function(){s.isUpdating=!1})}var s=this;s.project=n;var c=o.getObjectBy("slug","patch",s.project.plugins);s.applyAll=!1,s.config=angular.isDefined(c.config)?c.config:{},s.config.icon=angular.isDefined(s.config.icon)?s.config.icon:"",s.config.scale=angular.isDefined(s.config.scale)?s.config.scale:1,s.config.scenes=s.config.scenes?s.config.scenes:[],s.config.distorted=s.config.distorted||"yes",s.selectValue={},s.select_all=!0,angular.forEach(s.project.scenes,function(e){s.selectValue[e._id]=!0,s.config.scenes.indexOf(e._id)==-1&&(s.selectValue[e._id]=!1,s.select_all=!1)}),s.toggleAll=function(){var e=s.select_all;angular.forEach(s.selectValue,function(t,o){s.selectValue[o]=e})},s.selectScene=function(){s.select_all=!0,angular.forEach(s.selectValue,function(e,t){e||(s.select_all=!1)})},s.updateConfig=r,s.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:a,canChooseMultipleFile:!1})}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginPatch",function(){return{restrict:"E",controllerAs:"vm",controller:["$scope","$timeout","$rootScope","LptHelper",function(e,t,o,n){function i(){var e=a.config.icon?a.config.icon:"";e+="?"+(new Date).getTime(),r.set("hotspot[logo].style","image"),r.set("hotspot[logo].url",e),r.set("hotspot[logo].ath",0),r.set("hotspot[logo].atv",90),r.set("hotspot[logo].visible",!0),r.set("hotspot[logo].ishtml",!1),r.set("hotspot[logo].distorted","yes"==a.config.distorted),r.set("hotspot[logo].scale",a.config.scale?a.config.scale:.85),r.set("hotspot[logo].rotate",0),r.set("hotspot[logo].rotatewithview",!1),r.set("hotspot[logo].enabled",!1),r.set("hotspot[logo].link",!1),a.config.link&&(r.set("hotspot[logo].link",!0),r.get("webvr.isenabled")||r.set("hotspot[logo].enabled",!0),r.set("hotspot[logo].onclick",'js(window.open("'+a.config.link+'"))')),r.set("hotspot[logo].rotate",0),r.call("addhotspot(logo)")}var a=e.pluginVm,r=a.lptsphereinstance.krpano(),s=!1;a.config.distorted=a.config.distorted||"yes",e.$on("evt.krpano.onxmlcomplete",function(){if(r.set("hotspot[logo].visible",!1),a.config&&a.config.scenes){try{a.config.scenes[e.scene._id]&&1==a.config.scenes[e.scene._id]&&(0==s?(s=!0,i()):r.set("hotspot[logo].visible",!0))}catch(t){console.log(t)}try{a.config.scenes.indexOf(e.scene._id)!=-1&&(0==s?(s=!0,i()):r.set("hotspot[logo].visible",!0))}catch(t){console.log(t)}}})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").controller("pluginScenetitleConfigCtrl",["$scope","$rootScope","$ocLazyLoad","$http","LptHelper","project","item",function(e,t,o,n,i,a,r){function s(){angular.isDefined(l.config.fontfamily)&&""==l.config.fontfamily||o.load("css!https://fonts.googleapis.com/css?family="+l.config.fontfamily)}function c(){l.isUpdating=!0,e.updateConfig(r,l.config,function(){l.isUpdating=!1})}var l=this;l.project=a;i.getObjectBy("slug","patch",l.project.plugins);l.googlefonts=[],l.positionOptions=[{value:"top-center",title:"Top center"},{value:"top-left",title:"Top left"},{value:"top-right",title:"Top right"},{value:"bottom-center",title:"Bottom center"},{value:"bottom-left",title:"Bottom left"},{value:"bottom-right",title:"Bottom right"}],l.config=r.config||{},l.config.position=l.config.position||"top-center",l.config.offset_top=l.config.offset_top||20,l.config.offset_left=l.config.offset_left||0,l.config.offset_right=l.config.offset_right||0,l.config.offset_bottom=l.config.offset_bottom||20,l.config.color=l.config.color||"#ffffff",l.updateConfig=c,l.fontFamilyChange=s,l.config.fontfamily&&o.load("css!https://fonts.googleapis.com/css?family="+l.config.fontfamily),n.get("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyDY31rAJVkfb6GoONiVs03LB87ThdbHZj0").then(function(e){e.data&&(l.googlefonts=e.data.items)},function(e){console.log(e)})}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginScenetitle",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/scenetitle/tpl/tpl.html",controllerAs:"vm",controller:["$scope","$ocLazyLoad","$timeout","$rootScope","LptHelper",function(e,t,o,n,i){var a=this;switch(a.pluginInterface=e.pluginVm,a.config=a.pluginInterface.config,a.config.position=a.config.position||"top-center",a.config.fontfamily&&t.load("css!https://fonts.googleapis.com/css?family="+a.config.fontfamily),a.style={"font-family":a.config.fontfamily||"sans-serif","font-size":a.config.fontsize||14,color:a.config.color||"white"},a.config.position){case"top-left":a.style.top=a.config.offset_top||20,a.style.left=a.config.offset_left||20;break;case"top-right":a.style.top=a.config.offset_top||20,a.style.right=a.config.offset_right||20;break;case"bottom-left":a.style.bottom=a.config.offset_bottom||20,a.style.left=a.config.offset_left||20;break;case"bottom-right":a.style.bottom=a.config.offset_bottom||20,a.style.right=a.config.offset_right||20;break;case"bottom-center":a.style.bottom=a.config.offset_bottom||20;break;default:a.style.top=a.config.offset_top||20}e.$on("evt.krpano.onxmlcomplete",function(){a.currentSceneTitle=e.scene.title})}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(e){delete l.config["custom_"+e+"_icon"]}function r(e){p=e,o.$broadcast("evt.openMediaLib",{tab:"asset",canChooseMultipleFile:!1,chooseAssetCallback:s})}function s(e){e.mime_type.indexOf("png")!=-1||e.mime_type.indexOf("jpeg")!=-1||e.mime_type.indexOf("svg")?e.mime_type.indexOf("image")!=-1&&(l.config["custom_"+p+"_icon"]=e.path):Alertify.error("Only support png, jpeg, svg format")}function c(){l.isUpdating=!0,e.updateConfig(i,l.config,function(){l.isUpdating=!1})}var l=this;l.project=n,l.updateConfig=c,l.config=i.config?i.config:{theme_id:"gooey"},l.config.theme=l.config.theme?l.config.theme:{},l.socialProviders=[{title:"Facebook",slug:"facebook"},{title:"Google+",slug:"google"},{title:"Linkedin",slug:"linkedin"},{title:"Twitter",slug:"twitter"}],l.openCustomIconMediaLib=r,l.deleteCustomIcon=a;var p=""}e.$inject=["$scope","$sce","$rootScope","project","item"],angular.module("lapentor.marketplace.plugins").controller("pluginSocialsharewidgetConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginSocialsharewidget",["$compile",function(e){return{restrict:"E",link:function(t,o,n){function i(n){var i="plugin-"+t.plugin.slug+"-"+n,a="<"+i+"></"+i+">";o.empty(),o.append(e(a)(t))}var a=t.pluginVm.config;angular.isUndefined(a.theme_id)&&(a.theme_id="gooey"),i(a.theme_id)}}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginWebvr",function(){return{restrict:"E",controllerAs:"vm",controller:["$scope","$timeout","$rootScope",function(e,t,o){function n(){a.set("plugin[WebVR].keep",!0),a.set("plugin[WebVR].devices","html5"),a.set("plugin[WebVR].url","1.19-pr16"==a.get("version")?"bower_components/krpano/plugins/webvr1.js":"bower_components/krpano/plugins/webvr.js"),a.set("plugin[WebVR].multireslock.desktop",!0),a.set("plugin[WebVR].multireslock.mobile.or.tablet",!1),a.set("plugin[WebVR].mobilevr_support",!0),a.set("plugin[WebVR].mobilevr_fake_support",!0),a.set("plugin[WebVR].onavailable","removelayer(webvr_enterbutton);"),a.call("addplugin(WebVR)")}var i=e.pluginVm,a=i.lptsphereinstance.krpano();e.$on("evt.krpano.onxmlcomplete",n),e.$on("evt.krpano.onxmlcomplete",function(){a.get("webvr.isenabled")&&a.call("for(set(i,0), i LT hotspot.count, inc(i),if( (hotspot[get(i)].lpttype != 'point') AND (hotspot[get(i)].name != 'vr_cursor') AND (hotspot[get(i)].name != 'logo') AND (hotspot[get(i)].name != 'lensflare') ,set(hotspot[get(i)].visible, false);); if( (hotspot[get(i)].lpttype == 'point') AND (hotspot[get(i)].sceneId != krpano.sceneId) ,set(hotspot[get(i)].visible, false););if( (hotspot[get(i)].lpttype == 'point') AND (hotspot[get(i)].sceneId == krpano.sceneId) ,set(hotspot[get(i)].visible, true););if( (hotspot[get(i)].name == 'logo') AND (hotspot[get(i)].link == true),set(hotspot[get(i)].enabled, false););););")});var r="evt.controlbar."+i.plugin.slug+"webvr-";o.$on(r+"start",function(e,t){"click"==t&&(a.call("webvr.enterVR();"),a.set("autorotate.enabled",!1))})}]}})}(),function(){"use strict";function e(e,t,o,n,i,a){var r=e.vm,s=function(e){var t=$.summernote.ui,o=t.button({contents:'<i class="note-icon-picture"></i>',tooltip:"Image",click:function(){e.invoke("editor.saveRange"),n.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:function(t){e.invoke("editor.restoreRange"),angular.forEach(t,function(t,o){t.mime_type.indexOf("image")!=-1&&e.invoke("editor.insertImage",t.path)})},canelMediaLibCallback:function(){e.invoke("editor.restoreRange")},canChooseMultipleFile:!0})}});return o.render()};r.summernoteOptions={height:200,focus:!0,dialogsInBody:!0,buttons:{mediaLib:s},toolbar:[["style",["bold","italic","underline","strikethrough","fontname","fontsize","color","ul","paragraph","lineheight","table","link","mediaLib","video","hr","style","fullscreen","codeview"]]]},o.trustAsResourceUrl(r.hotspot.src),e.$on("evt.hotspoteditable.formShowed",function(o,n){t(function(){n==e.hotspot._id&&jQuery(".summernote").summernote()},3e3)})}e.$inject=["$scope","$timeout","$sce","$rootScope","Alertify","Hotspot"],angular.module("lapentor.app").controller("HotspotEditableArticleCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:i,canChooseMultipleFile:!1})}function i(e){e.mime_type.indexOf("image")!=-1&&(a.hotspot.src=e.path)}var a=e.vm;a.scenes=e.scenes,a.openMediaLib=n,o.trustAsResourceUrl(a.hotspot.src)}e.$inject=["$scope","$rootScope","$sce"],angular.module("lapentor.app").controller("HotspotEditableImageCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(e){v.sceneEditSphere.set("textstyle",{name:"default_tooltip_style",font:"Arial",fontsize:"13",bold:"true",roundedge:"4",background:"false",border:"false",textcolor:"0xFFFFFF",textalign:"center",vcenter:"true",edge:"bottom",xoffset:"0",yoffset:"0",padding:"10",textshadow:"1.0",textshadowrange:"10.0",textshadowangle:"0",textshadowcolor:"0x000000",textshadowalpha:"1.0"}),v.sceneEditSphere.addHotspotEventCallback(e.name,"onhover","showtext("+e.title+', "default_tooltip_style")')}function l(){o.$broadcast("evt.openMediaLib",{tab:"asset",canChooseMultipleFile:!1,chooseAssetCallback:p})}function p(e){e.mime_type.indexOf("image")!=-1?(v.hotspot.icon_custom=e.path,v.hpIcon=e.path):r.error("Only support png, jpeg, svg, gif format")}function f(){localStorage.setItem("checkmove",!0);var e=v.sceneEditSphere.getHotspotParam(v.hotspot.name,"ath"),t=v.sceneEditSphere.getHotspotParam(v.hotspot.name,"atv");v.sceneEditSphere.spheretoscreen(e,t)}function u(){i(function(){localStorage.setItem("checkmove",!1)},100);var e=v.sceneEditSphere.getHotspotParam(v.hotspot.name,"ath"),t=v.sceneEditSphere.getHotspotParam(v.hotspot.name,"atv"),o=v.sceneEditSphere.spheretoscreen(v.hotspot.position.x,v.hotspot.position.y),n=v.sceneEditSphere.spheretoscreen(e,t);v.hotspot.position.x=e,v.hotspot.position.y=t,Math.abs(o.x-n.x)>=2&&Math.abs(o.y-n.y)>=2?h():d()}function h(e){(!e||v.hotspotForm&&v.hotspotForm.$valid)&&(v.formSaving=!0,s.update(v.hotspot).then(function(e){if(1==e.data.status){r.success("Hotspot Saved");var t=(new Date).getTime(),o=v.hpIcon?v.hpIcon+"?"+t:v._icon_custom?v._icon_custom+"?"+t:a.makeUrl(y,v.hotspot.type+".png?"+t);v.sceneEditSphere.setHotspotParam(v.hotspot.name,"url",o),v.sceneEditSphere.setHotspotParam(v.hotspot.name,"width",v.hotspot.width),v.sceneEditSphere.setHotspotParam(v.hotspot.name,"height",v.hotspot.width),v.sceneEditSphere.addHotspotEventCallback(v.hotspot.name,"onhover","showtext("+v.hotspot.title+', "default_tooltip_style")')}else console.log(e),r.error("Can not update hotspot")},function(e){r.error("Can not update hotspot")})["finally"](function(){v.formSaving=!1}))}function g(){return"modules/lapentor.app/views/partials/hotspots/"+v.hotspot.type+".html"}function d(){angular.element(".hotspot-form-wrapper").hide(),v.currentOpenForm=v.hotspot.name,angular.element("#"+v.hotspot.name).show(),o.$broadcast("evt.hotspoteditable.formShowed",v.hotspot._id),i(function(){e.$broadcast("rzSliderForceRender")},1e3)}function m(){v.currentOpenForm=null,"point"!=v.hotspot.type&&"article"!=v.hotspot.type||angular.element("#"+v.hotspot.name).hide()}function _(e){v.hotspot._id==e&&(v.isDeleting=!0,r.confirm("Are you sure?").then(function(){o.$emit("evt.editor.isloading",!0),s.remove(v.hotspot._id).then(function(e){r.success("Hotspot deleted"),v.sceneEditSphere.deleteHotspot(v.hotspot.name),o.$emit("evt.hotspoteditable.hospotDeleted",v.hotspot._id)})["finally"](function(){v.isDeleting=!1,o.$emit("evt.editor.isloading",!1)})})["finally"](function(){v.isDeleting=!1}))}var v=this;v.sceneEditSphere=e.scenesphereinstance,v.hotspot=e.hotspot,v.hpIcon=v.hotspot.icon_custom,angular.isUndefined(v.hotspot.width)&&(v.hotspot.width=45),v.project=e.project,v.currentscene=e.currentscene,v.scenes=e.scenes,v.currentOpenForm=null,v.formSaving=!1,v.isDeleting=!1,v.getTemplateUrl=g,v.openCustomIconMediaLib=l,v.closeForm=m,v.saveForm=h,v.deleteHotspot=_,v.hotspot.name="lptHotspot"+v.hotspot._id;var y="assets/images/hotspots",b=v.project.theme_hotspot?v.project.theme_hotspot.slug:"";b&&(y=a.makeUrl(Config.THEME_PATH,"hotspot",b,"images"));try{v.project.theme_hotspot.config[v.hotspot.type+"_icon_custom"]&&(v._icon_custom=v.project.theme_hotspot.config[v.hotspot.type+"_icon_custom"])}catch(w){}v.hotspot.theme_slug=b,v.hotspotCustomSize={floor:5,ceil:500,showSelectionBar:!0,step:1},v.sceneEditSphere.addHotspot({title:v.hotspot.title,name:v.hotspot.name,url:v.hpIcon?v.hpIcon+"?"+Date.now():v._icon_custom?v._icon_custom+"?"+Date.now():a.makeUrl(y,v.hotspot.type+".png?"+v.hotspot.position.x)+"?"+Date.now(),ath:v.hotspot.position.x,atv:v.hotspot.position.y,width:v.hotspot.width,height:v.hotspot.width,ondown:"draghotspot()"}),c(v.hotspot),v.sceneEditSphere.addHotspotEventCallback(v.hotspot.name,"onDragEnd",u),v.sceneEditSphere.addHotspotEventCallback(v.hotspot.name,"onDrag",f),o.$on("evt.hotspoteditable.deleteHotspot",function(e,t){_(t)})}e.$inject=["$scope","$sce","$rootScope","$element","$timeout","LptHelper","Alertify","Hotspot"],angular.module("lapentor.app").controller("HotspotEditableCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){if(!f.isSpherePreviewInited){var e={},t="PointHotspot"+f.hotspot._id;angular.isDefined(f.hotspot.target_view)&&angular.isDefined(f.hotspot.target_view.fov)?(e={"view.hlookat":f.hotspot.target_view.hlookat,"view.vlookat":f.hotspot.target_view.vlookat,"view.fov":f.hotspot.target_view.fov,"control.fovspeed":0},f.hotspot_fov=f.hotspot.target_view.fov):(f.hotspot_fov=90,e={"view.fov":90,"control.fovspeed":0}),null!=f.selectedScene&&t&&""==angular.element("#"+t).html()&&u.init(t,f.selectedScene.xml,e),f.isSpherePreviewInited=!0}}function l(e){var t=!1;f.hotspot.title&&"point"!=f.hotspot.title||(t=!0),angular.forEach(f.scenes,function(o){if(f.hotspot.title==o.title&&(t=!0),o._id==e)return f.selectedScene=o,!1}),0==f.isSpherePreviewInited?c():u.loadScene(f.selectedScene.xml,[],f.selectedScene.pano_type),t&&(f.hotspot.title=f.selectedScene.title)}function p(){angular.isUndefined(f.hotspot.target_view)&&(f.hotspot.target_view={hlookat:null,vlookat:null,fov:null}),f.hotspot.target_view.hlookat=u.getCurrentView("hlookat"),f.hotspot.target_view.vlookat=u.getCurrentView("vlookat"),f.hotspot.target_view.fov=f.hotspot_fov}var f=e.vm;if(f.scenes.length){f.selectedScene=null,f.isSpherePreviewInited=!1;var u=new i(f.hotspot._id);f.sceneEditSphere=e.scenesphereinstance,f.setTargetView=p,f.loadPointHotspotScene=l,f.project=e.project;var h="assets/images/hotspots",g=f.project.theme_hotspot?f.project.theme_hotspot.slug:"";g&&(h=s.makeUrl(Config.THEME_PATH,"hotspot",g,"images"));try{f.project.theme_hotspot.config[f.hotspot.type+"_icon_custom"]&&(f._icon_custom=f.project.theme_hotspot.config[f.hotspot.type+"_icon_custom"])}catch(d){}f.optionFov={floor:70,ceil:120,showSelectionBar:!0,step:1,onChange:function(e){null!=u.krpano()&&u.set("view.fov",f.hotspot_fov)}},t.$on("evt.hotspoteditable.formShowed",function(e,t){t==f.hotspot._id&&(f.selectedScene=null,f.hotspot.target_scene_id&&(f.selectedScene=s.getObjectBy("_id",f.hotspot.target_scene_id,f.scenes),n(function(){c()},0)))}),f.project.groups&&angular.forEach(f.scenes,function(e){var t=s.getObjectBy("_id",e.group_id,f.project.groups);e.group_title=t.title}),f.saveForm=function(){f.hotspotForm.$valid&&(f.formSaving=!0,f.isSpherePreviewInited&&f.setTargetView(),r.update(f.hotspot).then(function(e){if(1==e.data.status){a.success("Hotspot Saved");var t=(new Date).getTime(),o=f.hpIcon?f.hpIcon+"?"+t:f._icon_custom?f._icon_custom+"?"+t:s.makeUrl(h,f.hotspot.type+".png?"+t);f.sceneEditSphere.setHotspotParam(f.hotspot.name,"url",o),f.sceneEditSphere.setHotspotParam(f.hotspot.name,"width",f.hotspot.width),f.sceneEditSphere.setHotspotParam(f.hotspot.name,"height",f.hotspot.width),f.sceneEditSphere.addHotspotEventCallback(f.hotspot.name,"onhover","showtext("+f.hotspot.title+', "default_tooltip_style")')}else console.log(e),a.error("Can not update hotspot")},function(e){console.log(e),a.error("Can not update hotspot")})["finally"](function(){f.formSaving=!1}))}}}e.$inject=["$scope","$rootScope","$sce","$timeout","lptSphere","Alertify","Hotspot","LptHelper"],angular.module("lapentor.app").controller("HotspotEditablePointCtrl",e)}(),function(){"use strict";function e(e,t,o){function n(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:i,canChooseMultipleFile:!1})}function i(e){e.mime_type.indexOf("audio")!=-1&&(a.hotspot.src=e.path,a.hotspot.title=e.name)}var a=e.vm;a.reachRangeSliderOptions={floor:10,ceil:180,showSelectionBar:!0,step:10,translate:function(e){return e+"&deg;"}},a.openMediaLib=n,"sound"==a.hotspot.type&&(angular.isUndefined(a.hotspot.reach)&&(a.hotspot.reach=40),angular.isUndefined(a.hotspot.volume)&&(a.hotspot.volume=80)),o.trustAsResourceUrl(a.hotspot.src)}e.$inject=["$scope","$rootScope","$sce"],angular.module("lapentor.app").controller("HotspotEditableSoundCtrl",e)}(),function(){"use strict";function e(e,t){var o=e.vm,n=function(e){var o=$.summernote.ui,n=o.button({contents:'<i class="note-icon-picture"></i>',tooltip:"Image",click:function(){e.invoke("editor.saveRange"),t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:function(t){e.invoke("editor.restoreRange"),angular.forEach(t,function(t,o){t.mime_type.indexOf("image")!=-1&&e.invoke("editor.insertImage",t.path)})},canelMediaLibCallback:function(){e.invoke("editor.restoreRange")},canChooseMultipleFile:!0})}});return n.render()};o.textfSummernoteOptions={height:200,focus:!0,dialogsInBody:!0,buttons:{mediaLib:n},toolbar:[["style",["bold","italic","underline","strikethrough","fontname","fontsize","color","ul","paragraph","lineheight","table","link","mediaLib","video","hr","style","fullscreen","codeview"]]]}}e.$inject=["$scope","$rootScope"],angular.module("lapentor.app").controller("HotspotEditableTextfCtrl",e)}(),function(){"use strict";function e(e,t){e.vm}e.$inject=["$scope","Alertify"],angular.module("lapentor.app").controller("HotspotEditableUrlCtrl",e);
}(),function(){"use strict";function e(e,t){var o=e.vm;t.trustAsResourceUrl(o.hotspot.src)}e.$inject=["$scope","$sce"],angular.module("lapentor.app").controller("HotspotEditableVideoCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function s(e){e.icon_url_custom=null,delete e.icon_url_custom,g(e.name+" button icon resetted")}function c(e){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:function(t){"image"==t.mime_type.split("/")[0]?(e.icon_url_custom=t.path,g(e.name+" button icon udpated")):n.error("not have to image")},canChooseMultipleFile:!1})}function l(e){var t=i.getObjectBy("id",e,m.availableButtons);t.hide?t.hide=!1:t.hide=!0,g("Control bar info saved")}function p(){m.availableButtons.push({id:"divider"+v++,name:"Divider",isdivider:!0,icon_url:"assets/images/icons/divider.png"})}function f(e){i.deleteObjectFromArrayBy("id",e,m.availableButtons),u(),g("Control bar info saved")}function u(){angular.forEach(_.project.plugins,function(e){angular.forEach(e.buttons,function(e){angular.forEach(m.availableButtons,function(t,o){if(t.id==e.id)return void(e.index=o)})})})}function h(){t.$emit("evt.marketplace.toggle",{status:"show",filterCategoryName:"control bar"})}function g(e,t){e||(e="Order saved"),m.isUpdating=!0,r.update(_.project).then(function(o){o&&(n.success(e),t&&t())})["catch"](function(){n.error("Can not update project")})["finally"](function(){m.isUpdating=!1,m.isChangingOrder=!1})}function d(){u(),g()}var m=this,_=e.vm;m.isChangingOrder=!1,m.availableButtons=a.getPluginButtons(_.project.plugins,!0),m.btnSortableOptions={appendTo:"#scene-editor-controlbar .tools",update:function(){m.isChangingOrder=!0}},m.addDivider=p,m.deleteDivider=f,m.openMarketplace=h,m.toggleButtonVisibility=l,m.openMediaLib=c,m.resetDefaultIcon=s,m.saveOrder=d,t.$on("evt.marketplace.item.installuninstall",function(){m.availableButtons=a.getPluginButtons(_.project.plugins,!0)});var v=0}e.$inject=["$scope","$rootScope","$timeout","Alertify","LptHelper","Marketplace","Project"],angular.module("lapentor.app").controller("EditorControlBarCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c){function l(e){switch(e){case"show":_.marketIsOpened=!0;break;case"hide":_.marketIsOpened=!1;break;default:_.marketIsOpened=!_.marketIsOpened,_.marketIsOpened}}function p(e){switch(e.type){case"theme":_.project["theme_"+e.theme_type]={slug:e.slug};break;case"plugin":if(!r.getObjectBy("slug",e.slug,_.project.plugins).slug){var o={slug:e.slug,name:e.name};e.buttons&&(o.buttons=e.buttons),_.project.plugins.push(o)}}_.isUpdating=e._id,_.updateProject(e.name+" installed",function(){t.$emit("evt.marketplace.item.installuninstall"),"hotspot"==e.theme_type&&i.reload()})}function f(e){try{switch(e.type){case"plugin":angular.forEach(_.project.plugins,function(t,o){t.slug==e.slug&&_.project.plugins.splice(o,1)});break;case"theme":_.project["theme_"+e.theme_type]=null}_.isUpdating=e._id,_.updateProject(e.name+" uninstalled",function(){t.$emit("evt.marketplace.item.installuninstall"),"hotspot"==e.theme_type&&i.reload()})}catch(o){console.log(o)}}function u(e){var t="",n=r.getObjectBy("slug",e,_.items);if(n){switch(n.type){case"plugin":t=r.makeUrl(Config.PLUGIN_PATH,e,"tpl/detail.html");break;case"theme":t=r.makeUrl(Config.THEME_PATH,n.theme_type,e,"tpl/detail.html")}try{o.open({templateUrl:t,size:"lg",windowClass:"marketplace-item-detail"})}catch(i){console.log(i)}}}function h(e){t.$emit("evt.marketplace.openConfigPage",e)}function g(e,t){s.update(_.project).then(function(o){o&&e&&(a.success(e),d(),t&&t())})["catch"](function(){a.error("Can not update project")})["finally"](function(){_.isUpdating=""})}function d(){var e=0;angular.forEach(_.items,function(t){"plugin"==t.type?r.getObjectBy("slug",t.slug,_.installedPlugins).slug?t.installed=!0:t.installed=!1:_.project["theme_"+t.theme_type]&&_.project["theme_"+t.theme_type].slug==t.slug?t.installed=!0:t.installed=!1,t.installed&&e++,_.installedItemsCount=e})}function m(e,t){switch(_.filterCategoryName="",e){case"all":_.filterCategoryType="",_.filterInstalled=void 0,_.filterThemeType=void 0;break;case"plugin":_.filterCategoryType="plugin",_.filterThemeType=void 0;break;case"theme":_.filterCategoryType="theme",t&&(_.filterThemeType=t);break;case"installed":_.filterCategoryType="",angular.isUndefined(_.filterInstalled)?_.filterInstalled=!0:_.filterInstalled=void 0}}var _=e.vm;_.items=[],_.categories=[],_.isUpdating="",_.showInstalled=!0,_.installedItemsCount=0,_.install=p,_.uninstall=f,_.openDetailPage=u,_.openConfigPage=h,_.updateProject=g,_.toggleMarketplace=l,_.showTab=m,_.installedPlugins=angular.isDefined(_.project.plugins)?_.project.plugins:[],c.getItems().then(function(e){_.items=e,d()}),c.getCategories().then(function(e){_.categories=e}),t.$on("evt.marketplace.toggle",function(e,t){l(t.status),t.filterCategoryName&&(_.filterCategoryName=t.filterCategoryName)}),_.marketIsOpened=!1}e.$inject=["$scope","$rootScope","$uibModal","$timeout","$state","Alertify","LptHelper","Project","Marketplace"],angular.module("lapentor.app").controller("EditorMarketCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c,l){function p(o){var n={success:function(n){if(n.length)if(n.length<=100){e.filesDropbox=n,e.pano_type=o,e.project_id=k.project._id;t.open({size:"lg",animation:!1,templateUrl:"modules/lapentor.app/views/partials/rendering_dropbox.html",controller:"RenderingModalCtrl",controllerAs:"vm",scope:e,resolve:{user:["$stateParams","User",function(e,t){return angular.isObject(e.user)?e.user:t.get()}]},backdrop:"static"})}else r.error("You can only make 100 sphere at a time. Sorry!");else r.error("Can't do that :( You have to select at least 1 pano image")},cancel:function(){},linkType:"direct",multiselect:!0,extensions:[".jpg",".png"]};Dropbox.choose(n)}function f(e){e&&e.length&&(r.success("Sphere created successfully"),k.project.scenes=e.concat(k.project.scenes),k.groups[0].scenes=e.concat(k.groups[0].scenes),angular.forEach(k.groups,function(e){for(var t=0;t<e.scenes.length;t++)s.isEmpty(e._id)||"uncategorized"==e._id?e.scenes[t].group_id=null:e.scenes[t].group_id=e._id,e.scenes[t].order_in_group=t}),_())}function u(e){e==k.scene._id?window.location.reload():k.thumbCacheVersion++}function h(){a.$broadcast("evt.openMediaLib",{makePanoCallback:f,tab:"pano"})}function g(e){a.$broadcast("evt.openMediaLib",{makePanoCallback:u,canChooseMultipleFile:!1,isReplacePano:!0,sceneId:e})}function d(){r.prompt("Enter group title").then(function(e){l.create(e,k.project._id).then(function(e){1==e.status&&(e.sceneGroup.scenes=[],e.sceneGroup.order=k.groups.length,k.groups.push(e.sceneGroup),_())})})}function m(e){x&&n.cancel(x),x=n(function(){k.groupLoading=e._id,l.update(e).then(function(e){1==e?r.success("Group title saved"):r.error("Can not update group title")})["finally"](function(){k.groupLoading=null})},1200)}function _(){l.updateAll(k.groups).then(function(e){1==e?r.success("Order saved"):r.error("Can not save")})}function v(e){S&&n.cancel(S),S=n(function(){e.group_id?k.groupLoading=e.group_id:k.groupLoading="uncategorized",k.headerSceneTitleIsLoading=!0,c.update(e).then(function(e){1==e?r.success("Scene title saved"):r.error("Can not update Scene title")})["finally"](function(){k.groupLoading=null,k.headerSceneTitleIsLoading=!1})},1e3)}function y(e){r.confirm("Are you sure? All data will be lost forever").then(function(){k.groupLoading=e._id,l.remove(e._id).then(function(t){k.groups=s.deleteObjectFromArray(e,k.groups),angular.forEach(e.scenes,function(e){e.group_id=null,j.scenes.push(e),angular.forEach(j.scenes,function(e,t){e.order_in_group=t}),_()}),angular.forEach(k.groups,function(e,t){e.order=t})})["finally"](function(){k.groupLoading=null})})}function b(e){r.confirm("Are you sure? All data will be lost forever").then(function(){var t=s.getObjectBy("_id",e,k.project.scenes);t&&(k.groupLoading=t.group_id?t.group_id:"uncategorized"),c.remove(e).then(function(t){1==t.data.status?(w(e),0==k.project.scenes.length?i.go("project.info",{id:k.project._id}):e==k.scene._id&&angular.forEach(k.project.scenes,function(t){t._id!=e&&i.go("project.editor",{id:k.project._id,scene_id:t._id,scene:t})})):r.error(t.data.errors.message)},function(e){r.error("Can not delete scene"),console.log(e)})["finally"](function(){k.groupLoading=null})})}function w(e){k.project.scenes=s.deleteObjectFromArrayBy("_id",e,k.project.scenes),angular.forEach(k.groups,function(t){s.isEmpty(t.scenes)||(t.scenes=s.deleteObjectFromArrayBy("_id",e,t.scenes))}),angular.forEach(k.groups,function(e){for(var t=0;t<e.scenes.length;t++)s.isEmpty(e._id)||"uncategorized"==e._id?e.scenes[t].group_id=null:e.scenes[t].group_id=e._id,e.scenes[t].order_in_group=t}),_()}var k=e.vm;k.collapsedGroup=[],k.thumbCacheVersion=0,k.openMediaLib=h,k.openReplacePanoMediaLib=g,k.deleteScene=b,k.makePanoDropBox=p,k.newGroup=d,k.updateGroup=m,k.deleteGroup=y,k.updateSceneInGroup=v,e.filesDropbox=[],e.pano_type="",e.makePanoCallback=f,n(function(){localStorage.getItem("scroll-scenes")&&angular.element('[ui-sortable="vm.groupSortableOptions"]').scrollTop(localStorage.getItem("scroll-scenes"))}),angular.element('[ui-sortable="vm.groupSortableOptions"]').scroll(function(){localStorage.setItem("scroll-scenes",angular.element(this).scrollTop())});var j={_id:"uncategorized",title:"Uncategorized",scenes:[],readonly:!0};j.scenes=k.project.scenes.filter(function(e){return s.isEmpty(e.group_id)}),j.scenes.sort(function(e,t){return e.order_in_group!=t.order_in_group?e.order_in_group-t.order_in_group:e._id>e._id}),k.sceneSortableOptions={handle:".scene-drag-trigger",connectWith:".scenes",appendTo:"#scene-management",stop:function(e,t){angular.forEach(k.groups,function(e){for(var t=0;t<e.scenes.length;t++)s.isEmpty(e._id)||"uncategorized"==e._id?e.scenes[t].group_id=null:e.scenes[t].group_id=e._id,e.scenes[t].order_in_group=t}),_()}},k.groupSortableOptions={appendTo:"#scene-management",handle:".group-drag-trigger",stop:function(){angular.forEach(k.groups,function(e,t){e.order=t}),_()},items:".scene-group:not(.not-sortable)"},0!=k.groups.length&&k.groups[0].readonly||k.groups.unshift(j),k.groups.length&&k.groups[0].readonly&&(k.groups.splice(0,1),k.groups.unshift(j));var x,S;e.$watch("vm.scene.title",function(e,t){e!=t&&v(k.scene)})}function t(e,t,o,n,i,a,r,s,c,l){function p(o,n,i,r,s,u){if(!angular.isUndefined(f.filesCreateScene[o[s].id]["class"])){var h=s+1;return u>h&&p(o,n,i,r,h,u),!1}f.filesCreateScene[o[s].id]["class"]="working",f.rendering=f.rendering+1;var g=[];g.push(o[s]),l.create(g,n,i,r).then(function(t){try{if(t=JSON.parse('{"status'+t.data.split('{"status')[1]),0==t.status)f.filesCreateScene[o[s].id]["class"]="fail",c.error(t.errors.message);else{f.filesCreateScene[o[s].id]["class"]="success";var n=t.scenes;e.makePanoCallback(n)}}catch(i){console.log(i)}},function(e){c.error("Can not create scene"),f.filesCreateScene[o[s].id]["class"]="fail",console.log(e)})["finally"](function(){if(f.renderingComplate=f.renderingComplate+1,f.makePanoProgress=100/u*f.renderingComplate,u-f.renderingComplate==0)t(function(){a.dismiss()},2e3);else{var e=s+1;u>e&&p(o,n,i,r,e,u)}})}var f=this;f.user=s,f.filesDropbox=e.filesDropbox,f.makePanoProgress=0,f.filesCreateScene={},f.rendering=0,f.renderingComplate=0,f.renderingTotal=0,angular.forEach(f.filesDropbox,function(e){e.id=e.id.replace(":",""),f.filesCreateScene[e.id]=e}),f.renderingTotal=f.filesDropbox.length,p(f.filesDropbox,"dropbox",e.project_id,e.pano_type,0,f.renderingTotal),f.filesDropbox.length>=2&&!angular.isUndefined(f.user.subscribed)&&f.user.subscribed&&p(f.filesDropbox,"dropbox",e.project_id,e.pano_type,1,f.renderingTotal)}e.$inject=["$scope","$uibModal","User","$timeout","$state","$rootScope","Alertify","LptHelper","Scene","SceneGroup"],t.$inject=["$scope","$timeout","$filter","$state","$rootScope","$uibModalInstance","Media","user","Alertify","Scene"],angular.module("lapentor.app").controller("EditorScenesManagementCtrl",e).controller("RenderingModalCtrl",t)}(),function(){"use strict";function e(e,t,o,n,i,a,r){function s(e,o){o&&o.stopPropagation(),t.$emit("evt.hotspoteditable.deleteHotspot",e)}function c(e,t,o){var a=t.offset.top+22.5-48,r=t.offset.left+22.5-240,s=k.sceneEditSphere.screentosphere(r,a);k.sphereIsLoading=!0,i.create(s.x,s.y,o.name,k.scene._id).then(function(e){if(1==e.data.status){var t=e.data.hotspot;k.hotspots||(k.hotspots=[]),t.icon=l(t.type),k.hotspots.unshift(t),n.success("Hotspot added")}},function(e){n.error("Can not add hotspot"),console.log(e)})["finally"](function(){k.sphereIsLoading=!1})}function l(e){var t="";return angular.forEach(k.hotspotTypes,function(o){if(o.name==e)return void(t=o.icon)}),t}function p(e){switch("close"==e&&angular.element("#hotspot-list").removeClass("active"),e){case"close":angular.element("#hotspot-list").removeClass("active");break;case"open":angular.element("#hotspot-list").addClass("active");break;default:angular.element("#hotspot-list").toggleClass("active")}}function f(e){var t=angular.element("#"+k.sceneEditSphereViewerDomId).height(),o=angular.element("#"+k.sceneEditSphereViewerDomId).width();"top"==e&&(k.scene.limit_view.top=k.sceneEditSphere.screentosphere(o/2,0).y),"bottom"==e&&(k.scene.limit_view.bottom=k.sceneEditSphere.screentosphere(o/2,t).y),"left"==e&&(k.scene.limit_view.left=k.sceneEditSphere.screentosphere(0,t/2).x),"right"==e&&(k.scene.limit_view.right=k.sceneEditSphere.screentosphere(o,t/2).x),k.updateScene("Scene limit "+e+" saved")}function u(){var e="Can not apply limit. Please try again or contact our support",t="Limit applied successfully";r.updateLimitViewForAllScene(k.scene.limit_view,k.project._id).then(function(o){1==o?(n.success(t),angular.forEach(k.project.scenes,function(e){e.limit_view.top=k.scene.limit_view.top,e.limit_view.bottom=k.scene.limit_view.bottom,e.limit_view.left=k.scene.limit_view.left,e.limit_view.right=k.scene.limit_view.right})):n.error(e)},function(t){n.error(e)})}function h(e){"min"==e&&g(),"max"==e&&d(),"resetZoom"==e&&m()}function g(e){return k.scene.min_zoom=k.sceneEditSphere.getCurrentView("fov"),k.scene.min_zoom&&k.scene.max_zoom&&k.scene.min_zoom>k.scene.max_zoom?void n.error("Max zoom must be smaller than Min zoom"):("all"==e&&(k.scene.all_scenes=!0,k.scene.scenes_columns=["min_zoom"]),void k.updateScene("Max zoom saved"))}function d(e){return k.scene.max_zoom=k.sceneEditSphere.getCurrentView("fov"),k.scene.min_zoom&&k.scene.max_zoom&&k.scene.max_zoom<k.scene.min_zoom?void n.error("Min zoom must be greater than Max zoom"):("all"==e&&(k.scene.all_scenes=!0,k.scene.scenes_columns=["max_zoom"]),void k.updateScene("Min zoom saved"))}function m(e){k.scene.max_zoom=null,k.scene.min_zoom=null,"all"==e&&(k.scene.all_scenes=!0,k.scene.scenes_columns=["max_zoom","min_zoom"]),k.updateScene("Zoom limit resetted")}function _(e){switch(e){case"all":break;default:k.scene.limit_view.top=null,k.scene.limit_view.bottom=null,k.scene.limit_view.left=null,k.scene.limit_view.right=null}k.updateScene("Reset limit view successfully.")}function v(){w(),angular.isUndefined(k.scene.default_view)&&(k.scene.default_view={});var e=angular.element("#"+k.sceneEditSphereViewerDomId).height(),t=angular.element("#"+k.sceneEditSphereViewerDomId).width(),o=k.sceneEditSphere.screentosphere(t/2,e/2).x;k.scene.default_view.fov=k.sceneEditSphere.getCurrentView("fov"),k.scene.default_view.hlookat=o,k.scene.default_view.vlookat=k.sceneEditSphere.getCurrentView("vlookat"),k.updateScene("Default view saved")}function y(e){r.update(k.scene).then(function(t){1==t?n.success(e):n.error("Can not update Scene"),k.scene.all_scenes=!1,k.scene.scenes_column=""})["catch"](function(e){console.log(e),n.error("Can not update Scene: "+e),k.scene.all_scenes=!1,k.scene.scenes_column=[]})}function b(){0==k.sceneEditSphere.krpano().get("view.fisheye")?(k.v=k.sceneEditSphere.krpano().get("view.vlookat"),k.h=k.sceneEditSphere.krpano().get("view.hlookat"),k.sceneEditSphere.tween("view.fov",150),k.sceneEditSphere.tween("view.fisheye",1),k.sceneEditSphere.tween("view.vlookat",90),k.sceneEditSphere.tween("view.hlookat",k.h)):(k.sceneEditSphere.tween("view.vlookat",k.v,2.5,"easeInOutQuad"),k.sceneEditSphere.tween("view.hlookat",k.h,2.5,"easeInOutQuad"),k.sceneEditSphere.tween("view.fov",90,2.5,"easeInOutQuad"),k.sceneEditSphere.tween("view.fisheye",0,2.5,"easeInOutQuad"))}function w(){var e=angular.element("#whiteSplash");e.hide().removeClass("flash"),e.show().addClass("flash"),setTimeout(function(){e.hide()},200)}var k=e.vm;k.isOpenHotspotList=!1;var j=k.project.theme_hotspot?k.project.theme_hotspot.slug:"";k.hotspotTypes=i.getTypes(j);try{angular.forEach(k.hotspotTypes,function(e){var t=k.project.theme_hotspot.config[e.name+"_icon_custom"];t&&(e.icon=t)})}catch(x){}k.updateScene=y,k.saveDefaultView=v,k.confirmMaxMinZoom=h,k.saveMinZoom=g,k.saveMaxZoom=d,k.resetZoom=m,k.saveNewHotspot=c,k.saveLimitView=f,k.applyLimitForAllScenes=u,k.resetLimitView=_,k.toggleHotspotList=p,k.deleteHotspot=s,k.littleplanet=b,k.v=90,k.h=90,k.scene.all_scenes=!1,k.scene.scenes_columns=[]}e.$inject=["$scope","$rootScope","LptHelper","Alertify","Hotspot","Project","Scene"],angular.module("lapentor.app").controller("EditorToolbarCtrl",e)}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(o){t.$broadcast("evt.openMediaLib",{tab:"asset",canChooseMultipleFile:!1,chooseAssetCallback:function(t){t.mime_type.indexOf("image")!=-1?angular.forEach(e.hotspotTypes,function(n){if(n.name==o)return n.icon=t.path,void(e.project.theme_hotspot.config&&(e.project.theme_hotspot.config[o+"_icon_custom"]=t.path))}):n.error("Only support png format")}})}function l(t){angular.forEach(e.hotspotTypes,function(o){if(o.name==t)return o.icon=o.icon_default,void(e.project.theme_hotspot.config&&delete e.project.theme_hotspot.config[t+"_icon_custom"])})}function p(t,o,a){switch(e.isUpdating=!0,t.type){case"plugin":i.updatePluginConfig({slug:t.slug,config:o},e.project._id).then(function(i){i?(e.project.plugins[t.slug]=o,t.config||(t.config=o),n.success(t.name+" config updated")):n.error("Can not update config")})["finally"](function(){a(),e.isUpdating=!1});break;default:i.updateThemeConfig(t.theme_type,e.project._id,o).then(function(e){e?n.success(t.name+" config updated"):n.error("Can not update config")})["finally"](function(){a(),e.isUpdating=!1})}}var f=this;e.updateConfig=p,e.isUpdating=!1,t.$on("evt.marketplace.openConfigPage",function(t,o){var n="",i="";if(o){var p=o;switch(o.type){case"plugin":n=a.makeUrl(Config.PLUGIN_PATH,o.slug,"tpl/config.html"),i=o.type+a.capitalizeFirstLetter(o.slug)+"ConfigCtrl",o=a.getObjectBy("slug",o.slug,e.project.plugins);break;case"theme":switch(o.theme_type){case"hotspot":n=a.makeUrl(Config.THEME_PATH,o.theme_type,"hotspot.config.html");break;case"scenelist":n=a.makeUrl(Config.THEME_PATH,o.theme_type,"scenelist.config.html");break;default:n=a.makeUrl(Config.THEME_PATH,o.theme_type,o.slug,"tpl/config.html")}i=o.theme_type+a.capitalizeFirstLetter(o.slug)+"ConfigCtrl",o=e.project["theme_"+o.theme_type],o.theme_type=p.theme_type,angular.isUndefined(e.project["theme_"+o.theme_type].config)&&(e.project["theme_"+o.theme_type].config={})}o.type=p.type,o.name=p.name,e.templateUrl=n,e.item=o,f.item=o,e.openCustomIconMediaLib=c,e.resetCustomHotspotIcon=l,e.hotspotTypes=s.getTypes(o.slug),e.project.theme_hotspot.config=e.project.theme_hotspot.config||{};try{angular.forEach(e.hotspotTypes,function(t){var o=e.project.theme_hotspot.config[t.name+"_icon_custom"];t.icon_default=t.icon,o&&(t.icon=o)})}catch(u){console.log(u)}if(a.isControllerExist(i)){var h=r.open({templateUrl:"modules/lapentor.app/views/partials/marketplace.item.config.html",size:"lg",scope:e,controller:i,controllerAs:"vm",windowClass:"marketplace-item-detail",resolve:{project:function(){return e.project},item:function(){return o}}});e.dismissConfigModal=h.dismiss,h.closed.then(function(){angular.element(".modal-backdrop").remove(),angular.element("body").removeClass("modal-open")})}}})}e.$inject=["$scope","$rootScope","$timeout","Alertify","Project","LptHelper","$uibModal","Hotspot"],angular.module("lapentor.app").controller("MarketplaceItemConfigCtrl",e)}(),function(){"use strict";function e(e,o,n,i,a,r,s,c,l,p,f,u,h,g,d,m){function _(){r.$broadcast("evt.openMediaLib",{makePanoCallback:makePanoCallback})}function v(e){var t=d.getObjectBy("name",e,g.getTypes(b.project.theme_hotspot?b.project.theme_hotspot.slug:""));return t.icon}function y(){window.open(b.project.shareUrl+"?scene="+b.scene._id,"lptLiveView")}var b=this,w="SphereEditable";b.project=e.project=f,b.user=m,b.sphereIsLoading=!1,b.sceneEditSphereViewerDomId=w,b.project.shareUrl=l.read("siteUrl")+"/sphere/"+b.project.slug,b.groups=b.project.groups,b.scene=d.getObjectBy("_id",c.scene_id,b.project.scenes),b.sceneEditSphere=new h(b.scene._id),b.hotspotTypes=g.getTypes(),b.minimizeMarket=!0,b.headerSceneTitleIsLoading=!1,b.hideAllEditor=!0,b.fov=90,b.openLiveView=y,b.openMediaLib=_,o.setTitle([f.title,b.scene.title].join(" - ")),0==b.project.scenes.length&&s(function(){b.openMediaLib()},1e3),angular.element("body").addClass("onEditor"),e.$on("$destroy",function(){angular.element("body").removeClass("onEditor")}),s(function(){if(angular.isDefined(b.scene.xml)){var t={};b.scene.default_view&&(t={"view.maxpixelzoom":0,"view.hlookat":b.scene.default_view.hlookat,"view.vlookat":b.scene.default_view.vlookat,"view.fov":120!=b.scene.default_view.fov?b.scene.default_view.fov:90},b.fov=120!=b.scene.default_view.fov?b.scene.default_view.fov:90),b.sceneEditSphere.init(w,b.scene.xml,t)}else b.sceneEditSphere.init(w,l.read("apiUrl")+"/xml-cube");b.sceneEditSphere.on("onxmlcomplete",function(){angular.isDefined(b.scene.hotspots)&&(b.hotspots=b.scene.hotspots?b.scene.hotspots:[],angular.forEach(b.hotspots,function(e){e.icon=v(e.type)}),e.$digest())}),e.$on("evt.krpano.onmousewheel",function(){b.fov=b.sceneEditSphere.getCurrentView("fov"),e.$apply()})}),r.$on("evt.hotspoteditable.hospotDeleted",function(e,t){try{b.hotspots=b.hotspots.filter(function(e){return e._id!=t})}catch(o){console.log(o)}}),r.$on("evt.editor.isloading",function(e,t){b.sphereIsLoading=t}),r.$on("evt.editor.openLiveView",function(){y()}),b.modalProjectConfigure=function(){n.open({templateUrl:"modules/lapentor.app/views/partials/project.editor/project_configure.html",scope:e,controllerAs:"pcmVm",controller:t})}}function t(e,t,o,n,i,a,r,s,c,l){function p(e){k.isDeletingSnapshot=!0,l.deleteSnapshot(e).then(function(t){t&&jQuery("#snapshot"+e).remove()},function(e){console.log(e)})["finally"](function(){k.isDeletingSnapshot=!1})}function f(){l.getExportedVersions(e.project._id).then(function(e){k.exportedVersions=e},function(e){console.log(e)})}function u(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:h,canChooseMultipleFile:!1})}function h(e){e.mime_type.indexOf("image")!=-1&&(k.project.meta.image=e.path)}function g(){k.isSaving=!0,l.update(k.project).then(function(e){1!=e?s.error("Can not update project"):s.success("Project updated")})["finally"](function(){k.titleIsLoading=!1,k.isSaving=!1})}function d(){k.isSavingGoogle=!0,l.update(k.project).then(function(e){1!=e?s.error("Can not update project"):s.success("Project updated")})["finally"](function(){k.isSavingGoogle=!1})}function m(){l.updateTitle(k.project.title,k.project._id).then(function(e){k.project.slug=e,s.success("Project updated")})["catch"](function(){s.error("Can not update project")})["finally"](function(){k.titleIsLoading=!1})}function _(){k.projectPublicityIsLoading=!0,l.updatePublicAccess(k.project["public"],k.project._id).then(function(e){s.success("Project publicity updated")})["catch"](function(){s.error("Can not update project")})["finally"](function(){k.projectPublicityIsLoading=!1})}function v(){k.projectCanListInPortfolioLoading=!0,l.updateCanListInPortfolio(k.project.in_portfolio,k.project._id).then(function(e){s.success("Project updated")})["catch"](function(){s.error("Can not update project")})["finally"](function(){k.projectCanListInPortfolioLoading=!1})}function y(e){"input"==e?(o.cancel(j),j=o(function(){k.project.password.string.length>5?b():s.error("You have entered less than 6 characters for password")},1500)):b()}function b(){k.isUpdatingPassword=!0,l.updatePasswordProject(k.project.password,k.project._id).then(function(e){s.success("Project updated")})["catch"](function(){s.error("Can not update project")})["finally"](function(){k.isUpdatingPassword=!1})}function w(){var e=k.project._id;s.confirm("Are you sure? All data will be lost").then(function(){l.remove(e).then(function(e){1==e.data.status?n.go("index"):s.error("Can not delete project")},function(e){console.log(e),s.error("Can not delete project")})})}var k=this;k.cancel=function(){a.dismiss("cancel")};var j,x;if(r.setTitle(e.project.title),k.deleteProject=w,k.titleIsLoading=!1,k.settingIsLoading=!1,k.project=e.project,k.project["public"]=angular.isDefined(k.project["public"])?k.project["public"]:1,k.project.in_portfolio=angular.isDefined(k.project.in_portfolio)?k.project.in_portfolio:1,k.project.shareUrl=i("shareUrl")(k.project.slug),k.updateProject=g,k.updateGoogleProject=d,k.updatePublicAccess=_,k.updateCanListInPortfolio=v,k.updatePasswordProject=y,k.openMediaAssetLib=u,k.deleteSnapshot=p,angular.isUndefined(k.project.meta)||0==k.project.meta.length){k.project.meta={};var S=angular.fromJson(angular.toJson(k.project));k.project.meta.title=S.title,S.scenes.length&&!k.project.meta.image&&(k.project.meta.image=S.scenes[0].pano_thumb)}f(),k.isDeletingSnapshot=!1,e.$watch("pcmVm.project.title",function(e,t){e!=t&&(x&&o.cancel(x),x=o(function(){k.titleIsLoading=!0,m()},1e3))})}e.$inject=["$scope","ngMeta","$uibModal","$compile","$state","$rootScope","$timeout","$stateParams","envService","Alertify","project","Scene","lptSphere","Hotspot","LptHelper","user"],t.$inject=["$scope","$rootScope","$timeout","$state","$filter","$uibModalInstance","ngMeta","Alertify","CONST","Project"],angular.module("lapentor.app").controller("ProjectEditorCtrl",e).controller("ProjectConfigModalCtrl",t)}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditableArticle",["$compile",function(e){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditableArticleCtrl"}}])}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditableImage",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditableImageCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditable",["$compile",function(e){return{restrict:"E",controllerAs:"vm",scope:{project:"=",hotspots:"=",hotspot:"=",scenes:"=",scenesphereinstance:"=",currentscene:"="},controller:"HotspotEditableCtrl",link:function(t,o,n){function i(){var n="hotspot-editable-"+t.hotspot.type,i="<"+n+"></"+n+">";o.empty(),o.append(e(i)(t))}t.$watch("hotspots.length",function(e,t){i()}),i()}}}])}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditablePoint",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditablePointCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditableSound",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditableSoundCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditableTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditableTextfCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditableUrl",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditableUrlCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("hotspotEditableVideo",function(){return{restrict:"E",templateUrl:"modules/lapentor.app/views/partials/hotspoteditable.html",controller:"HotspotEditableVideoCtrl"}})}(),function(){"use strict";angular.module("lapentor.app").directive("fluidLoading",function(){return{restrict:"E",replace:!0,templateUrl:"modules/fluidloading.html",link:function(e,t,o){e.type=o.type,e.text=o.text}}})}(),function(){"use strict";angular.module("lapentor.app").directive("resolveLoader",["$rootScope","$timeout","$interval",function(e,t,o){return{restrict:"E",replace:!0,templateUrl:"modules/loading.html",link:function(o,n){e.$on("$stateChangeStart",function(e,o,i){t(function(){n.removeClass("ng-hide")})}),e.$on("$stateChangeSuccess",function(){t(function(){n.addClass("ng-hide")})})},controller:function(){var t=this,o=["Loading your experiences...","Getting things ready...","This take quite long huh...but don't leave us :(","Wow, this is really slow, would you like a joke","Knock knock...","Who's there?","Hi, this is Lapentor","That's all :P"],n=["audio","ball-triangle","bars","circles","grid","hearts","oval","puff-dark","puff","rings","spinning-circles","tail-spin","three-dots"];t.isDead=!1,t.selectedText=o[0],t.isLoading=!0,t.loadingIcon=n[6],e.$on("$stateChangeSuccess",function(){}),e.$on("$stateChangeError",function(){t.isDead=!0,t.selectedText="Hmm...Please refresh your browser to try again...",t.isLoading=!1})},controllerAs:"vm"}}])}(),function(){"use strict";angular.module("lapentor.app").directive("simpleLoading",function(){return{restrict:"E",replace:!0,template:'<div class="loading theme-bg-opacity"><img src="bower_components/SVG-Loaders/svg-loaders/{{ icon }}.svg" height="30"></div>',link:function(e,t,o){o.icon?e.icon=o.icon:e.icon="oval"}}})}(),function(){"use strict";function e(e,t,o,n){function i(){a.isUpdating=!0,e.$parent.updateConfig(o,a.project.theme_controlbar.config,function(){a.isUpdating=!1})}var a=this;a.item=o,a.project=t,a.isUpdating=!1,a.updateConfig=i,a.closeModal=n.dismiss,a.config=a.project.theme_controlbar.config,a.config.position="top"}e.$inject=["$scope","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("controlbarCrystalConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("controlbarCrystal",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/controlbar/crystal/tpl/template.html",controllerAs:"vm",controller:["$scope","$timeout","Marketplace","$rootScope","$window",function(e,t,o,n,i){var a=this;a.project=e.project,a.availableButtons=o.getPluginButtons(a.project.plugins),a.config=a.project.theme_controlbar.config,a.config.position=a.config.position||"top";try{a.themeStyle={"background-color":a.config.bg_color}}catch(r){a.themeStyle={}}n.$on("evt.onsphereclick",function(){$("#controlbar-crystal").hasClass("off")?(n.isScenelistOff=!1,$("#controlbar-crystal").removeClass("off")):($("#controlbar-crystal").addClass("off"),n.isScenelistOff=!0)}),(isMobile.any||i.innerWidth<=640)&&t(function(){jQuery("#controlbar-crystal>ul").mCustomScrollbar({axis:"top"==a.config.position||"bottom"==a.config.position?"x":"y",advanced:{autoExpandHorizontalScroll:"x"}})},500)}]}})}(),function(){"use strict";function e(e,t,o,n){function i(){a.isUpdating=!0,e.$parent.updateConfig(o,a.project.theme_controlbar.config,function(){a.isUpdating=!1})}var a=this;a.item=o,a.project=t,a.isUpdating=!1,a.updateConfig=i,a.closeModal=n.dismiss}e.$inject=["$scope","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("controlbarDefaultConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("controlbarDefault",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/controlbar/default/tpl/template.html",controllerAs:"vm",controller:["$scope","$timeout","$window","Marketplace",function(e,t,o,n){function i(){(isMobile.any||o.innerWidth<=640)&&t(function(){
jQuery("#controlbar-default>ul").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:"x"}})},500)}var a=this;a.project=e.project,a.availableButtons=n.getPluginButtons(a.project.plugins),a.config=a.project.theme_controlbar.config,i();try{a.themeStyle={"background-color":a.config.bg_color}}catch(r){a.themeStyle={}}}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(){r.isUpdating=!0,e.$parent.updateConfig(n,r.config,function(){r.isUpdating=!1})}var r=this;r.item=n,r.project=o,r.config=r.project.theme_controlbar.config,r.isUpdating=!1,r.updateConfig=a,r.closeModal=i.dismiss,i.opened.then(function(){t(function(){e.$broadcast("rzSliderForceRender")})});try{r.config.angle=r.config.angle?r.config.angle:180,r.config.distance=r.config.distance?r.config.distance:160,r.config.position=r.config.position?r.config.position:"bottom"}catch(s){console.log(s)}}e.$inject=["$scope","$timeout","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("controlbarGooeyConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("controlbarGooey",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/controlbar/gooey/tpl/template.html",controllerAs:"vm",controller:["$scope","$timeout","Marketplace","$ocLazyLoad",function(e,t,o,n){var i=this;i.project=e.project,i.config=i.project.theme_controlbar.config,i.availableButtons=o.getPluginButtons(i.project.plugins),e.initDefaultConfig(i.config,{distance:120,angle:180,bg_color:"#fff",toggle_icon_color:"#000",position:"bottom",open_on_start:1}),n.load("modules/lapentor.marketplace/themes/controlbar/gooey/lib/TweenMax.min.js").then(function(){function e(e){TweenMax.to(jQuery("#controlbar-gooey .menu-toggle-icon"),.4,{rotation:l?0:45,ease:Quint.easeInOut,force3D:!0}),l?o():t()}function t(){l=!0,jQuery("#controlbar-gooey .menu-item").each(function(e){var t=.08*e,o=jQuery(this).children(".menu-item-bounce");TweenMax.fromTo(o,.2,{transformOrigin:"50% 50%"},{delay:t,scaleX:.8,scaleY:1.2,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,.15,{scaleY:.7,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,3,{scaleY:.8,force3D:!0,ease:Elastic.easeOut,easeParams:[1.1,.12]})}})}}),TweenMax.to(jQuery(this).children(".menu-item-button"),.5,{delay:t,y:r,force3D:!0,ease:Quint.easeInOut})}),jQuery("#controlbar-gooey .menu-items").removeClass("closed")}function o(){0!=l&&(l=!1,jQuery("#controlbar-gooey .menu-toggle-icon").css("transform","rotate("+(l?45:0)+"deg)"),jQuery("#controlbar-gooey .menu-item").each(function(e){var t=.08*e,o=jQuery(this).find(".menu-item-bounce");TweenMax.fromTo(o,.2,{transformOrigin:"50% 50%"},{delay:t,scaleX:1,scaleY:.8,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,.15,{scaleY:1.2,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,3,{scaleY:1,force3D:!0,ease:Elastic.easeOut,easeParams:[1.1,.12]})}})}}),TweenMax.to(jQuery(this).find(".menu-item-button"),.3,{delay:t,y:0,force3D:!0,ease:Quint.easeIn})}),jQuery("#controlbar-gooey .menu-items").addClass("closed"))}var n=jQuery("#controlbar-gooey .menu-item").length,a=i.config.angle,r=i.config.distance,s=180+-a/2,c=a/(n-1);switch(i.config.position){case"top":s=180+a/2;break;case"right":s=90+-a/2;break;case"left":s=-90+-a/2}TweenMax.globalTimeScale(.8),jQuery("#controlbar-gooey .menu-item").each(function(e){var t=s+c*e;jQuery(this).css({transform:"rotate("+t+"deg)"}),jQuery(this).find(".menu-item-icon").css({transform:"rotate("+-t+"deg)"})});var l=1==i.config.open_on_start;1==i.config.open_on_start&&t(),jQuery("#controlbar-gooey .menu-toggle-button").mousedown(function(){TweenMax.to(jQuery("#controlbar-gooey .menu-toggle-icon"),.1,{scale:.65})}),jQuery(document).mouseup(function(){TweenMax.to(jQuery("#controlbar-gooey .menu-toggle-icon"),.1,{scale:1})}),jQuery(document).on("touchend",function(){jQuery(document).trigger("mouseup")}),jQuery("#controlbar-gooey .menu-toggle-button").on("mousedown",e),jQuery("#controlbar-gooey .menu-toggle-button").on("touchstart",function(e){jQuery(this).trigger("mousedown"),e.preventDefault(),e.stopPropagation()}),jQuery("#controlbar-gooey .menu-toggle-icon").css("transform","rotate("+(l?45:0)+"deg)"),i.closeMenu=o});try{i.themeStyle={"background-color":i.project.theme_controlbar.config.bg_color}}catch(a){i.themeStyle={}}}]}})}(),function(){"use strict";function e(e,t,o,n,i,a){function r(){s.isUpdating=!0,e.$parent.updateConfig(n,s.project.theme_controlbar.config,function(){s.isUpdating=!1})}var s=this;s.item=n,s.project=o,s.config=s.project.theme_controlbar.config,s.config.bg_color=s.config.bg_color?s.config.bg_color:{},s.isUpdating=!1,s.availableButtons=a.getPluginButtons(s.project.plugins,!1),s.updateConfig=r,s.closeModal=i.dismiss}e.$inject=["$scope","LptHelper","project","item","$uibModalInstance","Marketplace"],angular.module("lapentor.marketplace.themes").controller("controlbarSlashConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("controlbarSlash",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/controlbar/slash/tpl/template.html",controllerAs:"vm",controller:["$scope","$timeout","$window","Marketplace",function(e,t,o,n){var i=this;i.project=e.project,i.config=i.project.theme_controlbar.config,i.availableButtons=n.getPluginButtons(i.project.plugins);try{i.themeStyle={"background-color":i.config.bg_color},i.minimize=!!i.config.minimize&&i.config.minimize}catch(a){i.themeStyle={}}}]}})}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){l.isUpdating=!0,e.$parent.updateConfig(r,l.config,function(){l.isUpdating=!1,t.reload()})}var l=this;l.item=r,l.project=a,l.config=l.project.theme_hotspot.config?l.project.theme_hotspot.config:{},l.isUpdating=!1,l.updateConfig=c,l.closeModal=s.dismiss;try{l.config.show_title=l.config.show_title?l.config.show_title:"no",l.config.bg_color=l.config.bg_color?l.config.bg_color:"#ffcd00",l.config.text_color=l.config.text_color?l.config.text_color:"#000"}catch(p){console.log(p)}}e.$inject=["$scope","$state","$rootScope","$timeout","Hotspot","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("hotspotBubbleConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotBubble",["$compile","LptHelper",function(e,t){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/bubble/tpl/bubble.html",link:function(o,n,i){function a(t){var i="hotspot-"+t+"-"+o.hotspot.type,a="<"+i+"></"+i+">";n.append(e(a)(o))}o.config=o.project.theme_hotspot.config||{},"point"==o.hotspot.type&&(o.targetScene=t.getObjectBy("_id",o.hotspot.target_scene_id,o.project.scenes));try{o.config.arrow_color={"border-top":"13px solid "+o.config.bg_color},o.hotspot.height=o.hotspot.height?o.hotspot.height:o.hotspot.width,o.hotspot.margin_top=-(o.hotspot.height/2-25),o.hotspot.margin_left=-(o.hotspot.width/2-25)}catch(r){console.log(r)}a(o.project.theme_hotspot.slug)},controllerAs:"vm",controller:["$scope",function(e){var t=this;t.project=e.project,t.hotspot=e.hotspot}]}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){l.isUpdating=!0,e.$parent.updateConfig(r,l.config,function(){l.isUpdating=!1,t.reload()})}var l=this;l.item=r,l.project=a,l.config=l.project.theme_hotspot.config?l.project.theme_hotspot.config:{},l.isUpdating=!1,l.updateConfig=c,l.closeModal=s.dismiss;try{l.config.show_title=l.config.show_title?l.config.show_title:"yes",l.config.bg_color=l.config.bg_color?l.config.bg_color:"rgba(255,255,255,0)",l.config.text_color=l.config.text_color?l.config.text_color:"#FFF",l.config.width=50}catch(p){console.log(p)}}e.$inject=["$scope","$state","$rootScope","$timeout","Hotspot","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("hotspotCrystalConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotCrystal",["$compile","LptHelper",function(e,t){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/crystal/tpl/crystal.html",link:function(o,n,i){function a(t){var i="hotspot-"+t+"-"+o.hotspot.type,a="<"+i+"></"+i+">";n.append(e(a)(o))}o.config=o.project.theme_hotspot.config||{},"point"==o.hotspot.type&&(o.targetScene=t.getObjectBy("_id",o.hotspot.target_scene_id,o.project.scenes));try{o.config.arrow_color={"border-top":"13px solid "+o.config.bg_color},o.hotspot.height=o.hotspot.height?o.hotspot.height:o.hotspot.width,o.hotspot.margin_top=-(o.hotspot.height/2-25),o.hotspot.margin_left=-(o.hotspot.width/2-25)}catch(r){console.log(r)}a(o.project.theme_hotspot.slug)},controllerAs:"vm",controller:["$scope",function(e){var t=this;t.project=e.project,t.hotspot=e.hotspot}]}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){l.isUpdating=!0,e.$parent.updateConfig(r,l.config,function(){l.isUpdating=!1,t.reload()})}var l=this;l.item=r,l.project=a,l.config=l.project.theme_hotspot.config?l.project.theme_hotspot.config:{},l.isUpdating=!1,l.updateConfig=c,l.closeModal=s.dismiss}e.$inject=["$scope","$state","$rootScope","$timeout","Hotspot","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("hotspotDefaultConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotDefault",["$compile",function(e){return{restrict:"E",link:function(t,o,n){function i(n){var i="hotspot-"+n+"-"+t.hotspot.type,a="<"+i+"></"+i+">";o.empty(),o.append(e(a)(t))}function a(e){t.lptsphereinstance.set("textstyle",{name:"default_tooltip_style",font:"Arial",fontsize:"13",bold:"true",roundedge:"4",background:"false",border:"false",textcolor:"0xFFFFFF",textalign:"center",vcenter:"true",edge:"bottom",xoffset:"0",yoffset:"0",padding:"10",textshadow:"1.0",textshadowrange:"10.0",textshadowangle:"0",textshadowcolor:"0x000000",textshadowalpha:"1.0"}),t.lptsphereinstance.addHotspotEventCallback(e.name,"onhover","showtext("+e.title+', "default_tooltip_style")')}i(t.project.theme_hotspot.slug),a(t.hotspot)},controllerAs:"vm",controller:["$scope",function(e){var t=this;t.config=e.project.theme_hotspot.config,e.config=t.config}]}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){l.isUpdating=!0,e.$parent.updateConfig(r,l.config,function(){l.isUpdating=!1,t.reload()})}var l=this;l.item=r,l.project=a,l.config=l.project.theme_hotspot.config?l.project.theme_hotspot.config:{},l.isUpdating=!1,l.updateConfig=c,l.closeModal=s.dismiss}e.$inject=["$scope","$state","$rootScope","$timeout","Hotspot","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("hotspotGifyConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGify",["$compile","LptHelper",function(e,t){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/gify/tpl/gify.html",link:function(o,n,i){function a(t){var i="hotspot-"+t+"-"+o.hotspot.type,a="<"+i+"></"+i+">";n.append(e(a)(o))}"point"==o.hotspot.type&&(o.targetScene=t.getObjectBy("_id",o.hotspot.target_scene_id,o.project.scenes)),a(o.project.theme_hotspot.slug)},controllerAs:"vm",controller:["$scope",function(e){var t=this;t.config=e.project.theme_hotspot.config,e.config=t.config,t.hotspot=e.hotspot,t.project=e.project}]}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s){function c(){l.isUpdating=!0,e.$parent.updateConfig(r,l.config,function(){l.isUpdating=!1,t.reload()})}var l=this;l.item=r,l.project=a,l.config=l.project.theme_hotspot.config?l.project.theme_hotspot.config:{},l.isUpdating=!1,l.updateConfig=c,l.closeModal=s.dismiss}e.$inject=["$scope","$state","$rootScope","$timeout","Hotspot","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("hotspotGradyConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGrady",["$compile",function(e){return{restrict:"E",link:function(t,o,n){function i(n){var i="hotspot-"+n+"-"+t.hotspot.type,a="<"+i+"></"+i+">";o.empty(),o.append(e(a)(t))}function a(e){t.lptsphereinstance.set("textstyle",{name:"default_tooltip_style",font:"Arial",fontsize:"13",bold:"true",roundedge:"4",background:"false",border:"false",textcolor:"0xFFFFFF",textalign:"center",vcenter:"true",edge:"bottom",xoffset:"0",yoffset:"0",padding:"10",textshadow:"1.0",textshadowrange:"10.0",textshadowangle:"0",textshadowcolor:"0x000000",textshadowalpha:"1.0"}),t.lptsphereinstance.addHotspotEventCallback(e.name,"onhover","showtext("+e.title+', "default_tooltip_style")')}i(t.project.theme_hotspot.slug),a(t.hotspot)}}}])}(),function(){"use strict";function e(e,t,o,n,i,a,r,s,c){function l(){p.isUpdating=!0,e.$parent.updateConfig(s,p.config,function(){p.isUpdating=!1,t.reload()})}var p=this;p.item=s,p.project=r,p.config=p.project.theme_hotspot.config?p.project.theme_hotspot.config:{},p.isUpdating=!1,p.updateConfig=l,p.closeModal=c.dismiss;try{p.config.bg_color=p.config.bg_color?p.config.bg_color:"#023a78",p.config.text_color=p.config.text_color?p.config.text_color:"#ffffff"}catch(f){console.log(f)}}e.$inject=["$scope","$state","$rootScope","Alertify","$timeout","Hotspot","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("hotspotRoyalConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotRoyal",["$compile","LptHelper",function(e,t){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/royal/tpl/royal.html",link:function(t,o,n,i){function a(n){var i="hotspot-"+n+"-"+t.hotspot.type,a="<"+i+"></"+i+">";o.append(e(a)(t))}a(t.project.theme_hotspot.slug),t.hotspot.height=t.hotspot.height?t.hotspot.height:t.hotspot.width,t.hotspot.margin_top=4,t.hotspot.margin_left=4},controllerAs:"vm",controller:["$scope",function(e){var o=this;o.config=e.project.theme_hotspot.config,e.config=o.config,o.hotspot=e.hotspot,o.project=e.project,"point"==o.hotspot.type&&(o.targetScene=t.getObjectBy("_id",o.hotspot.target_scene_id,o.project.scenes));try{o.hotspot.icon_custom&&(o.config.hotspot_style={width:o.hotspot.width,height:o.hotspot.width,"background-image":"url("+o.hotspot.icon_custom+")"}),o.config.main_color={"background-color":o.config.bg_color},o.config.text_style={color:o.config.text_color},o.config.arrow_color={"border-top-color":o.config.bg_color}}catch(n){console.log(n)}}]}}])}(),function(){"use strict";function e(e,t,o,n,i,a){function r(e){e.mime_type.indexOf("image")!=-1&&(c.config.logo=e.path,s())}function s(){c.isUpdating=!0,e.$parent.updateConfig(n,c.config,function(){c.isUpdating=!1})}var c=this;c.project=o,c.isUpdating=!1,c.updateConfig=s,c.closeModal=i.dismiss,c.config=c.project.theme_scenelist.config,c.config.position=c.config.position||"center",c.config.bg_color=c.config.bg_color||"rgba(255,255,255,1)",c.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:r,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance","LptHelper"],angular.module("lapentor.marketplace.themes").controller("scenelistBreaklineConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistBreakline",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/breakline/tpl/template.html",controllerAs:"vm",controller:["$scope","$timeout","$rootScope",function(e,t,o){function n(e){o.$emit("evt.livesphere.changescene",e)}var i=this;e.$parent;i.project=e.project;var a=i.project.theme_scenelist.config;i.position=a.position||"center",e.$watch("scene",function(e,t){i.currentscene=e}),i.scenes=e.project.scenes,i.groups=e.project.groups,i.themeStyle={"background-color":a.bg_color},i.onMouseover=function(e){i.groupHoverClass="group-hover",t(function(){angular.element(e.currentTarget).css("background-color",a.bg_color)})},i.onMouseleave=function(){angular.element(".group-hover").css("background-color","initial"),i.groupHoverClass=""},i.toggleScenelistClass=function(){i.isToggle=!i.isToggle},i.changeScene=n}]}})}(),function(){"use strict";function e(e,t,o,n,i,a){function r(e){e.mime_type.indexOf("image")!=-1&&(c.config.logo=e.path,s())}function s(){c.isUpdating=!0,e.$parent.updateConfig(n,c.config,function(){c.isUpdating=!1})}var c=this;c.project=o,c.isUpdating=!1,c.updateConfig=s,c.closeModal=i.dismiss,c.config=c.project.theme_scenelist.config,c.config.position=c.config.position||"bottom",c.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:r,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance","LptHelper"],angular.module("lapentor.marketplace.themes").controller("scenelistCrystalConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistCrystal",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/crystal/tpl/template.html",controllerAs:"vm",controller:["$scope","$rootScope","$window","$timeout",function(e,t,o,n){function i(e){t.$emit("evt.livesphere.changescene",e)}function a(){n(function(){jQuery("#scenelist-crystal-scroll-wrapper .tab-nav").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:"x"},callbacks:{onOverflowX:function(){console.log("onOverflowX")}}})},500)}var r=this;e.$parent;r.initScrollbar=a,r.project=e.project,r.config=r.project.theme_scenelist.config,r.scenes=e.project.scenes,r.groups=e.project.groups,r.config.position=r.config.position||"bottom",r.isOpenGroupList=!1,r.showAll=!1,r.allScenes={},angular.forEach(r.groups,function(e){angular.extend(r.allScenes,r.allScenes,e.scenes)}),a(),e.$watch("scene",function(e,t){r.currentscene=e});try{r.currentGroup=r.groups[0]}catch(s){console.log(s)}r.changeScene=i,t.$on("evt.onsphereclick",function(){$("#scenelist-crystal").hasClass("off")?(r.isOpenGroupList=!1,$("#scenelist-crystal").removeClass("off")):(r.isOpenGroupList=!1,$("#scenelist-crystal").addClass("off"))}),r.toggleGroupList=function(){r.isOpenGroupList=!r.isOpenGroupList}}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(e){e.mime_type.indexOf("image")!=-1&&(c.config.logo=e.path,s())}function r(e){switch(c.config.position_type=e,e){case"fixed":delete c.config.offset_top,delete c.config.offset_left,delete c.config.offset;break;case"custom":delete c.config.position}}function s(){"fixed"==c.config.theme_type?(delete c.config.bg_color,delete c.config.text_color):delete c.config.theme,c.isUpdating=!0,e.$parent.updateConfig(n,c.config,function(){c.isUpdating=!1})}var c=this;c.project=o,c.config=c.project.theme_scenelist.config||{},c.isUpdating=!1,c.updateConfig=s,c.closeModal=i.dismiss,c.choosePositionType=r;try{c.config.offset_top?c.config.position_type="custom":c.config.position_type=c.config.position_type||"fixed",c.config.position=c.config.position||"top-right",c.config.is_minimize=c.config.is_minimize||0,c.config.minimize_clickoutside=c.config.minimize_clickoutside||1,c.config.bg_color=c.config.bg_color||"#ffffff",c.config.theme_type=c.config.theme_type||"fixed",c.config.theme=c.config.theme||"light"}catch(l){console.log(l)}c.screenshotS3Path="https://s3.amazonaws.com/lapentor-sphere/screenshots/themes/scenelist/default/",c.isToggle=c.config.is_minimize=!0,c.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:a,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("scenelistDefaultConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistDefault",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/default/tpl/template.html",controllerAs:"vm",controller:["$scope","$window","$rootScope","$timeout",function(e,t,o,n){function i(){c.isToggle=!c.isToggle,s()}function a(){1==c.config.minimize_clickoutside&&(c.isToggle=!0)}function r(e){o.$emit("evt.livesphere.changescene",e)}function s(){var e="y";(isMobile.any||t.innerWidth<=640)&&c.config.sticky_bottom&&(e="x"),n(function(){jQuery("#scenelist-ghost .group-list").mCustomScrollbar("destroy"),n(function(){jQuery("#scenelist-ghost .group-list").mCustomScrollbar({axis:e,advanced:{autoExpandHorizontalScroll:"x"}})},500)},500)}var c=this,l=(e.$parent,e.ScenelistHelper);c.isToggle=!1,c.project=e.project,c.config=l.getConfig(),e.$watch("scene",function(e,t){c.currentscene=e}),c.scenes=e.project.scenes,c.groups=e.project.groups,c.featuredColor=c.config.active_scene_bg_color,c.changeScene=r,c.minimizeWhenClickOutside=a,c.toggleMenu=i;try{"1"!=c.config.is_minimize||c.config.sticky_bottom||(c.isToggle=!0),c.themeStyle={background:c.config.bg_color,color:c.config.text_color,left:c.config.offset_left+"px",top:c.config.offset_top+"px"},angular.isDefined(c.config.offset_left)&&(c.themeStyle.right="auto"),n(function(){angular.element("#scenelist-ghost .group-list li.active").css("background",c.config.active_scene_bg_color)})}catch(p){console.log(p)}jQuery(window).resize(function(){s()})}]}})}(),function(){"use strict";function e(e,t,o,n,i,a){function r(e){e.mime_type.indexOf("image")!=-1&&(c.config.logo=e.path,s())}function s(){c.isUpdating=!0,e.$parent.updateConfig(n,c.config,function(){c.isUpdating=!1})}var c=this;c.project=o,c.isUpdating=!1,c.updateConfig=s,c.closeModal=i.dismiss,c.config=c.project.theme_scenelist.config,c.config.is_minimize=c.config.is_minimize||0,c.config.minimize_clickoutside=c.config.minimize_clickoutside||1,c.config.position=c.config.position||"top",c.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:r,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance","LptHelper"],angular.module("lapentor.marketplace.themes").controller("scenelistElegantzConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistElegantz",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/elegantz/tpl/template.html",controllerAs:"vm",controller:["$scope","$rootScope","$window","$timeout","$ocLazyLoad",function(e,t,o,n,i){function a(e){t.$emit("evt.livesphere.changescene",e)}function r(){n(function(){jQuery("#scenelist-elegantz-scroll-wrapper .tab-nav").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:"x"}})},500),(isMobile.any||o.innerWidth<=640)&&n(function(){jQuery("#scenelist-elegantz .group-titles").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:"x"}})},500)}function s(){1==c.config.minimize_clickoutside&&(c.isSmall=!0)}var c=this;e.$parent;c.isSmall=!1,c.initScrollbar=r,c.project=e.project,c.config=c.project.theme_scenelist.config,c.config.position=c.config.position||"top",c.config.is_minimize=c.config.is_minimize||0,c.config.minimize_clickoutside=c.config.minimize_clickoutside||1,c.scenes=e.project.scenes,c.groups=e.project.groups,r(),1==c.config.is_minimize?c.isSmall=!0:c.isSmall=!1,e.$watch("scene",function(e,t){c.currentscene=e});try{c.currentGroup=c.groups[0]}catch(l){console.log(l)}c.changeScene=a,c.minimizeWhenClickOutside=s}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(e){e.mime_type.indexOf("image")!=-1&&(s.config.logo=e.path,r())}function r(){s.isUpdating=!0,e.$parent.updateConfig(n,s.config,function(){s.isUpdating=!1})}var s=this;s.project=o,s.config=s.project.theme_scenelist.config,s.isUpdating=!1,s.closeModal=i.dismiss,s.config.color=s.config.color||"#A1905D",s.config.is_minimize=s.config.is_minimize||0,s.updateConfig=r,s.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:a,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("scenelistRoyalConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistRoyal",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/royal/tpl/template.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout","LptHelper",function(e,t,o,n){function i(e){o(function(){jQuery("#lpt-group-"+e).height(35+32*jQuery("#lpt-group-"+e).find("li").length).toggleClass("minimized")})}function a(){var e=n.getPrevScene(l.currentscene,l.project);e&&s(e)}function r(){var e=n.getNextScene(l.currentscene,l.project);e&&s(e)}function s(e){t.$emit("evt.livesphere.changescene",e)}function c(){(angular.isUndefined(l.config.minimize_clickoutside)||1==l.config.minimize_clickoutside)&&(l.isToggle=!0)}var l=this,p=(e.$parent,e.ScenelistHelper);l.project=e.project,l.config=p.getConfig(),l.minimizedGroups=[],l.isToggle=!1,l.allGroupIsEmpty=p.allGroupIsEmpty,e.$watch("scene",function(e,t){l.currentscene=e}),l.scenes=e.project.scenes,l.groups=e.project.groups,l.changeScene=s,l.nextScene=r,l.minimizeWhenClickOutside=c,l.prevScene=a,l.toggleGroup=i;try{1==l.config.is_minimize?l.isToggle=!1:l.isToggle=!0,l.config.color=l.config.color?l.config.color:"#A1905D"}catch(f){console.log(f)}if(1==l.config.is_minimize_group)for(var u=l.groups.length-1;u>=0;u--)l.minimizedGroups.push({id:l.groups[u]._id,toggle:!0})}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(e){e.mime_type.indexOf("image")!=-1&&(s.config.logo=e.path,r())}function r(){"fixed"==s.config.theme_type?delete s.config.bg_color:delete s.config.theme,s.isUpdating=!0,e.$parent.updateConfig(n,s.project.theme_scenelist.config,function(){s.isUpdating=!1})}var s=this;s.project=o,s.isUpdating=!1,s.updateConfig=r,s.closeModal=i.dismiss,s.config=s.project.theme_scenelist.config,s.config.theme_type=s.config.theme_type||"fixed",s.config.theme=s.config.theme||"light",s.config.is_minimize=s.config.is_minimize||0,s.config.position=s.config.position||"right",s.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:a,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("scenelistThewallConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistThewall",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/thewall/tpl/template.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){function n(){r.isToggle=!r.isToggle}function i(e){t.$emit("evt.livesphere.changescene",e)}function a(){1==r.config.minimize_clickoutside&&(r.isToggle=!1)}var r=this,s=(e.$parent,e.ScenelistHelper),c=s.getConfig();r.project=e.project,r.scenes=e.project.scenes,r.groups=e.project.groups,r.config=c,r.allGroupIsEmpty=!0,angular.forEach(r.groups,function(e){if(e.scenes.length)return void(r.allGroupIsEmpty=!1)}),r.toggleScenelistClass=n,r.minimizeWhenClickOutside=a,r.changeScene=i,e.$watch("scene",function(e,t){r.currentscene=e}),1==r.config.is_minimize?r.isToggle=!1:r.isToggle=!0,r.listStyle={"background-color":c.bg_color}}]}})}(),function(){"use strict";function e(e,t,o,n,i){function a(e){e.mime_type.indexOf("image")!=-1&&(s.config.logo=e.path,r())}function r(){"fixed"==s.config.theme_type?delete s.config.bg_color:delete s.config.theme,s.isUpdating=!0,e.$parent.updateConfig(n,s.project.theme_scenelist.config,function(){s.isUpdating=!1})}var s=this;s.project=o,s.isUpdating=!1,s.updateConfig=r,s.closeModal=i.dismiss,s.config=s.project.theme_scenelist.config,s.config.is_minimize=s.config.is_minimize||0,s.config.menu_position=s.config.menu_position||"top",s.config.featured_color=s.config.featured_color||"#6cccff",s.openMediaLib=function(){t.$broadcast("evt.openMediaLib",{tab:"asset",chooseAssetCallback:a,canChooseMultipleFile:!1})}}e.$inject=["$scope","$rootScope","project","item","$uibModalInstance"],angular.module("lapentor.marketplace.themes").controller("scenelistTrembleConfigCtrl",e)}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("scenelistTremble",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/scenelist/tremble/tpl/template.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout","$ocLazyLoad","$window",function(e,t,o,n,i){function a(){l.isToggle=!l.isToggle}function r(e){t.$emit("evt.livesphere.changescene",e),l.toggleScenelist("close")}function s(){1==l.config.minimize_clickoutside&&(l.isToggle=!1)}function c(e){e?"close"==e?l.isScenelistOpen=!1:l.isScenelistOpen=!0:l.isScenelistOpen=!l.isScenelistOpen}var l=this,p=(e.$parent,e.ScenelistHelper),f=p.getConfig();l.config=f,l.project=e.project,l.scenes=e.project.scenes,l.groups=e.project.groups,l.config.featured_color=l.config.featured_color||"#6cccff",l.isScenelistOpen=0==l.config.is_minimize||!1,l.allGroupIsEmpty=!0,angular.forEach(l.groups,function(e){if(e.scenes.length)return void(l.allGroupIsEmpty=!1)}),l.toggleScenelistClass=a,l.minimizeWhenClickOutside=s,l.changeScene=r,l.toggleScenelist=c,e.$watch("scene",function(e,t){l.currentscene=e}),1==l.config.is_minimize?l.isToggle=!1:l.isToggle=!0,l.listStyle={"background-color":f.bg_color},n.load(["bower_components/scenelist-tremble-lib/charming.min.js","bower_components/scenelist-tremble-lib/anime.min.js","bower_components/scenelist-tremble-lib/ama.js"]),o(function(){jQuery("#scenelist-tremble .scroller").mCustomScrollbar({axis:"y"})})}]}})}(),function(){"use strict";var e="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(e._gsQueue||(e._gsQueue=[])).push(function(){e._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,o){var n=function(e){var t,o=[],n=e.length;for(t=0;t!==n;o.push(e[t++]));return o},i=function(e,t,n){o.call(this,e,t,n),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=i.prototype.render},a=1e-10,r=o._internals,s=r.isSelector,c=r.isArray,l=i.prototype=o.to({},.1,{}),p=[];i.version="1.15.1",l.constructor=i,l.kill()._gc=!1,i.killTweensOf=i.killDelayedCallsTo=o.killTweensOf,i.getTweensOf=o.getTweensOf,i.lagSmoothing=o.lagSmoothing,i.ticker=o.ticker,i.render=o.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),o.prototype.invalidate.call(this)},l.updateTo=function(e,t){var n,i=this.ratio,a=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(n in e)this.vars[n]=e[n];if(this._initted||a)if(t)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&o._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var r=this._time;this.render(0,!0,!1),this._initted=!1,this.render(r,!0,!1)}else if(this._time>0||a){this._initted=!1,this._init();for(var s,c=1/(1-i),l=this._firstPT;l;)s=l.s+l.c,l.c*=c,l.s=s-l.c,l=l._next}return this},l.render=function(e,t,o){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,i,s,c,l,f,u,h,g=this._dirty?this.totalDuration():this._totalDuration,d=this._time,m=this._totalTime,_=this._cycle,v=this._duration,y=this._rawPrevTime;if(e>=g?(this._totalTime=g,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,i="onComplete"),0===v&&(this._initted||!this.vars.lazy||o)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>y||y===a)&&y!==e&&(o=!0,y>a&&(i="onReverseComplete")),
this._rawPrevTime=h=!t||e||y===e?e:a)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&y>0&&y!==a)&&(i="onReverseComplete",n=this._reversed),0>e&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||o)&&(y>=0&&(o=!0),this._rawPrevTime=h=!t||e||y===e?e:a)),this._initted||(o=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(c=v+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,f=this._easeType,u=this._easePower,(1===f||3===f&&l>=.5)&&(l=1-l),3===f&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),this.ratio=1===f?1-l:2===f?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),d===this._time&&!o&&_===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||p)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!o&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=d,this._totalTime=m,this._rawPrevTime=y,this._cycle=_,r.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/v):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==d&&e>=0&&(this._active=!0),0===m&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,o):i||(i="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||p))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,o),t||(this._totalTime!==m||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||p)),this._cycle!==_&&(t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||p)),i&&(!this._gc||o)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,o),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||p),0===v&&this._rawPrevTime===a&&h!==a&&(this._rawPrevTime=0))},i.to=function(e,t,o){return new i(e,t,o)},i.from=function(e,t,o){return o.runBackwards=!0,o.immediateRender=0!=o.immediateRender,new i(e,t,o)},i.fromTo=function(e,t,o,n){return n.startAt=o,n.immediateRender=0!=n.immediateRender&&0!=o.immediateRender,new i(e,t,n)},i.staggerTo=i.allTo=function(e,t,a,r,l,f,u){r=r||0;var h,g,d,m,_=a.delay||0,v=[],y=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),l.apply(u||this,f||p)};for(c(e)||("string"==typeof e&&(e=o.selector(e)||e),s(e)&&(e=n(e))),e=e||[],0>r&&(e=n(e),e.reverse(),r*=-1),h=e.length-1,d=0;h>=d;d++){g={};for(m in a)g[m]=a[m];g.delay=_,d===h&&l&&(g.onComplete=y),v[d]=new i(e[d],t,g),_+=r}return v},i.staggerFrom=i.allFrom=function(e,t,o,n,a,r,s){return o.runBackwards=!0,o.immediateRender=0!=o.immediateRender,i.staggerTo(e,t,o,n,a,r,s)},i.staggerFromTo=i.allFromTo=function(e,t,o,n,a,r,s,c){return n.startAt=o,n.immediateRender=0!=n.immediateRender&&0!=o.immediateRender,i.staggerTo(e,t,n,a,r,s,c)},i.delayedCall=function(e,t,o,n,a){return new i(t,0,{delay:e,onComplete:t,onCompleteParams:o,onCompleteScope:n,onReverseComplete:t,onReverseCompleteParams:o,onReverseCompleteScope:n,immediateRender:!1,useFrames:a,overwrite:0})},i.set=function(e,t){return new i(e,0,t)},i.isTweening=function(e){return o.getTweensOf(e,!0).length>0};var f=function(e,t){for(var n=[],i=0,a=e._first;a;)a instanceof o?n[i++]=a:(t&&(n[i++]=a),n=n.concat(f(a,t)),i=n.length),a=a._next;return n},u=i.getAllTweens=function(t){return f(e._rootTimeline,t).concat(f(e._rootFramesTimeline,t))};i.killAll=function(e,o,n,i){null==o&&(o=!0),null==n&&(n=!0);var a,r,s,c=u(0!=i),l=c.length,p=o&&n&&i;for(s=0;l>s;s++)r=c[s],(p||r instanceof t||(a=r.target===r.vars.onComplete)&&n||o&&!a)&&(e?r.totalTime(r._reversed?0:r.totalDuration()):r._enabled(!1,!1))},i.killChildTweensOf=function(e,t){if(null!=e){var a,l,p,f,u,h=r.tweenLookup;if("string"==typeof e&&(e=o.selector(e)||e),s(e)&&(e=n(e)),c(e))for(f=e.length;--f>-1;)i.killChildTweensOf(e[f],t);else{a=[];for(p in h)for(l=h[p].target.parentNode;l;)l===e&&(a=a.concat(h[p].tweens)),l=l.parentNode;for(u=a.length,f=0;u>f;f++)t&&a[f].totalTime(a[f].totalDuration()),a[f]._enabled(!1,!1)}}};var h=function(e,o,n,i){o=o!==!1,n=n!==!1,i=i!==!1;for(var a,r,s=u(i),c=o&&n&&i,l=s.length;--l>-1;)r=s[l],(c||r instanceof t||(a=r.target===r.vars.onComplete)&&n||o&&!a)&&r.paused(e)};return i.pauseAll=function(e,t,o){h(!0,e,t,o)},i.resumeAll=function(e,t,o){h(!1,e,t,o)},i.globalTimeScale=function(t){var n=e._rootTimeline,i=o.ticker.time;return arguments.length?(t=t||a,n._startTime=i-(i-n._startTime)*n._timeScale/t,n=e._rootFramesTimeline,i=o.ticker.frame,n._startTime=i-(i-n._startTime)*n._timeScale/t,n._timeScale=e._rootTimeline._timeScale=t,t):n._timeScale},l.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},i},!0),e._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,o,n){var i=function(e){o.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var t,n,i=this.vars;for(n in i)t=i[n],l(t)&&-1!==t.join("").indexOf("{self}")&&(i[n]=this._swapSelfInParams(t));l(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},a=1e-10,r=n._internals,s=i._internals={},c=r.isSelector,l=r.isArray,p=r.lazyTweens,f=r.lazyRender,u=[],h=e._gsDefine.globals,g=function(e){var t,o={};for(t in e)o[t]=e[t];return o},d=s.pauseCallback=function(e,t,o,n){var i=e._timeline,a=i._totalTime;!t&&this._forcingPlayhead||i._rawPrevTime===e._startTime||(i.pause(e._startTime),t&&t.apply(n||i,o||u),this._forcingPlayhead&&i.seek(a))},m=function(e){var t,o=[],n=e.length;for(t=0;t!==n;o.push(e[t++]));return o},_=i.prototype=new o;return i.version="1.15.1",_.constructor=i,_.kill()._gc=_._forcingPlayhead=!1,_.to=function(e,t,o,i){var a=o.repeat&&h.TweenMax||n;return t?this.add(new a(e,t,o),i):this.set(e,o,i)},_.from=function(e,t,o,i){return this.add((o.repeat&&h.TweenMax||n).from(e,t,o),i)},_.fromTo=function(e,t,o,i,a){var r=i.repeat&&h.TweenMax||n;return t?this.add(r.fromTo(e,t,o,i),a):this.set(e,i,a)},_.staggerTo=function(e,t,o,a,r,s,l,p){var f,u=new i({onComplete:s,onCompleteParams:l,onCompleteScope:p,smoothChildTiming:this.smoothChildTiming});for("string"==typeof e&&(e=n.selector(e)||e),e=e||[],c(e)&&(e=m(e)),a=a||0,0>a&&(e=m(e),e.reverse(),a*=-1),f=0;e.length>f;f++)o.startAt&&(o.startAt=g(o.startAt)),u.to(e[f],t,g(o),f*a);return this.add(u,r)},_.staggerFrom=function(e,t,o,n,i,a,r,s){return o.immediateRender=0!=o.immediateRender,o.runBackwards=!0,this.staggerTo(e,t,o,n,i,a,r,s)},_.staggerFromTo=function(e,t,o,n,i,a,r,s,c){return n.startAt=o,n.immediateRender=0!=n.immediateRender&&0!=o.immediateRender,this.staggerTo(e,t,n,i,a,r,s,c)},_.call=function(e,t,o,i){return this.add(n.delayedCall(0,e,t,o),i)},_.set=function(e,t,o){return o=this._parseTimeOrLabel(o,0,!0),null==t.immediateRender&&(t.immediateRender=o===this._time&&!this._paused),this.add(new n(e,0,t),o)},i.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var o,a,r=new i(e),s=r._timeline;for(null==t&&(t=!0),s._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=s._time,o=s._first;o;)a=o._next,t&&o instanceof n&&o.target===o.vars.onComplete||r.add(o,o._startTime-o._delay),o=a;return s.add(r,0),r},_.add=function(e,a,r,s){var c,p,f,u,h,g;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,e)),!(e instanceof t)){if(e instanceof Array||e&&e.push&&l(e)){for(r=r||"normal",s=s||0,c=a,p=e.length,f=0;p>f;f++)l(u=e[f])&&(u=new i({tweens:u})),this.add(u,c),"string"!=typeof u&&"function"!=typeof u&&("sequence"===r?c=u._startTime+u.totalDuration()/u._timeScale:"start"===r&&(u._startTime-=u.delay())),c+=s;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,a);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=n.delayedCall(0,e)}if(o.prototype.add.call(this,e,a),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(h=this,g=h.rawTime()>e._startTime;h._timeline;)g&&h._timeline.smoothChildTiming?h.totalTime(h._totalTime,!0):h._gc&&h._enabled(!0,!1),h=h._timeline;return this},_.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&l(e)){for(var o=e.length;--o>-1;)this.remove(e[o]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},_._remove=function(e,t){o.prototype._remove.call(this,e,t);var n=this._last;return n?this._time>n._startTime+n._totalDuration/n._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},_.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},_.insert=_.insertMultiple=function(e,t,o,n){return this.add(e,t||0,o,n)},_.appendMultiple=function(e,t,o,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),o,n)},_.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},_.addPause=function(e,t,o,i){var a=n.delayedCall(0,d,["{self}",t,o,i],this);return a.data="isPause",this.add(a,e)},_.removeLabel=function(e){return delete this._labels[e],this},_.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},_._parseTimeOrLabel=function(e,o,n,i){var a;if(i instanceof t&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&l(i)))for(a=i.length;--a>-1;)i[a]instanceof t&&i[a].timeline===this&&this.remove(i[a]);if("string"==typeof o)return this._parseTimeOrLabel(o,n&&"number"==typeof e&&null==this._labels[o]?e-this.duration():0,n);if(o=o||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(a=e.indexOf("="),-1===a)return null==this._labels[e]?n?this._labels[e]=this.duration()+o:o:this._labels[e]+o;o=parseInt(e.charAt(a-1)+"1",10)*Number(e.substr(a+1)),e=a>1?this._parseTimeOrLabel(e.substr(0,a-1),0,n):this.duration()}return Number(e)+o},_.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},_.stop=function(){return this.paused(!0)},_.gotoAndPlay=function(e,t){return this.play(e,t)},_.gotoAndStop=function(e,t){return this.pause(e,t)},_.render=function(e,t,o){this._gc&&this._enabled(!0,!1);var n,i,r,s,c,l=this._dirty?this.totalDuration():this._totalDuration,h=this._time,g=this._startTime,d=this._timeScale,m=this._paused;if(e>=l?(this._totalTime=this._time=l,this._reversed||this._hasPausedChild()||(i=!0,s="onComplete",0===this._duration&&(0===e||0>this._rawPrevTime||this._rawPrevTime===a)&&this._rawPrevTime!==e&&this._first&&(c=!0,this._rawPrevTime>a&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,e=l+1e-4):1e-7>e?(this._totalTime=this._time=0,(0!==h||0===this._duration&&this._rawPrevTime!==a&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(s="onReverseComplete",i=this._reversed),0>e?(this._active=!1,this._rawPrevTime>=0&&this._first&&(c=!0),this._rawPrevTime=e):(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,e=0,this._initted||(c=!0))):this._totalTime=this._time=this._rawPrevTime=e,this._time!==h&&this._first||o||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==h&&e>0&&(this._active=!0),0===h&&this.vars.onStart&&0!==this._time&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u)),this._time>=h)for(n=this._first;n&&(r=n._next,!this._paused||m);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,o):n.render((e-n._startTime)*n._timeScale,t,o)),n=r;else for(n=this._last;n&&(r=n._prev,!this._paused||m);)(n._active||h>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,o):n.render((e-n._startTime)*n._timeScale,t,o)),n=r;this._onUpdate&&(t||(p.length&&f(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u))),s&&(this._gc||(g===this._startTime||d!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(i&&(p.length&&f(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||u)))}},_._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof i&&e._hasPausedChild())return!0;e=e._next}return!1},_.getChildren=function(e,t,o,i){i=i||-9999999999;for(var a=[],r=this._first,s=0;r;)i>r._startTime||(r instanceof n?t!==!1&&(a[s++]=r):(o!==!1&&(a[s++]=r),e!==!1&&(a=a.concat(r.getChildren(!0,t,o)),s=a.length))),r=r._next;return a},_.getTweensOf=function(e,t){var o,i,a=this._gc,r=[],s=0;for(a&&this._enabled(!0,!0),o=n.getTweensOf(e),i=o.length;--i>-1;)(o[i].timeline===this||t&&this._contains(o[i]))&&(r[s++]=o[i]);return a&&this._enabled(!1,!0),r},_.recent=function(){return this._recent},_._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},_.shiftChildren=function(e,t,o){o=o||0;for(var n,i=this._first,a=this._labels;i;)i._startTime>=o&&(i._startTime+=e),i=i._next;if(t)for(n in a)a[n]>=o&&(a[n]+=e);return this._uncache(!0)},_._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var o=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=o.length,i=!1;--n>-1;)o[n]._kill(e,t)&&(i=!0);return i},_.clear=function(e){var t=this.getChildren(!1,!0,!0),o=t.length;for(this._time=this._totalTime=0;--o>-1;)t[o]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},_.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},_._enabled=function(e,t){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return o.prototype._enabled.call(this,e,t)},_.totalTime=function(){this._forcingPlayhead=!0;var e=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,e},_.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},_.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,o,n=0,i=this._last,a=999999999999;i;)t=i._prev,i._dirty&&i.totalDuration(),i._startTime>a&&this._sortChildren&&!i._paused?this.add(i,i._startTime-i._delay):a=i._startTime,0>i._startTime&&!i._paused&&(n-=i._startTime,this._timeline.smoothChildTiming&&(this._startTime+=i._startTime/this._timeScale),this.shiftChildren(-i._startTime,!1,-9999999999),a=0),o=i._startTime+i._totalDuration/i._timeScale,o>n&&(n=o),i=t;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==e&&this.timeScale(this._totalDuration/e),this},_.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},_.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},i},!0),e._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,o){var n=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},i=1e-10,a=[],r=t._internals,s=r.lazyTweens,c=r.lazyRender,l=new o(null,null,1,0),p=n.prototype=new e;return p.constructor=n,p.kill()._gc=!1,n.version="1.15.1",p.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},p.addCallback=function(e,o,n,i){return this.add(t.delayedCall(0,e,n,i),o)},p.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var o=this.getTweensOf(e,!1),n=o.length,i=this._parseTimeOrLabel(t);--n>-1;)o[n]._startTime===i&&o[n]._enabled(!1,!1);return this},p.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},p.tweenTo=function(e,o){o=o||{};var n,i,r,s={ease:l,useFrames:this.usesFrames(),immediateRender:!1};for(i in o)s[i]=o[i];return s.time=this._parseTimeOrLabel(e),n=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,r=new t(this,n,s),s.onStart=function(){r.target.paused(!0),r.vars.time!==r.target.time()&&n===r.duration()&&r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale),o.onStart&&o.onStart.apply(o.onStartScope||r,o.onStartParams||a)},r},p.tweenFromTo=function(e,t,o){o=o||{},e=this._parseTimeOrLabel(e),o.startAt={onComplete:this.seek,onCompleteParams:[e],onCompleteScope:this},o.immediateRender=o.immediateRender!==!1;var n=this.tweenTo(t,o);return n.duration(Math.abs(n.vars.time-e)/this._timeScale||.001)},p.render=function(e,t,o){this._gc&&this._enabled(!0,!1);var n,r,l,p,f,u,h=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,d=this._time,m=this._totalTime,_=this._startTime,v=this._timeScale,y=this._rawPrevTime,b=this._paused,w=this._cycle;if(e>=h?(this._locked||(this._totalTime=h,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,p="onComplete",0===this._duration&&(0===e||0>y||y===i)&&y!==e&&this._first&&(f=!0,y>i&&(p="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:i,this._yoyo&&0!==(1&this._cycle)?this._time=e=0:(this._time=g,e=g+1e-4)):1e-7>e?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==d||0===g&&y!==i&&(y>0||0>e&&y>=0)&&!this._locked)&&(p="onReverseComplete",r=this._reversed),0>e?(this._active=!1,y>=0&&this._first&&(f=!0),this._rawPrevTime=e):(this._rawPrevTime=g||!t||e||this._rawPrevTime===e?e:i,e=0,this._initted||(f=!0))):(0===g&&0>y&&(f=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(u=g+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,e=g+1e-4):0>this._time?this._time=e=0:e=this._time))),this._cycle!==w&&!this._locked){var k=this._yoyo&&0!==(1&w),j=k===(this._yoyo&&0!==(1&this._cycle)),x=this._totalTime,S=this._cycle,$=this._rawPrevTime,C=this._time;if(this._totalTime=w*g,w>this._cycle?k=!k:this._totalTime+=g,this._time=d,this._rawPrevTime=0===g?y-1e-4:y,this._cycle=w,this._locked=!0,d=k?0:g,this.render(d,t,0===g),t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||a),j&&(d=k?g+1e-4:-1e-4,this.render(d,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=C,this._totalTime=x,this._cycle=S,this._rawPrevTime=$}if(!(this._time!==d&&this._first||o||f))return void(m!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||a)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&e>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||a)),this._time>=d)for(n=this._first;n&&(l=n._next,!this._paused||b);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,o):n.render((e-n._startTime)*n._timeScale,t,o)),n=l;else for(n=this._last;n&&(l=n._prev,!this._paused||b);)(n._active||d>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,o):n.render((e-n._startTime)*n._timeScale,t,o)),n=l;this._onUpdate&&(t||(s.length&&c(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||a))),p&&(this._locked||this._gc||(_===this._startTime||v!==this._timeScale)&&(0===this._time||h>=this.totalDuration())&&(r&&(s.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[p]&&this.vars[p].apply(this.vars[p+"Scope"]||this,this.vars[p+"Params"]||a)))},p.getActive=function(e,t,o){null==e&&(e=!0),null==t&&(t=!0),null==o&&(o=!1);var n,i,a=[],r=this.getChildren(e,t,o),s=0,c=r.length;for(n=0;c>n;n++)i=r[n],i.isActive()&&(a[s++]=i);return a},p.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,o=this.getLabelsArray(),n=o.length;for(t=0;n>t;t++)if(o[t].time>e)return o[t].name;return null},p.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),o=t.length;--o>-1;)if(e>t[o].time)return t[o].name;return null},p.getLabelsArray=function(){var e,t=[],o=0;for(e in this._labels)t[o++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},p.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},p.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},p.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},p.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},p.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},p.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},p.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},p.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var t=180/Math.PI,o=[],n=[],i=[],a={},r=e._gsDefine.globals,s=function(e,t,o,n){this.a=e,this.b=t,this.c=o,this.d=n,this.da=n-e,this.ca=o-e,this.ba=t-e},c=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(e,t,o,n){var i={a:e},a={},r={},s={c:n},c=(e+t)/2,l=(t+o)/2,p=(o+n)/2,f=(c+l)/2,u=(l+p)/2,h=(u-f)/8;return i.b=c+(e-c)/4,a.b=f+h,i.c=a.a=(i.b+a.b)/2,a.c=r.a=(f+u)/2,r.b=u-h,s.b=p+(n-p)/4,r.c=s.a=(r.b+s.b)/2,[i,a,r,s]},p=function(e,t,a,r,s){var c,p,f,u,h,g,d,m,_,v,y,b,w,k=e.length-1,j=0,x=e[0].a;for(c=0;k>c;c++)h=e[j],p=h.a,f=h.d,u=e[j+1].d,s?(y=o[c],b=n[c],w=.25*(b+y)*t/(r?.5:i[c]||.5),g=f-(f-p)*(r?.5*t:0!==y?w/y:0),d=f+(u-f)*(r?.5*t:0!==b?w/b:0),m=f-(g+((d-g)*(3*y/(y+b)+.5)/4||0))):(g=f-.5*(f-p)*t,d=f+.5*(u-f)*t,m=f-(g+d)/2),g+=m,d+=m,h.c=_=g,h.b=0!==c?x:x=h.a+.6*(h.c-h.a),h.da=f-p,h.ca=_-p,h.ba=x-p,a?(v=l(p,x,_,f),e.splice(j,1,v[0],v[1],v[2],v[3]),j+=4):j++,x=d;h=e[j],h.b=x,h.c=x+.4*(h.d-x),h.da=h.d-h.a,h.ca=h.c-h.a,h.ba=x-h.a,a&&(v=l(h.a,x,h.c,h.d),e.splice(j,1,v[0],v[1],v[2],v[3]))},f=function(e,t,i,a){var r,c,l,p,f,u,h=[];if(a)for(e=[a].concat(e),c=e.length;--c>-1;)"string"==typeof(u=e[c][t])&&"="===u.charAt(1)&&(e[c][t]=a[t]+Number(u.charAt(0)+u.substr(2)));if(r=e.length-2,0>r)return h[0]=new s(e[0][t],0,0,e[-1>r?0:1][t]),h;for(c=0;r>c;c++)l=e[c][t],p=e[c+1][t],h[c]=new s(l,0,0,p),i&&(f=e[c+2][t],o[c]=(o[c]||0)+(p-l)*(p-l),n[c]=(n[c]||0)+(f-p)*(f-p));return h[c]=new s(e[c][t],0,0,e[c+1][t]),h},u=function(e,t,r,s,l,u){var h,g,d,m,_,v,y,b,w={},k=[],j=u||e[0];l="string"==typeof l?","+l+",":c,null==t&&(t=1);for(g in e[0])k.push(g);if(e.length>1){for(b=e[e.length-1],y=!0,h=k.length;--h>-1;)if(g=k[h],Math.abs(j[g]-b[g])>.05){y=!1;break}y&&(e=e.concat(),u&&e.unshift(u),e.push(e[1]),u=e[e.length-3])}for(o.length=n.length=i.length=0,h=k.length;--h>-1;)g=k[h],a[g]=-1!==l.indexOf(","+g+","),w[g]=f(e,g,a[g],u);for(h=o.length;--h>-1;)o[h]=Math.sqrt(o[h]),n[h]=Math.sqrt(n[h]);if(!s){for(h=k.length;--h>-1;)if(a[g])for(d=w[k[h]],v=d.length-1,m=0;v>m;m++)_=d[m+1].da/n[m]+d[m].da/o[m],i[m]=(i[m]||0)+_*_;for(h=i.length;--h>-1;)i[h]=Math.sqrt(i[h])}for(h=k.length,m=r?4:1;--h>-1;)g=k[h],d=w[g],p(d,t,r,s,a[g]),y&&(d.splice(0,m),d.splice(d.length-m,m));return w},h=function(e,t,o){t=t||"soft";var n,i,a,r,c,l,p,f,u,h,g,d={},m="cubic"===t?3:2,_="soft"===t,v=[];if(_&&o&&(e=[o].concat(e)),null==e||m+1>e.length)throw"invalid Bezier data";for(u in e[0])v.push(u);for(l=v.length;--l>-1;){for(u=v[l],d[u]=c=[],h=0,f=e.length,p=0;f>p;p++)n=null==o?e[p][u]:"string"==typeof(g=e[p][u])&&"="===g.charAt(1)?o[u]+Number(g.charAt(0)+g.substr(2)):Number(g),_&&p>1&&f-1>p&&(c[h++]=(n+c[h-2])/2),c[h++]=n;for(f=h-m+1,h=0,p=0;f>p;p+=m)n=c[p],i=c[p+1],a=c[p+2],r=2===m?0:c[p+3],c[h++]=g=3===m?new s(n,i,a,r):new s(n,(2*i+n)/3,(2*i+a)/3,a);c.length=h}return d},g=function(e,t,o){for(var n,i,a,r,s,c,l,p,f,u,h,g=1/o,d=e.length;--d>-1;)for(u=e[d],a=u.a,r=u.d-a,s=u.c-a,c=u.b-a,n=i=0,p=1;o>=p;p++)l=g*p,f=1-l,n=i-(i=(l*l*r+3*f*(l*s+f*c))*l),h=d*o+p-1,t[h]=(t[h]||0)+n*n},d=function(e,t){t=t>>0||6;var o,n,i,a,r=[],s=[],c=0,l=0,p=t-1,f=[],u=[];for(o in e)g(e[o],r,t);for(i=r.length,n=0;i>n;n++)c+=Math.sqrt(r[n]),a=n%t,u[a]=c,a===p&&(l+=c,a=n/t>>0,f[a]=u,s[a]=l,c=0,u=[]);return{length:l,lengths:s,segments:f}},m=e._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.4",API:2,global:!0,init:function(e,t,o){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n,i,a,r,s,c=t.values||[],l={},p=c[0],f=t.autoRotate||o.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(n in p)this._props.push(n);for(a=this._props.length;--a>-1;)n=this._props[a],this._overwriteProps.push(n),i=this._func[n]="function"==typeof e[n],l[n]=i?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),s||l[n]!==c[0][n]&&(s=l);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?u(c,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):h(c,t.type,l),this._segCount=this._beziers[n].length,this._timeRes){var g=d(this._beziers,this._timeRes);this._length=g.length,this._lengths=g.lengths,this._segments=g.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),a=f.length;--a>-1;){for(r=0;3>r;r++)n=f[a][r],this._func[n]="function"==typeof e[n]&&e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)];n=f[a][2],this._initialRotations[a]=this._func[n]?this._func[n].call(this._target):this._target[n]}return this._startRatio=o.vars.runBackwards?1:0,!0},set:function(e){var o,n,i,a,r,s,c,l,p,f,u=this._segCount,h=this._func,g=this._target,d=e!==this._startRatio;if(this._timeRes){if(p=this._lengths,f=this._curSeg,e*=this._length,i=this._li,e>this._l2&&u-1>i){for(l=u-1;l>i&&e>=(this._l2=p[++i]););this._l1=p[i-1],this._li=i,this._curSeg=f=this._segments[i],this._s2=f[this._s1=this._si=0]}else if(this._l1>e&&i>0){for(;i>0&&(this._l1=p[--i])>=e;);0===i&&this._l1>e?this._l1=0:i++,this._l2=p[i],this._li=i,this._curSeg=f=this._segments[i],this._s1=f[(this._si=f.length-1)-1]||0,this._s2=f[this._si]}if(o=i,e-=this._l1,i=this._si,e>this._s2&&f.length-1>i){for(l=f.length-1;l>i&&e>=(this._s2=f[++i]););this._s1=f[i-1],this._si=i}else if(this._s1>e&&i>0){for(;i>0&&(this._s1=f[--i])>=e;);0===i&&this._s1>e?this._s1=0:i++,this._s2=f[i],this._si=i}s=(i+(e-this._s1)/(this._s2-this._s1))*this._prec}else o=0>e?0:e>=1?u-1:u*e>>0,s=(e-o*(1/u))*u;for(n=1-s,i=this._props.length;--i>-1;)a=this._props[i],r=this._beziers[a][o],c=(s*s*r.da+3*n*(s*r.ca+n*r.ba))*s+r.a,this._round[a]&&(c=Math.round(c)),h[a]?g[a](c):g[a]=c;if(this._autoRotate){var m,_,v,y,b,w,k,j=this._autoRotate;for(i=j.length;--i>-1;)a=j[i][2],w=j[i][3]||0,k=j[i][4]===!0?1:t,r=this._beziers[j[i][0]],m=this._beziers[j[i][1]],r&&m&&(r=r[o],m=m[o],_=r.a+(r.b-r.a)*s,y=r.b+(r.c-r.b)*s,_+=(y-_)*s,y+=(r.c+(r.d-r.c)*s-y)*s,v=m.a+(m.b-m.a)*s,b=m.b+(m.c-m.b)*s,v+=(b-v)*s,b+=(m.c+(m.d-m.c)*s-b)*s,c=d?Math.atan2(b-v,y-_)*k+w:this._initialRotations[i],h[a]?g[a](c):g[a]=c)}}}),_=m.prototype;m.bezierThrough=u,m.cubicToQuadratic=l,m._autoCSS=!0,m.quadraticToCubic=function(e,t,o){return new s(e,(2*t+e)/3,(2*t+o)/3,o)},m._cssRegister=function(){var e=r.CSSPlugin;if(e){var t=e._internals,o=t._parseToProxy,n=t._setPluginRatio,i=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,r,s,c){t instanceof Array&&(t={values:t}),c=new m;var l,p,f,u=t.values,h=u.length-1,g=[],d={};if(0>h)return s;for(l=0;h>=l;l++)f=o(e,u[l],r,s,c,h!==l),g[l]=f.end;for(p in t)d[p]=t[p];return d.values=g,s=new i(e,"bezier",0,0,f.pt,2),s.data=f,s.plugin=c,s.setRatio=n,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(l=d.autoRotate===!0?0:Number(d.autoRotate),d.autoRotate=null!=f.end.left?[["left","top","rotation",l,!1]]:null!=f.end.x&&[["x","y","rotation",l,!1]]),d.autoRotate&&(r._transform||r._enableTransforms(!1),f.autoRotate=r._target._gsTransform),c._onInitTween(f.proxy,d,r._tween),s}})}},_._roundProps=function(e,t){for(var o=this._overwriteProps,n=o.length;--n>-1;)(e[o[n]]||e.bezier||e.bezierThrough)&&(this._round[o[n]]=t)},_._kill=function(e){var t,o,n=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],o=n.length;--o>-1;)n[o]===t&&n.splice(o,1);return this._super._kill.call(this,e)}}(),e._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,o){var n,i,a,r,s=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio;
},c=e._gsDefine.globals,l={},p=s.prototype=new t("css");p.constructor=s,s.version="1.15.1",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",p="px",s.suffixMap={top:p,right:p,bottom:p,left:p,width:p,height:p,fontSize:p,padding:p,margin:p,perspective:p,lineHeight:""};var f,u,h,g,d,m,_=/(?:\d|\-\d|\.\d|\-\.\d)+/g,v=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,y=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,k=/opacity *= *([^)]*)/i,j=/opacity:([^;]*)/i,x=/alpha\(opacity *=.+?\)/i,S=/^(rgb|hsl)/,$=/([A-Z])/g,C=/-([a-z])/gi,T=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,P=function(e,t){return t.toUpperCase()},E=/(?:Left|Right|Width)/i,A=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,I=Math.PI/180,U=180/Math.PI,O={},z=document,D=function(e){return z.createElementNS?z.createElementNS("http://www.w3.org/1999/xhtml",e):z.createElement(e)},H=D("div"),R=D("img"),F=s._internals={_specialProps:l},N=navigator.userAgent,B=function(){var e=N.indexOf("Android"),t=D("a");return h=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===e||Number(N.substr(e+8,1))>3),d=h&&6>Number(N.substr(N.indexOf("Version/")+8,1)),g=-1!==N.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N))&&(m=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),V=function(e){return k.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},G=function(e){window.console&&console.log(e)},q="",W="",Q=function(e,t){t=t||H;var o,n,i=t.style;if(void 0!==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),o=["O","Moz","ms","Ms","Webkit"],n=5;--n>-1&&void 0===i[o[n]+e];);return n>=0?(W=3===n?"ms":o[n],q="-"+W.toLowerCase()+"-",W+e):null},Y=z.defaultView?z.defaultView.getComputedStyle:function(){},X=s.getStyle=function(e,t,o,n,i){var a;return B||"opacity"!==t?(!n&&e.style[t]?a=e.style[t]:(o=o||Y(e))?a=o[t]||o.getPropertyValue(t)||o.getPropertyValue(t.replace($,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==i||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:i):V(e)},Z=F.convertToPixels=function(e,t,n,i,a){if("px"===i||!i)return n;if("auto"===i||!n)return 0;var r,c,l,p=E.test(t),f=e,u=H.style,h=0>n;if(h&&(n=-n),"%"===i&&-1!==t.indexOf("border"))r=n/100*(p?e.clientWidth:e.clientHeight);else{if(u.cssText="border:0 solid red;position:"+X(e,"position")+";line-height:0;","%"!==i&&f.appendChild)u[p?"borderLeftWidth":"borderTopWidth"]=n+i;else{if(f=e.parentNode||z.body,c=f._gsCache,l=o.ticker.frame,c&&p&&c.time===l)return c.width*n/100;u[p?"width":"height"]=n+i}f.appendChild(H),r=parseFloat(H[p?"offsetWidth":"offsetHeight"]),f.removeChild(H),p&&"%"===i&&s.cacheWidths!==!1&&(c=f._gsCache=f._gsCache||{},c.time=l,c.width=100*(r/n)),0!==r||a||(r=Z(e,t,n,i,!0))}return h?-r:r},J=F.calculateOffset=function(e,t,o){if("absolute"!==X(e,"position",o))return 0;var n="left"===t?"Left":"Top",i=X(e,"margin"+n,o);return e["offset"+n]-(Z(e,t,parseFloat(i),i.replace(w,""))||0)},K=function(e,t){var o,n,i={};if(t=t||Y(e,null))for(o in t)(-1===o.indexOf("Transform")||je===o)&&(i[o]=t[o]);else if(t=e.currentStyle||e.style)for(o in t)"string"==typeof o&&void 0===i[o]&&(i[o.replace(C,P)]=t[o]);return B||(i.opacity=V(e)),n=Me(e,t,!1),i.rotation=n.rotation,i.skewX=n.skewX,i.scaleX=n.scaleX,i.scaleY=n.scaleY,i.x=n.x,i.y=n.y,$e&&(i.z=n.z,i.rotationX=n.rotationX,i.rotationY=n.rotationY,i.scaleZ=n.scaleZ),i.filters&&delete i.filters,i},ee=function(e,t,o,n,i){var a,r,s,c={},l=e.style;for(r in o)"cssText"!==r&&"length"!==r&&isNaN(r)&&(t[r]!==(a=o[r])||i&&i[r])&&-1===r.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(c[r]="auto"!==a||"left"!==r&&"top"!==r?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[r]||""===t[r].replace(b,"")?a:0:J(e,r),void 0!==l[r]&&(s=new ge(l,r,l[r],s)));if(n)for(r in n)"className"!==r&&(c[r]=n[r]);return{difs:c,firstMPT:s}},te={width:["Left","Right"],height:["Top","Bottom"]},oe=["marginLeft","marginRight","marginTop","marginBottom"],ne=function(e,t,o){var n=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),i=te[t],a=i.length;for(o=o||Y(e,null);--a>-1;)n-=parseFloat(X(e,"padding"+i[a],o,!0))||0,n-=parseFloat(X(e,"border"+i[a]+"Width",o,!0))||0;return n},ie=function(e,t){(null==e||""===e||"auto"===e||"auto auto"===e)&&(e="0 0");var o=e.split(" "),n=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":o[0],i=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":o[1];return null==i?i="center"===n?"50%":"0":"center"===i&&(i="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),t&&(t.oxp=-1!==n.indexOf("%"),t.oyp=-1!==i.indexOf("%"),t.oxr="="===n.charAt(1),t.oyr="="===i.charAt(1),t.ox=parseFloat(n.replace(b,"")),t.oy=parseFloat(i.replace(b,""))),n+" "+i+(o.length>2?" "+o[2]:"")},ae=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},re=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)},se=function(e,t,o,n){var i,a,r,s,c,l=1e-6;return null==e?s=t:"number"==typeof e?s=e:(i=360,a=e.split("_"),c="="===e.charAt(1),r=(c?parseInt(e.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===e.indexOf("rad")?1:U)-(c?0:t),a.length&&(n&&(n[o]=t+r),-1!==e.indexOf("short")&&(r%=i,r!==r%(i/2)&&(r=0>r?r+i:r-i)),-1!==e.indexOf("_cw")&&0>r?r=(r+9999999999*i)%i-(0|r/i)*i:-1!==e.indexOf("ccw")&&r>0&&(r=(r-9999999999*i)%i-(0|r/i)*i)),s=t+r),l>s&&s>-l&&(s=0),s},ce={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},le=function(e,t,o){return e=0>e?e+1:e>1?e-1:e,0|255*(1>6*e?t+6*(o-t)*e:.5>e?o:2>3*e?t+6*(o-t)*(2/3-e):t)+.5},pe=s.parseColor=function(e){var t,o,n,i,a,r;return e&&""!==e?"number"==typeof e?[e>>16,255&e>>8,255&e]:(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ce[e]?ce[e]:"#"===e.charAt(0)?(4===e.length&&(t=e.charAt(1),o=e.charAt(2),n=e.charAt(3),e="#"+t+t+o+o+n+n),e=parseInt(e.substr(1),16),[e>>16,255&e>>8,255&e]):"hsl"===e.substr(0,3)?(e=e.match(_),i=Number(e[0])%360/360,a=Number(e[1])/100,r=Number(e[2])/100,o=.5>=r?r*(a+1):r+a-r*a,t=2*r-o,e.length>3&&(e[3]=Number(e[3])),e[0]=le(i+1/3,t,o),e[1]=le(i,t,o),e[2]=le(i-1/3,t,o),e):(e=e.match(_)||ce.transparent,e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e.length>3&&(e[3]=Number(e[3])),e)):ce.black},fe="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(p in ce)fe+="|"+p+"\\b";fe=RegExp(fe+")","gi");var ue=function(e,t,o,n){if(null==e)return function(e){return e};var i,a=t?(e.match(fe)||[""])[0]:"",r=e.split(a).join("").match(y)||[],s=e.substr(0,e.indexOf(r[0])),c=")"===e.charAt(e.length-1)?")":"",l=-1!==e.indexOf(" ")?" ":",",p=r.length,f=p>0?r[0].replace(_,""):"";return p?i=t?function(e){var t,u,h,g;if("number"==typeof e)e+=f;else if(n&&M.test(e)){for(g=e.replace(M,"|").split("|"),h=0;g.length>h;h++)g[h]=i(g[h]);return g.join(",")}if(t=(e.match(fe)||[a])[0],u=e.split(t).join("").match(y)||[],h=u.length,p>h--)for(;p>++h;)u[h]=o?u[0|(h-1)/2]:r[h];return s+u.join(l)+l+t+c+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,a,u;if("number"==typeof e)e+=f;else if(n&&M.test(e)){for(a=e.replace(M,"|").split("|"),u=0;a.length>u;u++)a[u]=i(a[u]);return a.join(",")}if(t=e.match(y)||[],u=t.length,p>u--)for(;p>++u;)t[u]=o?t[0|(u-1)/2]:r[u];return s+t.join(l)+c}:function(e){return e}},he=function(e){return e=e.split(","),function(t,o,n,i,a,r,s){var c,l=(o+"").split(" ");for(s={},c=0;4>c;c++)s[e[c]]=l[c]=l[c]||l[(c-1)/2>>0];return i.parse(t,s,a,r)}},ge=(F._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,o,n,i,a=this.data,r=a.proxy,s=a.firstMPT,c=1e-6;s;)t=r[s.v],s.r?t=Math.round(t):c>t&&t>-c&&(t=0),s.t[s.p]=t,s=s._next;if(a.autoRotate&&(a.autoRotate.rotation=r.rotation),1===e)for(s=a.firstMPT;s;){if(o=s.t,o.type){if(1===o.type){for(i=o.xs0+o.s+o.xs1,n=1;o.l>n;n++)i+=o["xn"+n]+o["xs"+(n+1)];o.e=i}}else o.e=o.s+o.xs0;s=s._next}},function(e,t,o,n,i){this.t=e,this.p=t,this.v=o,this.r=i,n&&(n._prev=this,this._next=n)}),de=(F._parseToProxy=function(e,t,o,n,i,a){var r,s,c,l,p,f=n,u={},h={},g=o._transform,d=O;for(o._transform=null,O=t,n=p=o.parse(e,t,n,i),O=d,a&&(o._transform=g,f&&(f._prev=null,f._prev&&(f._prev._next=null)));n&&n!==f;){if(1>=n.type&&(s=n.p,h[s]=n.s+n.c,u[s]=n.s,a||(l=new ge(n,"s",s,l,n.r),n.c=0),1===n.type))for(r=n.l;--r>0;)c="xn"+r,s=n.p+"_"+c,h[s]=n.data[c],u[s]=n[c],a||(l=new ge(n,c,s,l,n.rxp[c]));n=n._next}return{proxy:u,end:h,firstMPT:l,pt:p}},F.CSSPropTween=function(e,t,o,i,a,s,c,l,p,f,u){this.t=e,this.p=t,this.s=o,this.c=i,this.n=c||t,e instanceof de||r.push(this.n),this.r=l,this.type=s||0,p&&(this.pr=p,n=!0),this.b=void 0===f?o:f,this.e=void 0===u?o+i:u,a&&(this._next=a,a._prev=this)}),me=s.parseComplex=function(e,t,o,n,i,a,r,s,c,l){o=o||a||"",r=new de(e,t,0,0,r,l?2:1,null,(!1),s,o,n),n+="";var p,u,h,g,d,m,y,b,w,k,j,x,$=o.split(", ").join(",").split(" "),C=n.split(", ").join(",").split(" "),T=$.length,P=f!==!1;for((-1!==n.indexOf(",")||-1!==o.indexOf(","))&&($=$.join(" ").replace(M,", ").split(" "),C=C.join(" ").replace(M,", ").split(" "),T=$.length),T!==C.length&&($=(a||"").split(" "),T=$.length),r.plugin=c,r.setRatio=l,p=0;T>p;p++)if(g=$[p],d=C[p],b=parseFloat(g),b||0===b)r.appendXtra("",b,ae(d,b),d.replace(v,""),P&&-1!==d.indexOf("px"),!0);else if(i&&("#"===g.charAt(0)||ce[g]||S.test(g)))x=","===d.charAt(d.length-1)?"),":")",g=pe(g),d=pe(d),w=g.length+d.length>6,w&&!B&&0===d[3]?(r["xs"+r.l]+=r.l?" transparent":"transparent",r.e=r.e.split(C[p]).join("transparent")):(B||(w=!1),r.appendXtra(w?"rgba(":"rgb(",g[0],d[0]-g[0],",",!0,!0).appendXtra("",g[1],d[1]-g[1],",",!0).appendXtra("",g[2],d[2]-g[2],w?",":x,!0),w&&(g=4>g.length?1:g[3],r.appendXtra("",g,(4>d.length?1:d[3])-g,x,!1)));else if(m=g.match(_)){if(y=d.match(v),!y||y.length!==m.length)return r;for(h=0,u=0;m.length>u;u++)j=m[u],k=g.indexOf(j,h),r.appendXtra(g.substr(h,k-h),Number(j),ae(y[u],j),"",P&&"px"===g.substr(k+j.length,2),0===u),h=k+j.length;r["xs"+r.l]+=g.substr(h)}else r["xs"+r.l]+=r.l?" "+g:g;if(-1!==n.indexOf("=")&&r.data){for(x=r.xs0+r.data.s,p=1;r.l>p;p++)x+=r["xs"+p]+r.data["xn"+p];r.e=x+r["xs"+p]}return r.l||(r.type=-1,r.xs0=r.e),r.xfirst||r},_e=9;for(p=de.prototype,p.l=p.pr=0;--_e>0;)p["xn"+_e]=0,p["xs"+_e]="";p.xs0="",p._next=p._prev=p.xfirst=p.data=p.plugin=p.setRatio=p.rxp=null,p.appendXtra=function(e,t,o,n,i,a){var r=this,s=r.l;return r["xs"+s]+=a&&s?" "+e:e||"",o||0===s||r.plugin?(r.l++,r.type=r.setRatio?2:1,r["xs"+r.l]=n||"",s>0?(r.data["xn"+s]=t+o,r.rxp["xn"+s]=i,r["xn"+s]=t,r.plugin||(r.xfirst=new de(r,"xn"+s,t,o,r.xfirst||r,0,r.n,i,r.pr),r.xfirst.xs0=0),r):(r.data={s:t+o},r.rxp={},r.s=t,r.c=o,r.r=i,r)):(r["xs"+s]+=t+(n||""),r)};var ve=function(e,t){t=t||{},this.p=t.prefix?Q(e)||e:e,l[e]=l[this.p]=this,this.format=t.formatter||ue(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},ye=F._registerComplexSpecialProp=function(e,t,o){"object"!=typeof t&&(t={parser:o});var n,i,a=e.split(","),r=t.defaultValue;for(o=o||[r],n=0;a.length>n;n++)t.prefix=0===n&&t.prefix,t.defaultValue=o[n]||r,i=new ve(a[n],t)},be=function(e){if(!l[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";ye(e,{parser:function(e,o,n,i,a,r,s){var p=c.com.greensock.plugins[t];return p?(p._cssRegister(),l[n].parse(e,o,n,i,a,r,s)):(G("Error: "+t+" js file not loaded."),a)}})}};p=ve.prototype,p.parseComplex=function(e,t,o,n,i,a){var r,s,c,l,p,f,u=this.keyword;if(this.multi&&(M.test(o)||M.test(t)?(s=t.replace(M,"|").split("|"),c=o.replace(M,"|").split("|")):u&&(s=[t],c=[o])),c){for(l=c.length>s.length?c.length:s.length,r=0;l>r;r++)t=s[r]=s[r]||this.dflt,o=c[r]=c[r]||this.dflt,u&&(p=t.indexOf(u),f=o.indexOf(u),p!==f&&(o=-1===f?c:s,o[r]+=" "+u));t=s.join(", "),o=c.join(", ")}return me(e,this.p,t,o,this.clrs,this.dflt,n,this.pr,i,a)},p.parse=function(e,t,o,n,i,r){return this.parseComplex(e.style,this.format(X(e,this.p,a,!1,this.dflt)),this.format(t),i,r)},s.registerSpecialProp=function(e,t,o){ye(e,{parser:function(e,n,i,a,r,s){var c=new de(e,i,0,0,r,2,i,(!1),o);return c.plugin=s,c.setRatio=t(e,n,a._tween,i),c},priority:o})};var we,ke="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),je=Q("transform"),xe=q+"transform",Se=Q("transformOrigin"),$e=null!==Q("perspective"),Ce=F.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=!(s.defaultForce3D===!1||!$e)&&(s.defaultForce3D||"auto")},Te=window.SVGElement,Pe=function(e,t,o){var n,i=z.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(n in o)i.setAttributeNS(null,n.replace(a,"$1-$2").toLowerCase(),o[n]);return t.appendChild(i),i},Ee=document.documentElement,Ae=function(){var e,t,o,n=m||/Android/i.test(N)&&!window.chrome;return z.createElementNS&&!n&&(e=Pe("svg",Ee),t=Pe("rect",e,{width:100,height:50,x:100}),o=t.getBoundingClientRect().width,t.style[Se]="50% 50%",t.style[je]="scaleX(0.5)",n=o===t.getBoundingClientRect().width&&!(g&&$e),Ee.removeChild(e)),n}(),Le=function(e,t,o){var n=e.getBBox();t=ie(t).split(" "),o.xOrigin=(-1!==t[0].indexOf("%")?parseFloat(t[0])/100*n.width:parseFloat(t[0]))+n.x,o.yOrigin=(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*n.height:parseFloat(t[1]))+n.y},Me=F.getTransform=function(e,t,o,n){if(e._gsTransform&&o&&!n)return e._gsTransform;var i,r,c,l,p,f,u,h,g,d,m=o?e._gsTransform||new Ce:new Ce,_=0>m.scaleX,v=2e-5,y=1e5,b=$e?parseFloat(X(e,Se,t,!1,"0 0 0").split(" ")[2])||m.zOrigin||0:0,w=parseFloat(s.defaultTransformPerspective)||0;if(je?r=X(e,xe,t,!0):e.currentStyle&&(r=e.currentStyle.filter.match(A),r=r&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),m.x||0,m.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,m.svg=!!(Te&&"function"==typeof e.getBBox&&e.getCTM&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM)),m.svg&&(Le(e,X(e,Se,a,!1,"50% 50%")+"",m),we=s.useSVGTransformAttr||Ae,c=e.getAttribute("transform"),i&&c&&-1!==c.indexOf("matrix")&&(r=c,i=0)),!i){for(c=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],l=c.length;--l>-1;)p=Number(c[l]),c[l]=(f=p-(p|=0))?(0|f*y+(0>f?-.5:.5))/y+p:p;if(16===c.length){var k,j,x,S,$,C=c[0],T=c[1],P=c[2],E=c[3],L=c[4],M=c[5],I=c[6],O=c[7],z=c[8],D=c[9],H=c[10],R=c[12],F=c[13],N=c[14],B=c[11],V=Math.atan2(I,H);m.zOrigin&&(N=-m.zOrigin,R=z*N-c[12],F=D*N-c[13],N=H*N+m.zOrigin-c[14]),m.rotationX=V*U,V&&(S=Math.cos(-V),$=Math.sin(-V),k=L*S+z*$,j=M*S+D*$,x=I*S+H*$,z=L*-$+z*S,D=M*-$+D*S,H=I*-$+H*S,B=O*-$+B*S,L=k,M=j,I=x),V=Math.atan2(z,H),m.rotationY=V*U,V&&(S=Math.cos(-V),$=Math.sin(-V),k=C*S-z*$,j=T*S-D*$,x=P*S-H*$,D=T*$+D*S,H=P*$+H*S,B=E*$+B*S,C=k,T=j,P=x),V=Math.atan2(T,C),m.rotation=V*U,V&&(S=Math.cos(-V),$=Math.sin(-V),C=C*S+L*$,j=T*S+M*$,M=T*-$+M*S,I=P*-$+I*S,T=j),m.rotationX&&Math.abs(m.rotationX)+Math.abs(m.rotation)>359.9&&(m.rotationX=m.rotation=0,m.rotationY+=180),m.scaleX=(0|Math.sqrt(C*C+T*T)*y+.5)/y,m.scaleY=(0|Math.sqrt(M*M+D*D)*y+.5)/y,m.scaleZ=(0|Math.sqrt(I*I+H*H)*y+.5)/y,m.skewX=0,m.perspective=B?1/(0>B?-B:B):0,m.x=R,m.y=F,m.z=N}else if(!($e&&!n&&c.length&&m.x===c[4]&&m.y===c[5]&&(m.rotationX||m.rotationY)||void 0!==m.x&&"none"===X(e,"display",t))){var G=c.length>=6,q=G?c[0]:1,W=c[1]||0,Q=c[2]||0,Y=G?c[3]:1;m.x=c[4]||0,m.y=c[5]||0,u=Math.sqrt(q*q+W*W),h=Math.sqrt(Y*Y+Q*Q),g=q||W?Math.atan2(W,q)*U:m.rotation||0,d=Q||Y?Math.atan2(Q,Y)*U+g:m.skewX||0,Math.abs(d)>90&&270>Math.abs(d)&&(_?(u*=-1,d+=0>=g?180:-180,g+=0>=g?180:-180):(h*=-1,d+=0>=d?180:-180)),m.scaleX=u,m.scaleY=h,m.rotation=g,m.skewX=d,$e&&(m.rotationX=m.rotationY=m.z=0,m.perspective=w,m.scaleZ=1)}m.zOrigin=b;for(l in m)v>m[l]&&m[l]>-v&&(m[l]=0)}return o&&(e._gsTransform=m),m},Ie=function(e){var t,o,n=this.data,i=-n.rotation*I,a=i+n.skewX*I,r=1e5,s=(0|Math.cos(i)*n.scaleX*r)/r,c=(0|Math.sin(i)*n.scaleX*r)/r,l=(0|Math.sin(a)*-n.scaleY*r)/r,p=(0|Math.cos(a)*n.scaleY*r)/r,f=this.t.style,u=this.t.currentStyle;if(u){o=c,c=-l,l=-o,t=u.filter,f.filter="";var h,g,d=this.t.offsetWidth,_=this.t.offsetHeight,v="absolute"!==u.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+c+", M21="+l+", M22="+p,b=n.x+d*n.xPercent/100,j=n.y+_*n.yPercent/100;if(null!=n.ox&&(h=(n.oxp?.01*d*n.ox:n.ox)-d/2,g=(n.oyp?.01*_*n.oy:n.oy)-_/2,b+=h-(h*s+g*c),j+=g-(h*l+g*p)),v?(h=d/2,g=_/2,y+=", Dx="+(h-(h*s+g*c)+b)+", Dy="+(g-(h*l+g*p)+j)+")"):y+=", sizingMethod='auto expand')",f.filter=-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?t.replace(L,y):y+" "+t,(0===e||1===e)&&1===s&&0===c&&0===l&&1===p&&(v&&-1===y.indexOf("Dx=0, Dy=0")||k.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&f.removeAttribute("filter")),!v){var x,S,$,C=8>m?1:-1;for(h=n.ieOffsetX||0,g=n.ieOffsetY||0,n.ieOffsetX=Math.round((d-((0>s?-s:s)*d+(0>c?-c:c)*_))/2+b),n.ieOffsetY=Math.round((_-((0>p?-p:p)*_+(0>l?-l:l)*d))/2+j),_e=0;4>_e;_e++)S=oe[_e],x=u[S],o=-1!==x.indexOf("px")?parseFloat(x):Z(this.t,S,parseFloat(x),x.replace(w,""))||0,$=o!==n[S]?2>_e?-n.ieOffsetX:-n.ieOffsetY:2>_e?h-n.ieOffsetX:g-n.ieOffsetY,f[S]=(n[S]=Math.round(o-$*(0===_e||2===_e?1:C)))+"px"}}},Ue=F.set3DTransformRatio=function(e){var t,o,n,i,a,r,s,c,l,p,f,u,h,d,m,_,v,y,b,w,k,j=this.data,x=this.t.style,S=j.rotation*I,$=j.scaleX,C=j.scaleY,T=j.scaleZ,P=j.x,E=j.y,A=j.z,L=j.perspective;if(!(1!==e&&0!==e&&j.force3D||j.force3D===!0||j.rotationY||j.rotationX||1!==T||L||A))return void Oe.call(this,e);if(g&&(d=1e-4,d>$&&$>-d&&($=T=2e-5),d>C&&C>-d&&(C=T=2e-5),!L||j.z||j.rotationX||j.rotationY||(L=0)),S||j.skewX)m=t=Math.cos(S),_=i=Math.sin(S),j.skewX&&(S-=j.skewX*I,m=Math.cos(S),_=Math.sin(S),"simple"===j.skewType&&(v=Math.tan(j.skewX*I),v=Math.sqrt(1+v*v),m*=v,_*=v)),o=-_,a=m;else{if(!(j.rotationY||j.rotationX||1!==T||L||j.svg))return void(x[je]=(j.xPercent||j.yPercent?"translate("+j.xPercent+"%,"+j.yPercent+"%) translate3d(":"translate3d(")+P+"px,"+E+"px,"+A+"px)"+(1!==$||1!==C?" scale("+$+","+C+")":""));t=a=1,o=i=0}l=1,n=r=s=c=p=f=0,u=L?-1/L:0,h=j.zOrigin,d=1e-6,w=",",k="0",S=j.rotationY*I,S&&(m=Math.cos(S),_=Math.sin(S),s=-_,p=u*-_,n=t*_,r=i*_,l=m,u*=m,t*=m,i*=m),S=j.rotationX*I,S&&(m=Math.cos(S),_=Math.sin(S),v=o*m+n*_,y=a*m+r*_,c=l*_,f=u*_,n=o*-_+n*m,r=a*-_+r*m,l*=m,u*=m,o=v,a=y),1!==T&&(n*=T,r*=T,l*=T,u*=T),1!==C&&(o*=C,a*=C,c*=C,f*=C),1!==$&&(t*=$,i*=$,s*=$,p*=$),(h||j.svg)&&(h&&(P+=n*-h,E+=r*-h,A+=l*-h+h),j.svg&&(P+=j.xOrigin-(j.xOrigin*t+j.yOrigin*o),E+=j.yOrigin-(j.xOrigin*i+j.yOrigin*a)),d>P&&P>-d&&(P=k),d>E&&E>-d&&(E=k),d>A&&A>-d&&(A=0)),b=j.xPercent||j.yPercent?"translate("+j.xPercent+"%,"+j.yPercent+"%) matrix3d(":"matrix3d(",b+=(d>t&&t>-d?k:t)+w+(d>i&&i>-d?k:i)+w+(d>s&&s>-d?k:s),b+=w+(d>p&&p>-d?k:p)+w+(d>o&&o>-d?k:o)+w+(d>a&&a>-d?k:a),j.rotationX||j.rotationY?(b+=w+(d>c&&c>-d?k:c)+w+(d>f&&f>-d?k:f)+w+(d>n&&n>-d?k:n),b+=w+(d>r&&r>-d?k:r)+w+(d>l&&l>-d?k:l)+w+(d>u&&u>-d?k:u)+w):b+=",0,0,0,0,1,0,",b+=P+w+E+w+A+w+(L?1+-A/L:1)+")",x[je]=b},Oe=F.set2DTransformRatio=function(e){var t,o,n,i,a,r,s,c,l,p,f,u=this.data,h=this.t,g=h.style,d=u.x,m=u.y;return!(u.rotationX||u.rotationY||u.z||u.force3D===!0||"auto"===u.force3D&&1!==e&&0!==e)||u.svg&&we||!$e?(i=u.scaleX,a=u.scaleY,void(u.rotation||u.skewX||u.svg?(t=u.rotation*I,o=t-u.skewX*I,n=1e5,r=Math.cos(t)*i,s=Math.sin(t)*i,c=Math.sin(o)*-a,l=Math.cos(o)*a,u.svg&&(d+=u.xOrigin-(u.xOrigin*r+u.yOrigin*c),m+=u.yOrigin-(u.xOrigin*s+u.yOrigin*l),f=1e-6,f>d&&d>-f&&(d=0),f>m&&m>-f&&(m=0)),p=(0|r*n)/n+","+(0|s*n)/n+","+(0|c*n)/n+","+(0|l*n)/n+","+d+","+m+")",u.svg&&we?h.setAttribute("transform","matrix("+p):g[je]=(u.xPercent||u.yPercent?"translate("+u.xPercent+"%,"+u.yPercent+"%) matrix(":"matrix(")+p):g[je]=(u.xPercent||u.yPercent?"translate("+u.xPercent+"%,"+u.yPercent+"%) matrix(":"matrix(")+i+",0,0,"+a+","+d+","+m+")")):(this.setRatio=Ue,void Ue.call(this,e))};p=Ce.prototype,p.x=p.y=p.z=p.skewX=p.skewY=p.rotation=p.rotationX=p.rotationY=p.zOrigin=p.xPercent=p.yPercent=0,p.scaleX=p.scaleY=p.scaleZ=1,ye("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(e,t,o,n,i,r,c){if(n._lastParsedTransform===c)return i;n._lastParsedTransform=c;var l,p,f,u,h,g,d,m=n._transform=Me(e,a,!0,c.parseTransform),_=e.style,v=1e-6,y=ke.length,b=c,w={};if("string"==typeof b.transform&&je)f=H.style,f[je]=b.transform,f.display="block",f.position="absolute",z.body.appendChild(H),l=Me(H,null,!1),z.body.removeChild(H);else if("object"==typeof b){if(l={scaleX:re(null!=b.scaleX?b.scaleX:b.scale,m.scaleX),scaleY:re(null!=b.scaleY?b.scaleY:b.scale,m.scaleY),scaleZ:re(b.scaleZ,m.scaleZ),x:re(b.x,m.x),y:re(b.y,m.y),z:re(b.z,m.z),xPercent:re(b.xPercent,m.xPercent),yPercent:re(b.yPercent,m.yPercent),perspective:re(b.transformPerspective,m.perspective)},d=b.directionalRotation,null!=d)if("object"==typeof d)for(f in d)b[f]=d[f];else b.rotation=d;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(l.x=0,l.xPercent=re(b.x,m.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(l.y=0,l.yPercent=re(b.y,m.yPercent)),l.rotation=se("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":"rotationZ"in b?b.rotationZ:m.rotation,m.rotation,"rotation",w),$e&&(l.rotationX=se("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",w),l.rotationY=se("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",w)),l.skewX=null==b.skewX?m.skewX:se(b.skewX,m.skewX),l.skewY=null==b.skewY?m.skewY:se(b.skewY,m.skewY),(p=l.skewY-m.skewY)&&(l.skewX+=p,l.rotation+=p)}for($e&&null!=b.force3D&&(m.force3D=b.force3D,g=!0),m.skewType=b.skewType||m.skewType||s.defaultSkewType,h=m.force3D||m.z||m.rotationX||m.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,h||null==b.scale||(l.scaleZ=1);--y>-1;)o=ke[y],u=l[o]-m[o],(u>v||-v>u||null!=b[o]||null!=O[o])&&(g=!0,i=new de(m,o,m[o],u,i),o in w&&(i.e=w[o]),i.xs0=0,i.plugin=r,n._overwriteProps.push(i.n));return u=b.transformOrigin,u&&m.svg&&(Le(e,ie(u),l),i=new de(m,"xOrigin",m.xOrigin,l.xOrigin-m.xOrigin,i,(-1),"transformOrigin"),i.b=m.xOrigin,i.e=i.xs0=l.xOrigin,i=new de(m,"yOrigin",m.yOrigin,l.yOrigin-m.yOrigin,i,(-1),"transformOrigin"),i.b=m.yOrigin,i.e=i.xs0=l.yOrigin,u="0px 0px"),(u||$e&&h&&m.zOrigin)&&(je?(g=!0,o=Se,u=(u||X(e,o,a,!1,"50% 50%"))+"",i=new de(_,o,0,0,i,(-1),"transformOrigin"),i.b=_[o],i.plugin=r,$e?(f=m.zOrigin,u=u.split(" "),m.zOrigin=(u.length>2&&(0===f||"0px"!==u[2])?parseFloat(u[2]):f)||0,i.xs0=i.e=u[0]+" "+(u[1]||"50%")+" 0px",i=new de(m,"zOrigin",0,0,i,(-1),i.n),i.b=f,i.xs0=i.e=m.zOrigin):i.xs0=i.e=u):ie(u+"",m)),g&&(n._transformType=m.svg&&we||!h&&3!==this._transformType?2:3),i},prefix:!0}),ye("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),ye("borderRadius",{defaultValue:"0px",parser:function(e,t,o,n,r){t=this.format(t);var s,c,l,p,f,u,h,g,d,m,_,v,y,b,w,k,j=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],x=e.style;for(d=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),s=t.split(" "),c=0;j.length>c;c++)this.p.indexOf("border")&&(j[c]=Q(j[c])),f=p=X(e,j[c],a,!1,"0px"),-1!==f.indexOf(" ")&&(p=f.split(" "),f=p[0],p=p[1]),u=l=s[c],h=parseFloat(f),v=f.substr((h+"").length),y="="===u.charAt(1),y?(g=parseInt(u.charAt(0)+"1",10),u=u.substr(2),g*=parseFloat(u),_=u.substr((g+"").length-(0>g?1:0))||""):(g=parseFloat(u),_=u.substr((g+"").length)),""===_&&(_=i[o]||v),_!==v&&(b=Z(e,"borderLeft",h,v),w=Z(e,"borderTop",h,v),"%"===_?(f=100*(b/d)+"%",p=100*(w/m)+"%"):"em"===_?(k=Z(e,"borderLeft",1,"em"),f=b/k+"em",p=w/k+"em"):(f=b+"px",p=w+"px"),y&&(u=parseFloat(f)+g+_,l=parseFloat(p)+g+_)),r=me(x,j[c],f+" "+p,u+" "+l,!1,"0px",r);return r},prefix:!0,formatter:ue("0px 0px 0px 0px",!1,!0)}),ye("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,o,n,i,r){var s,c,l,p,f,u,h="background-position",g=a||Y(e,null),d=this.format((g?m?g.getPropertyValue(h+"-x")+" "+g.getPropertyValue(h+"-y"):g.getPropertyValue(h):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),_=this.format(t);if(-1!==d.indexOf("%")!=(-1!==_.indexOf("%"))&&(u=X(e,"backgroundImage").replace(T,""),u&&"none"!==u)){for(s=d.split(" "),c=_.split(" "),R.setAttribute("src",u),l=2;--l>-1;)d=s[l],p=-1!==d.indexOf("%"),p!==(-1!==c[l].indexOf("%"))&&(f=0===l?e.offsetWidth-R.width:e.offsetHeight-R.height,s[l]=p?parseFloat(d)/100*f+"px":100*(parseFloat(d)/f)+"%");d=s.join(" ")}return this.parseComplex(e.style,d,_,i,r)},formatter:ie}),ye("backgroundSize",{defaultValue:"0 0",formatter:ie}),ye("perspective",{defaultValue:"0px",prefix:!0}),ye("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),ye("transformStyle",{prefix:!0}),ye("backfaceVisibility",{prefix:!0}),ye("userSelect",{prefix:!0}),ye("margin",{parser:he("marginTop,marginRight,marginBottom,marginLeft")}),ye("padding",{parser:he("paddingTop,paddingRight,paddingBottom,paddingLeft")}),ye("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,o,n,i,r){var s,c,l;return 9>m?(c=e.currentStyle,l=8>m?" ":",",s="rect("+c.clipTop+l+c.clipRight+l+c.clipBottom+l+c.clipLeft+")",t=this.format(t).split(",").join(l)):(s=this.format(X(e,this.p,a,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,s,t,i,r)}}),ye("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),ye("autoRound,strictUnits",{parser:function(e,t,o,n,i){return i}}),ye("border",{defaultValue:"0px solid #000",parser:function(e,t,o,n,i,r){return this.parseComplex(e.style,this.format(X(e,"borderTopWidth",a,!1,"0px")+" "+X(e,"borderTopStyle",a,!1,"solid")+" "+X(e,"borderTopColor",a,!1,"#000")),this.format(t),i,r)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(fe)||["#000"])[0]}}),ye("borderWidth",{parser:he("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),ye("float,cssFloat,styleFloat",{parser:function(e,t,o,n,i){var a=e.style,r="cssFloat"in a?"cssFloat":"styleFloat";return new de(a,r,0,0,i,(-1),o,(!1),0,a[r],t)}});var ze=function(e){var t,o=this.t,n=o.filter||X(this.data,"filter")||"",i=0|this.s+this.c*e;100===i&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(o.removeAttribute("filter"),t=!X(this.data,"filter")):(o.filter=n.replace(x,""),t=!0)),t||(this.xn1&&(o.filter=n=n||"alpha(opacity="+i+")"),-1===n.indexOf("pacity")?0===i&&this.xn1||(o.filter=n+" alpha(opacity="+i+")"):o.filter=n.replace(k,"opacity="+i))};ye("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,o,n,i,r){var s=parseFloat(X(e,"opacity",a,!1,"1")),c=e.style,l="autoAlpha"===o;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),l&&1===s&&"hidden"===X(e,"visibility",a)&&0!==t&&(s=0),B?i=new de(c,"opacity",s,t-s,i):(i=new de(c,"opacity",100*s,100*(t-s),i),i.xn1=l?1:0,c.zoom=1,i.type=2,i.b="alpha(opacity="+i.s+")",i.e="alpha(opacity="+(i.s+i.c)+")",i.data=e,i.plugin=r,i.setRatio=ze),l&&(i=new de(c,"visibility",0,0,i,(-1),null,(!1),0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit"),i.xs0="inherit",n._overwriteProps.push(i.n),n._overwriteProps.push(o)),i}});var De=function(e,t){t&&(e.removeProperty?("ms"===t.substr(0,2)&&(t="M"+t.substr(1)),e.removeProperty(t.replace($,"-$1").toLowerCase())):e.removeAttribute(t))},He=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,o=this.t.style;t;)t.v?o[t.p]=t.v:De(o,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};ye("className",{parser:function(e,t,o,i,r,s,c){var l,p,f,u,h,g=e.getAttribute("class")||"",d=e.style.cssText;if(r=i._classNamePT=new de(e,o,0,0,r,2),r.setRatio=He,r.pr=-11,n=!0,r.b=g,p=K(e,a),f=e._gsClassPT){for(u={},h=f.data;h;)u[h.p]=1,h=h._next;f.setRatio(1)}return e._gsClassPT=r,r.e="="!==t.charAt(1)?t:g.replace(RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),i._tween._duration&&(e.setAttribute("class",r.e),l=ee(e,p,K(e),c,u),e.setAttribute("class",g),r.data=l.firstMPT,e.style.cssText=d,r=r.xfirst=i.parse(e,l.difs,r,s)),r}});var Re=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,o,n,i,a=this.t.style,r=l.transform.parse;if("all"===this.e)a.cssText="",i=!0;else for(t=this.e.split(" ").join("").split(","),n=t.length;--n>-1;)o=t[n],l[o]&&(l[o].parse===r?i=!0:o="transformOrigin"===o?Se:l[o].p),De(a,o);i&&(De(a,je),this.t._gsTransform&&delete this.t._gsTransform)}};for(ye("clearProps",{parser:function(e,t,o,i,a){return a=new de(e,o,0,0,a,2),a.setRatio=Re,a.e=t,a.pr=-10,a.data=i._tween,n=!0,a}}),p="bezier,throwProps,physicsProps,physics2D".split(","),_e=p.length;_e--;)be(p[_e]);p=s.prototype,p._firstPT=p._lastParsedTransform=p._transform=null,p._onInitTween=function(e,t,o){if(!e.nodeType)return!1;this._target=e,this._tween=o,this._vars=t,f=t.autoRound,n=!1,i=t.suffixMap||s.suffixMap,a=Y(e,""),r=this._overwriteProps;var c,l,p,g,m,_,v,y,b,w=e.style;if(u&&""===w.zIndex&&(c=X(e,"zIndex",a),("auto"===c||""===c)&&this._addLazySet(w,"zIndex",0)),"string"==typeof t&&(g=w.cssText,c=K(e,a),w.cssText=g+";"+t,c=ee(e,c,K(e)).difs,!B&&j.test(t)&&(c.opacity=parseFloat(RegExp.$1)),t=c,w.cssText=g),this._firstPT=l=this.parse(e,t,null),this._transformType){for(b=3===this._transformType,je?h&&(u=!0,""===w.zIndex&&(v=X(e,"zIndex",a),("auto"===v||""===v)&&this._addLazySet(w,"zIndex",0)),d&&this._addLazySet(w,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(b?"visible":"hidden"))):w.zoom=1,p=l;p&&p._next;)p=p._next;y=new de(e,"transform",0,0,null,2),this._linkCSSP(y,null,p),y.setRatio=b&&$e?Ue:je?Oe:Ie,y.data=this._transform||Me(e,a,!0),r.pop()}if(n){for(;l;){for(_=l._next,p=g;p&&p.pr>l.pr;)p=p._next;(l._prev=p?p._prev:m)?l._prev._next=l:g=l,(l._next=p)?p._prev=l:m=l,l=_}this._firstPT=g}return!0},p.parse=function(e,t,o,n){var r,s,c,p,u,h,g,d,m,_,v=e.style;for(r in t)h=t[r],s=l[r],s?o=s.parse(e,h,r,this,o,n,t):(u=X(e,r,a)+"",m="string"==typeof h,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||m&&S.test(h)?(m||(h=pe(h),h=(h.length>3?"rgba(":"rgb(")+h.join(",")+")"),o=me(v,r,u,h,!0,"transparent",o,0,n)):!m||-1===h.indexOf(" ")&&-1===h.indexOf(",")?(c=parseFloat(u),g=c||0===c?u.substr((c+"").length):"",(""===u||"auto"===u)&&("width"===r||"height"===r?(c=ne(e,r,a),g="px"):"left"===r||"top"===r?(c=J(e,r,a),g="px"):(c="opacity"!==r?0:1,g="")),_=m&&"="===h.charAt(1),_?(p=parseInt(h.charAt(0)+"1",10),h=h.substr(2),p*=parseFloat(h),d=h.replace(w,"")):(p=parseFloat(h),d=m?h.replace(w,""):""),""===d&&(d=r in i?i[r]:g),h=p||0===p?(_?p+c:p)+d:t[r],g!==d&&""!==d&&(p||0===p)&&c&&(c=Z(e,r,c,g),"%"===d?(c/=Z(e,r,100,"%")/100,t.strictUnits!==!0&&(u=c+"%")):"em"===d?c/=Z(e,r,1,"em"):"px"!==d&&(p=Z(e,r,p,d),d="px"),_&&(p||0===p)&&(h=p+c+d)),_&&(p+=c),!c&&0!==c||!p&&0!==p?void 0!==v[r]&&(h||"NaN"!=h+""&&null!=h)?(o=new de(v,r,p||c||0,0,o,(-1),r,(!1),0,u,h),o.xs0="none"!==h||"display"!==r&&-1===r.indexOf("Style")?h:u):G("invalid "+r+" tween value: "+t[r]):(o=new de(v,r,c,p-c,o,0,r,f!==!1&&("px"===d||"zIndex"===r),0,u,h),o.xs0=d)):o=me(v,r,u,h,!0,null,o,0,n)),n&&o&&!o.plugin&&(o.plugin=n);
return o},p.setRatio=function(e){var t,o,n,i=this._firstPT,a=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;i;){if(t=i.c*e+i.s,i.r?t=Math.round(t):a>t&&t>-a&&(t=0),i.type)if(1===i.type)if(n=i.l,2===n)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2;else if(3===n)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3;else if(4===n)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4;else if(5===n)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4+i.xn4+i.xs5;else{for(o=i.xs0+t+i.xs1,n=1;i.l>n;n++)o+=i["xn"+n]+i["xs"+(n+1)];i.t[i.p]=o}else-1===i.type?i.t[i.p]=i.xs0:i.setRatio&&i.setRatio(e);else i.t[i.p]=t+i.xs0;i=i._next}else for(;i;)2!==i.type?i.t[i.p]=i.b:i.setRatio(e),i=i._next;else for(;i;)2!==i.type?i.t[i.p]=i.e:i.setRatio(e),i=i._next},p._enableTransforms=function(e){this._transform=this._transform||Me(this._target,a,!0),this._transformType=this._transform.svg&&we||!e&&3!==this._transformType?2:3};var Fe=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};p._addLazySet=function(e,t,o){var n=this._firstPT=new de(e,t,0,0,this._firstPT,2);n.e=o,n.setRatio=Fe,n.data=this},p._linkCSSP=function(e,t,o,n){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,n=!0),o?o._next=e:n||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=o),e},p._kill=function(e){var o,n,i,a=e;if(e.autoAlpha||e.alpha){a={};for(n in e)a[n]=e[n];a.opacity=1,a.autoAlpha&&(a.visibility=1)}return e.className&&(o=this._classNamePT)&&(i=o.xfirst,i&&i._prev?this._linkCSSP(i._prev,o._next,i._prev._prev):i===this._firstPT&&(this._firstPT=o._next),o._next&&this._linkCSSP(o._next,o._next._next,i._prev),this._classNamePT=null),t.prototype._kill.call(this,a)};var Ne=function(e,t,o){var n,i,a,r;if(e.slice)for(i=e.length;--i>-1;)Ne(e[i],t,o);else for(n=e.childNodes,i=n.length;--i>-1;)a=n[i],r=a.type,a.style&&(t.push(K(a)),o&&o.push(a)),1!==r&&9!==r&&11!==r||!a.childNodes.length||Ne(a,t,o)};return s.cascadeTo=function(e,t,n){var i,a,r,s=o.to(e,t,n),c=[s],l=[],p=[],f=[],u=o._internals.reservedProps;for(e=s._targets||s.target,Ne(e,l,f),s.render(t,!0),Ne(e,p),s.render(0,!0),s._enabled(!0),i=f.length;--i>-1;)if(a=ee(f[i],l[i],p[i]),a.firstMPT){a=a.difs;for(r in n)u[r]&&(a[r]=n[r]);c.push(o.to(f[i],t,a))}return c},t.activate([s]),s},!0),function(){var t=e._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(e,t,o){return this._tween=o,!0}}),o=t.prototype;o._onInitAllProps=function(){for(var e,t,o,n=this._tween,i=n.vars.roundProps instanceof Array?n.vars.roundProps:n.vars.roundProps.split(","),a=i.length,r={},s=n._propLookup.roundProps;--a>-1;)r[i[a]]=1;for(a=i.length;--a>-1;)for(e=i[a],t=n._firstPT;t;)o=t._next,t.pg?t.t._roundProps(r,!0):t.n===e&&(this._add(t.t,e,t.s,t.c),o&&(o._prev=t._prev),t._prev?t._prev._next=o:n._firstPT===t&&(n._firstPT=o),t._next=t._prev=null,n._propLookup[e]=s),t=o;return!1},o._add=function(e,t,o,n){this._addTween(e,t,o,o+n,t,!0),this._overwriteProps.push(t)}}(),e._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(e,t){var o,n,i;if("function"!=typeof e.setAttribute)return!1;this._target=e,this._proxy={},this._start={},this._end={};for(o in t)this._start[o]=this._proxy[o]=n=e.getAttribute(o),i=this._addTween(this._proxy,o,parseFloat(n),t[o],o),this._end[o]=i?i.s+i.c:t[o],this._overwriteProps.push(o);return!0},set:function(e){this._super.setRatio.call(this,e);for(var t,o=this._overwriteProps,n=o.length,i=1===e?this._end:e?this._proxy:this._start;--n>-1;)t=o[n],this._target.setAttribute(t,i[t]+"")}}),e._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t){"object"!=typeof t&&(t={rotation:t}),this.finals={};var o,n,i,a,r,s,c=t.useRadians===!0?2*Math.PI:360,l=1e-6;for(o in t)"useRadians"!==o&&(s=(t[o]+"").split("_"),n=s[0],i=parseFloat("function"!=typeof e[o]?e[o]:e[o.indexOf("set")||"function"!=typeof e["get"+o.substr(3)]?o:"get"+o.substr(3)]()),a=this.finals[o]="string"==typeof n&&"="===n.charAt(1)?i+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0,r=a-i,s.length&&(n=s.join("_"),-1!==n.indexOf("short")&&(r%=c,r!==r%(c/2)&&(r=0>r?r+c:r-c)),-1!==n.indexOf("_cw")&&0>r?r=(r+9999999999*c)%c-(0|r/c)*c:-1!==n.indexOf("ccw")&&r>0&&(r=(r-9999999999*c)%c-(0|r/c)*c)),(r>l||-l>r)&&(this._addTween(e,o,i,i+r,o),this._overwriteProps.push(o)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,e._gsDefine("easing.Back",["easing.Ease"],function(t){var o,n,i,a=e.GreenSockGlobals||e,r=a.com.greensock,s=2*Math.PI,c=Math.PI/2,l=r._class,p=function(e,o){var n=l("easing."+e,function(){},!0),i=n.prototype=new t;return i.constructor=n,i.getRatio=o,n},f=t.register||function(){},u=function(e,t,o,n){var i=l("easing."+e,{easeOut:new t,easeIn:new o,easeInOut:new n},!0);return f(i,e),i},h=function(e,t,o){this.t=e,this.v=t,o&&(this.next=o,o.prev=this,this.c=o.v-t,this.gap=o.t-e)},g=function(e,o){var n=l("easing."+e,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),i=n.prototype=new t;return i.constructor=n,i.getRatio=o,i.config=function(e){return new n(e)},n},d=u("Back",g("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),g("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),g("BackInOut",function(e){return 1>(e*=2)?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),m=l("easing.SlowMo",function(e,t,o){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=o===!0},!0),_=m.prototype=new t;return _.constructor=m,_.getRatio=function(e){var t=e+(.5-e)*this._p;return this._p1>e?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},m.ease=new m(.7,.7),_.config=m.config=function(e,t,o){return new m(e,t,o)},o=l("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),_=o.prototype=new t,_.constructor=o,_.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},_.config=o.config=function(e){return new o(e)},n=l("easing.RoughEase",function(e){e=e||{};for(var o,n,i,a,r,s,c=e.taper||"none",l=[],p=0,f=0|(e.points||20),u=f,g=e.randomize!==!1,d=e.clamp===!0,m=e.template instanceof t?e.template:null,_="number"==typeof e.strength?.4*e.strength:.4;--u>-1;)o=g?Math.random():1/f*u,n=m?m.getRatio(o):o,"none"===c?i=_:"out"===c?(a=1-o,i=a*a*_):"in"===c?i=o*o*_:.5>o?(a=2*o,i=.5*a*a*_):(a=2*(1-o),i=.5*a*a*_),g?n+=Math.random()*i-.5*i:u%2?n+=.5*i:n-=.5*i,d&&(n>1?n=1:0>n&&(n=0)),l[p++]={x:o,y:n};for(l.sort(function(e,t){return e.x-t.x}),s=new h(1,1,null),u=f;--u>-1;)r=l[u],s=new h(r.x,r.y,s);this._prev=new h(0,0,0!==s.t?s:s.next)},!0),_=n.prototype=new t,_.constructor=n,_.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&t.t>=e;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},_.config=function(e){return new n(e)},n.ease=new n,u("Bounce",p("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),p("BounceIn",function(e){return 1/2.75>(e=1-e)?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),p("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),u("Circ",p("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),p("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),p("CircInOut",function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),i=function(e,o,n){var i=l("easing."+e,function(e,t){this._p1=e||1,this._p2=t||n,this._p3=this._p2/s*(Math.asin(1/this._p1)||0)},!0),a=i.prototype=new t;return a.constructor=i,a.getRatio=o,a.config=function(e,t){return new i(e,t)},i},u("Elastic",i("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*s/this._p2)+1},.3),i("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*s/this._p2))},.3),i("ElasticInOut",function(e){return 1>(e*=2)?-.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*s/this._p2):.5*this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*s/this._p2)+1},.45)),u("Expo",p("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),p("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),p("ExpoInOut",function(e){return 1>(e*=2)?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),u("Sine",p("SineOut",function(e){return Math.sin(e*c)}),p("SineIn",function(e){return-Math.cos(e*c)+1}),p("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),f(a.SlowMo,"SlowMo","ease,"),f(n,"RoughEase","ease,"),f(o,"SteppedEase","ease,"),d},!0)}),e._gsDefine&&e._gsQueue.pop()(),function(e,t){var o=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!o.TweenLite){var n,i,a,r,s,c=function(e){var t,n=e.split("."),i=o;for(t=0;n.length>t;t++)i[n[t]]=i=i[n[t]]||{};return i},l=c("com.greensock"),p=1e-10,f=function(e){var t,o=[],n=e.length;for(t=0;t!==n;o.push(e[t++]));return o},u=function(){},h=function(){var e=Object.prototype.toString,t=e.call([]);return function(o){return null!=o&&(o instanceof Array||"object"==typeof o&&!!o.push&&e.call(o)===t)}}(),g={},d=function(n,i,a,r){this.sc=g[n]?g[n].sc:[],g[n]=this,this.gsClass=null,this.func=a;var s=[];this.check=function(l){for(var p,f,u,h,m=i.length,_=m;--m>-1;)(p=g[i[m]]||new d(i[m],[])).gsClass?(s[m]=p.gsClass,_--):l&&p.sc.push(this);if(0===_&&a)for(f=("com.greensock."+n).split("."),u=f.pop(),h=c(f.join("."))[u]=this.gsClass=a.apply(a,s),r&&(o[u]=h,"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return h}):n===t&&"undefined"!=typeof module&&module.exports&&(module.exports=h)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},m=e._gsDefine=function(e,t,o,n){return new d(e,t,o,n)},_=l._class=function(e,t,o){return t=t||function(){},m(e,[],function(){return t},o),t};m.globals=o;var v=[0,0,1,1],y=[],b=_("easing.Ease",function(e,t,o,n){this._func=e,this._type=o||0,this._power=n||0,this._params=t?v.concat(t):v},!0),w=b.map={},k=b.register=function(e,t,o,n){for(var i,a,r,s,c=t.split(","),p=c.length,f=(o||"easeIn,easeOut,easeInOut").split(",");--p>-1;)for(a=c[p],i=n?_("easing."+a,null,!0):l.easing[a]||{},r=f.length;--r>-1;)s=f[r],w[a+"."+s]=w[s+a]=i[s]=e.getRatio?e:e[s]||new e};for(a=b.prototype,a._calcEnd=!1,a.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,o=this._power,n=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===o?n*=n:2===o?n*=n*n:3===o?n*=n*n*n:4===o&&(n*=n*n*n*n),1===t?1-n:2===t?n:.5>e?n/2:1-n/2},n=["Linear","Quad","Cubic","Quart","Quint,Strong"],i=n.length;--i>-1;)a=n[i]+",Power"+i,k(new b(null,null,1,i),a,"easeOut",!0),k(new b(null,null,2,i),a,"easeIn"+(0===i?",easeNone":"")),k(new b(null,null,3,i),a,"easeInOut");w.linear=l.easing.Linear.easeIn,w.swing=l.easing.Quad.easeInOut;var j=_("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});a=j.prototype,a.addEventListener=function(e,t,o,n,i){i=i||0;var a,c,l=this._listeners[e],p=0;for(null==l&&(this._listeners[e]=l=[]),c=l.length;--c>-1;)a=l[c],a.c===t&&a.s===o?l.splice(c,1):0===p&&i>a.pr&&(p=c+1);l.splice(p,0,{c:t,s:o,up:n,pr:i}),this!==r||s||r.wake()},a.removeEventListener=function(e,t){var o,n=this._listeners[e];if(n)for(o=n.length;--o>-1;)if(n[o].c===t)return void n.splice(o,1)},a.dispatchEvent=function(e){var t,o,n,i=this._listeners[e];if(i)for(t=i.length,o=this._eventTarget;--t>-1;)n=i[t],n&&(n.up?n.c.call(n.s||o,{type:e,target:o}):n.c.call(n.s||o))};var x=e.requestAnimationFrame,S=e.cancelAnimationFrame,$=Date.now||function(){return(new Date).getTime()},C=$();for(n=["ms","moz","webkit","o"],i=n.length;--i>-1&&!x;)x=e[n[i]+"RequestAnimationFrame"],S=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];_("Ticker",function(e,t){var o,n,i,a,c,l=this,f=$(),h=t!==!1&&x,g=500,d=33,m="tick",_=function(e){var t,r,s=$()-C;s>g&&(f+=s-d),C+=s,l.time=(C-f)/1e3,t=l.time-c,(!o||t>0||e===!0)&&(l.frame++,c+=t+(t>=a?.004:a-t),r=!0),e!==!0&&(i=n(_)),r&&l.dispatchEvent(m)};j.call(l),l.time=l.frame=0,l.tick=function(){_(!0)},l.lagSmoothing=function(e,t){g=e||1/p,d=Math.min(t,g,0)},l.sleep=function(){null!=i&&(h&&S?S(i):clearTimeout(i),n=u,i=null,l===r&&(s=!1))},l.wake=function(){null!==i?l.sleep():l.frame>10&&(C=$()-g+5),n=0===o?u:h&&x?x:function(e){return setTimeout(e,0|1e3*(c-l.time)+1)},l===r&&(s=!0),_(2)},l.fps=function(e){return arguments.length?(o=e,a=1/(o||60),c=this.time+a,void l.wake()):o},l.useRAF=function(e){return arguments.length?(l.sleep(),h=e,void l.fps(o)):h},l.fps(e),setTimeout(function(){h&&(!i||5>l.frame)&&l.useRAF(!1)},1500)}),a=l.Ticker.prototype=new l.events.EventDispatcher,a.constructor=l.Ticker;var T=_("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,B){s||r.wake();var o=this.vars.useFrames?N:B;o.add(this,o._time),this.vars.paused&&this.paused(!0)}});r=T.ticker=new l.Ticker,a=T.prototype,a._dirty=a._gc=a._initted=a._paused=!1,a._totalTime=a._time=0,a._rawPrevTime=-1,a._next=a._last=a._onUpdate=a._timeline=a.timeline=null,a._paused=!1;var P=function(){s&&$()-C>2e3&&r.wake(),setTimeout(P,2e3)};P(),a.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},a.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},a.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},a.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},a.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},a.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},a.render=function(){},a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},a.isActive=function(){var e,t=this._timeline,o=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=o&&o+this.totalDuration()/this._timeScale>e},a._enabled=function(e,t){return s||r.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},a._kill=function(){return this._enabled(!1,!1)},a.kill=function(e,t){return this._kill(e,t),this},a._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},a._swapSelfInParams=function(e){for(var t=e.length,o=e.concat();--t>-1;)"{self}"===e[t]&&(o[t]=this);return o},a.eventCallback=function(e,t,o,n){if("on"===(e||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[e];null==t?delete i[e]:(i[e]=t,i[e+"Params"]=h(o)&&-1!==o.join("").indexOf("{self}")?this._swapSelfInParams(o):o,i[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},a.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},a.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},a.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},a.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},a.totalTime=function(e,t,o){if(s||r.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!o&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,i=this._timeline;if(e>n&&!o&&(e=n),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?n-e:e)/this._timeScale,i._dirty||this._uncache(!1),i._timeline)for(;i._timeline;)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(this.render(e,t,!1),I.length&&V())}return this},a.progress=a.totalProgress=function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this._time/this.duration()},a.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},a.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},a.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||p,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,o=t||0===t?t:this._timeline.totalTime();this._startTime=o-(o-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},a.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},a.paused=function(e){if(!arguments.length)return this._paused;if(e!=this._paused&&this._timeline){s||e||r.wake();var t=this._timeline,o=t.rawTime(),n=o-this._pauseTime;!e&&t.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?o:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&this.render(t.smoothChildTiming?this._totalTime:(o-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!e&&this._enabled(!0,!1),this};var E=_("core.SimpleTimeline",function(e){T.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});a=E.prototype=new T,a.constructor=E,a.kill()._gc=!1,a._first=a._last=a._recent=null,a._sortChildren=!1,a.add=a.insert=function(e,t){var o,n;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),o=this._last,this._sortChildren)for(n=e._startTime;o&&o._startTime>n;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=o,this._recent=e,this._timeline&&this._uncache(!0),this},a._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},a.render=function(e,t,o){var n,i=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;i;)n=i._next,(i._active||e>=i._startTime&&!i._paused)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,o):i.render((e-i._startTime)*i._timeScale,t,o)),i=n},a.rawTime=function(){return s||r.wake(),this._totalTime};var A=_("TweenLite",function(t,o,n){if(T.call(this,o,n),this.render=A.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:A.selector(t)||t;var i,a,r,s=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),c=this.vars.overwrite;if(this._overwrite=c=null==c?F[A.defaultOverwrite]:"number"==typeof c?c>>0:F[c],(s||t instanceof Array||t.push&&h(t))&&"number"!=typeof t[0])for(this._targets=r=f(t),this._propLookup=[],this._siblings=[],i=0;r.length>i;i++)a=r[i],a?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(r.splice(i--,1),this._targets=r=r.concat(f(a))):(this._siblings[i]=G(a,this,!1),1===c&&this._siblings[i].length>1&&W(a,this,null,1,this._siblings[i])):(a=r[i--]=A.selector(a),"string"==typeof a&&r.splice(i+1,1)):r.splice(i--,1);else this._propLookup={},this._siblings=G(t,this,!1),1===c&&this._siblings.length>1&&W(t,this,null,1,this._siblings);(this.vars.immediateRender||0===o&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-p,this.render(-this._delay))},!0),L=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},M=function(e,t){var o,n={};for(o in e)R[o]||o in t&&"transform"!==o&&"x"!==o&&"y"!==o&&"width"!==o&&"height"!==o&&"className"!==o&&"border"!==o||!(!z[o]||z[o]&&z[o]._autoCSS)||(n[o]=e[o],delete e[o]);e.css=n};a=A.prototype=new T,a.constructor=A,a.kill()._gc=!1,a.ratio=0,a._firstPT=a._targets=a._overwrittenProps=a._startAt=null,a._notifyPluginsOfEnabled=a._lazy=!1,A.version="1.15.1",A.defaultEase=a._ease=new b(null,null,1,1),A.defaultOverwrite="auto",A.ticker=r,A.autoSleep=!0,A.lagSmoothing=function(e,t){r.lagSmoothing(e,t)},A.selector=e.$||e.jQuery||function(t){var o=e.$||e.jQuery;return o?(A.selector=o,o(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var I=[],U={},O=A._internals={isArray:h,isSelector:L,lazyTweens:I},z=A._plugins={},D=O.tweenLookup={},H=0,R=O.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},F={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},N=T._rootFramesTimeline=new E,B=T._rootTimeline=new E,V=O.lazyRender=function(){var e,t=I.length;for(U={};--t>-1;)e=I[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);I.length=0};B._startTime=r.time,N._startTime=r.frame,B._active=N._active=!0,setTimeout(V,1),T._updateRoot=A.render=function(){var e,t,o;if(I.length&&V(),B.render((r.time-B._startTime)*B._timeScale,!1,!1),N.render((r.frame-N._startTime)*N._timeScale,!1,!1),I.length&&V(),!(r.frame%120)){for(o in D){for(t=D[o].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete D[o]}if(o=B._first,(!o||o._paused)&&A.autoSleep&&!N._first&&1===r._listeners.tick.length){for(;o&&o._paused;)o=o._next;o||r.sleep()}}},r.addEventListener("tick",T._updateRoot);var G=function(e,t,o){var n,i,a=e._gsTweenID;if(D[a||(e._gsTweenID=a="t"+H++)]||(D[a]={target:e,tweens:[]}),t&&(n=D[a].tweens,n[i=n.length]=t,o))for(;--i>-1;)n[i]===t&&n.splice(i,1);return D[a].tweens},q=function(e,t,o,n){var i,a,r=e.vars.onOverwrite;return r&&(i=r(e,t,o,n)),r=A.onOverwrite,r&&(a=r(e,t,o,n)),i!==!1&&a!==!1},W=function(e,t,o,n,i){var a,r,s,c;if(1===n||n>=4){for(c=i.length,a=0;c>a;a++)if((s=i[a])!==t)s._gc||q(s,t)&&s._enabled(!1,!1)&&(r=!0);else if(5===n)break;return r}var l,f=t._startTime+p,u=[],h=0,g=0===t._duration;for(a=i.length;--a>-1;)(s=i[a])===t||s._gc||s._paused||(s._timeline!==t._timeline?(l=l||Q(t,0,g),0===Q(s,l,g)&&(u[h++]=s)):f>=s._startTime&&s._startTime+s.totalDuration()/s._timeScale>f&&((g||!s._initted)&&2e-10>=f-s._startTime||(u[h++]=s)));for(a=h;--a>-1;)if(s=u[a],2===n&&s._kill(o,e,t)&&(r=!0),2!==n||!s._firstPT&&s._initted){if(2!==n&&!q(s,t))continue;s._enabled(!1,!1)&&(r=!0)}return r},Q=function(e,t,o){for(var n=e._timeline,i=n._timeScale,a=e._startTime;n._timeline;){if(a+=n._startTime,i*=n._timeScale,n._paused)return-100;n=n._timeline}return a/=i,a>t?a-t:o&&a===t||!e._initted&&2*p>a-t?p:(a+=e.totalDuration()/e._timeScale/i)>t+p?0:a-t-p};a._init=function(){var e,t,o,n,i,a=this.vars,r=this._overwrittenProps,s=this._duration,c=!!a.immediateRender,l=a.ease;if(a.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),i={};for(n in a.startAt)i[n]=a.startAt[n];if(i.overwrite=!1,i.immediateRender=!0,i.lazy=c&&a.lazy!==!1,i.startAt=i.delay=null,this._startAt=A.to(this.target,0,i),c)if(this._time>0)this._startAt=null;else if(0!==s)return}else if(a.runBackwards&&0!==s)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(c=!1),o={};for(n in a)R[n]&&"autoCSS"!==n||(o[n]=a[n]);if(o.overwrite=0,o.data="isFromStart",o.lazy=c&&a.lazy!==!1,o.immediateRender=c,this._startAt=A.to(this.target,0,o),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof b?l:"function"==typeof l?new b(l,a.easeParams):w[l]||A.defaultEase:A.defaultEase,a.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],r?r[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,r);if(t&&A._onPluginEvent("_onInitAllProps",this),r&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(o=this._firstPT;o;)o.s+=o.c,o.c=-o.c,o=o._next;this._onUpdate=a.onUpdate,this._initted=!0},a._initProps=function(t,o,n,i){var a,r,s,c,l,p;if(null==t)return!1;U[t._gsTweenID]&&V(),this.vars.css||t.style&&t!==e&&t.nodeType&&z.css&&this.vars.autoCSS!==!1&&M(this.vars,t);for(a in this.vars){if(p=this.vars[a],R[a])p&&(p instanceof Array||p.push&&h(p))&&-1!==p.join("").indexOf("{self}")&&(this.vars[a]=p=this._swapSelfInParams(p,this));else if(z[a]&&(c=new z[a])._onInitTween(t,this.vars[a],this)){for(this._firstPT=l={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:!0,n:a,pg:!0,pr:c._priority},r=c._overwriteProps.length;--r>-1;)o[c._overwriteProps[r]]=this._firstPT;(c._priority||c._onInitAllProps)&&(s=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=o[a]=l={_next:this._firstPT,t:t,p:a,f:"function"==typeof t[a],n:a,pg:!1,pr:0},l.s=l.f?t[a.indexOf("set")||"function"!=typeof t["get"+a.substr(3)]?a:"get"+a.substr(3)]():parseFloat(t[a]),l.c="string"==typeof p&&"="===p.charAt(1)?parseInt(p.charAt(0)+"1",10)*Number(p.substr(2)):Number(p)-l.s||0;l&&l._next&&(l._next._prev=l)}return i&&this._kill(i,t)?this._initProps(t,o,n,i):this._overwrite>1&&this._firstPT&&n.length>1&&W(t,this,o,this._overwrite,n)?(this._kill(o,t),this._initProps(t,o,n,i)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(U[t._gsTweenID]=!0),s)},a.render=function(e,t,o){var n,i,a,r,s=this._time,c=this._duration,l=this._rawPrevTime;if(e>=c)this._totalTime=this._time=c,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,i="onComplete"),0===c&&(this._initted||!this.vars.lazy||o)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>l||l===p&&"isPause"!==this.data)&&l!==e&&(o=!0,l>p&&(i="onReverseComplete")),this._rawPrevTime=r=!t||e||l===e?e:p);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===c&&l>0&&l!==p)&&(i="onReverseComplete",n=this._reversed),0>e&&(this._active=!1,0===c&&(this._initted||!this.vars.lazy||o)&&(l>=0&&(l!==p||"isPause"!==this.data)&&(o=!0),this._rawPrevTime=r=!t||e||l===e?e:p)),this._initted||(o=!0);else if(this._totalTime=this._time=e,this._easeType){var f=e/c,u=this._easeType,h=this._easePower;(1===u||3===u&&f>=.5)&&(f=1-f),3===u&&(f*=2),1===h?f*=f:2===h?f*=f*f:3===h?f*=f*f*f:4===h&&(f*=f*f*f*f),this.ratio=1===u?1-f:2===u?f:.5>e/c?f/2:1-f/2}else this.ratio=this._ease.getRatio(e/c);if(this._time!==s||o){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!o&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=l,I.push(this),void(this._lazy=[e,t]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/c):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,t,o):i||(i="_dummyGS")),this.vars.onStart&&(0!==this._time||0===c)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||y))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>e&&this._startAt&&e!==-1e-4&&this._startAt.render(e,t,o),t||(this._time!==s||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||y)),i&&(!this._gc||o)&&(0>e&&this._startAt&&!this._onUpdate&&e!==-1e-4&&this._startAt.render(e,t,o),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||y),0===c&&this._rawPrevTime===p&&r!==p&&(this._rawPrevTime=0))}},a._kill=function(e,t,o){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:A.selector(t)||t;var n,i,a,r,s,c,l,p,f;if((h(t)||L(t))&&"number"!=typeof t[0])for(n=t.length;--n>-1;)this._kill(e,t[n])&&(c=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(t===this._targets[n]){s=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,i=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(l=e||s,p=e!==i&&"all"!==i&&e!==s&&("object"!=typeof e||!e._tempKill),o&&(A.onOverwrite||this.vars.onOverwrite)){for(a in l)s[a]&&(f||(f=[]),f.push(a));if(!q(this,o,t,f))return!1}for(a in l)(r=s[a])&&(r.pg&&r.t._kill(l)&&(c=!0),r.pg&&0!==r.t._overwriteProps.length||(r._prev?r._prev._next=r._next:r===this._firstPT&&(this._firstPT=r._next),r._next&&(r._next._prev=r._prev),r._next=r._prev=null),delete s[a]),p&&(i[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return c},a.invalidate=function(){return this._notifyPluginsOfEnabled&&A._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],T.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-p,this.render(-this._delay)),this},a._enabled=function(e,t){if(s||r.wake(),e&&this._gc){var o,n=this._targets;if(n)for(o=n.length;--o>-1;)this._siblings[o]=G(n[o],this,!0);else this._siblings=G(this.target,this,!0)}return T.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&A._onPluginEvent(e?"_onEnable":"_onDisable",this)},A.to=function(e,t,o){return new A(e,t,o)},A.from=function(e,t,o){return o.runBackwards=!0,o.immediateRender=0!=o.immediateRender,new A(e,t,o)},A.fromTo=function(e,t,o,n){return n.startAt=o,n.immediateRender=0!=n.immediateRender&&0!=o.immediateRender,new A(e,t,n)},A.delayedCall=function(e,t,o,n,i){return new A(t,0,{delay:e,onComplete:t,onCompleteParams:o,onCompleteScope:n,onReverseComplete:t,onReverseCompleteParams:o,onReverseCompleteScope:n,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},A.set=function(e,t){return new A(e,0,t);
},A.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:A.selector(e)||e;var o,n,i,a;if((h(e)||L(e))&&"number"!=typeof e[0]){for(o=e.length,n=[];--o>-1;)n=n.concat(A.getTweensOf(e[o],t));for(o=n.length;--o>-1;)for(a=n[o],i=o;--i>-1;)a===n[i]&&n.splice(o,1)}else for(n=G(e).concat(),o=n.length;--o>-1;)(n[o]._gc||t&&!n[o].isActive())&&n.splice(o,1);return n},A.killTweensOf=A.killDelayedCallsTo=function(e,t,o){"object"==typeof t&&(o=t,t=!1);for(var n=A.getTweensOf(e,t),i=n.length;--i>-1;)n[i]._kill(o,e)};var Y=_("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=Y.prototype},!0);if(a=Y.prototype,Y.version="1.10.1",Y.API=2,a._firstPT=null,a._addTween=function(e,t,o,n,i,a){var r,s;return null!=n&&(r="number"==typeof n||"="!==n.charAt(1)?Number(n)-o:parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)))?(this._firstPT=s={_next:this._firstPT,t:e,p:t,s:o,c:r,f:"function"==typeof e[t],n:i||t,r:a},s._next&&(s._next._prev=s),s):void 0},a.setRatio=function(e){for(var t,o=this._firstPT,n=1e-6;o;)t=o.c*e+o.s,o.r?t=Math.round(t):n>t&&t>-n&&(t=0),o.f?o.t[o.p](t):o.t[o.p]=t,o=o._next},a._kill=function(e){var t,o=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=o.length;--t>-1;)null!=e[o[t]]&&o.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},a._roundProps=function(e,t){for(var o=this._firstPT;o;)(e[this._propName]||null!=o.n&&e[o.n.split(this._propName+"_").join("")])&&(o.r=t),o=o._next},A._onPluginEvent=function(e,t){var o,n,i,a,r,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(r=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:a)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:a=s,s=r}s=t._firstPT=i}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(o=!0),s=s._next;return o},Y.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===Y.API&&(z[(new e[t])._propName]=e[t]);return!0},m.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,o=e.propName,n=e.priority||0,i=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},r=_("plugins."+o.charAt(0).toUpperCase()+o.substr(1)+"Plugin",function(){Y.call(this,o,n),this._overwriteProps=i||[]},e.global===!0),s=r.prototype=new Y(o);s.constructor=r,r.API=e.API;for(t in a)"function"==typeof e[t]&&(s[a[t]]=e[t]);return r.version=e.version,Y.activate([r]),r},n=e._gsQueue){for(i=0;n.length>i;i++)n[i]();for(a in g)g[a].func||e.console.log("GSAP encountered missing dependency: com.greensock."+a)}s=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax")}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotBubbleArticle",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/bubble/tpl/article.html",scope:t,controller:["$scope","$uibModalInstance",function(e,t){a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotBubbleImage",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){if(a.hotspot.src)if(a.hotspot.theme_type=a.hotspot.theme_type||"modal","fancybox"==a.hotspot.theme_type){var o=[];o.push({src:a.hotspot.src,opts:{caption:a.hotspot.caption}}),$.fancybox.open(o,{loop:!0})}else r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/bubble/tpl/image.html",scope:t,windowClass:"modal-auto-width",controller:["$scope","$uibModalInstance",function(e,t){angular.element(".modal-dialog").addClass("modal-auto-width"),a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotBubblePoint",function(){return{restrict:"E",controllerAs:"vm",controller:["LptHelper","$scope","$rootScope","$state","$timeout",function(e,t,o,n,i){function a(){r.hotspot.target_scene_id&&(r.hotspot.target_view&&(s.target_view=r.hotspot.target_view),o.$emit("evt.livesphere.changescene",s))}var r=this;r.hotspot=t.hotspot,r.project=t.project,r.onclick=a;var s=e.getObjectBy("_id",r.hotspot.target_scene_id,r.project.scenes);t.lptsphereinstance.addHotspotEventCallback("c-"+r.hotspot.name,"onclick",a),t.lptsphereinstance.addHotspotEventCallback(r.hotspot.name,"onclick",a)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotBubbleTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/bubble/tpl/textf.html",controllerAs:"vm",controller:["$scope","$timeout","LptHelper",function(e,t,o){function n(){t(function(){angular.element("#textf"+i.hotspot.name).toggleClass("active")})}var i=this;i.hotspot=e.hotspot,i.onclick=n,e.lptsphereinstance.addHotspotEventCallback(i.hotspot.name,"onclick",n)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotBubbleVideo",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$sce",function(t,o,n){function i(){a.hotspot.src&&(r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/bubble/tpl/video.html",scope:t,controller:["$scope","$uibModalInstance","$filter",function(e,t,o){a.cancel=function(){t.dismiss("cancel")},o("parseEmbed")(a.hotspot.src)&&(a.hotspot.src=o("parseEmbed")(a.hotspot.src),a.hotspot.src=n.trustAsHtml(a.hotspot.src))}]}))}var a=this,r=null;a.hotspot=t.hotspot,a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotCrystalArticle",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout","$rootScope",function(t,o,n,i){function a(){$("#scenelist-crystal").hasClass("off");i.isScenelistOff||i.$broadcast("evt.onsphereclick"),s=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/crystal/tpl/article.html",scope:t,controller:["$scope","$uibModalInstance",function(e,t){r.cancel=function(){i.isScenelistOff&&i.$broadcast("evt.onsphereclick"),t.dismiss("cancel")}}]})}var r=this;r.hotspot=t.hotspot,r.project=t.project;var s=null;r.onclick=a,t.lptsphereinstance.addHotspotEventCallback(r.hotspot.name,"onclick",a)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotCrystalImage",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){if(a.hotspot.src)if(a.hotspot.theme_type=a.hotspot.theme_type||"modal","fancybox"==a.hotspot.theme_type){var o=[];o.push({src:a.hotspot.src,opts:{caption:a.hotspot.caption}}),$.fancybox.open(o,{loop:!0})}else r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/crystal/tpl/image.html",scope:t,windowClass:"modal-auto-width hotspot-crystal-image-popup",controller:["$scope","$uibModalInstance",function(e,t){a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotCrystalPoint",function(){return{restrict:"E",controllerAs:"vm",controller:["LptHelper","$scope","$rootScope","$state","$timeout",function(e,t,o,n,i){function a(){r.hotspot.target_scene_id&&(r.hotspot.target_view&&(s.target_view=r.hotspot.target_view),o.$emit("evt.livesphere.changescene",s))}var r=this;r.hotspot=t.hotspot,r.project=t.project,r.onclick=a;var s=e.getObjectBy("_id",r.hotspot.target_scene_id,r.project.scenes);t.lptsphereinstance.addHotspotEventCallback("c-"+r.hotspot.name,"onclick",a),t.lptsphereinstance.addHotspotEventCallback(r.hotspot.name,"onclick",a)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotCrystalTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/crystal/tpl/textf.html",controllerAs:"vm",controller:["$scope","$timeout","LptHelper","$rootScope",function(e,t,o,n){function i(){t(function(){$("#scenelist-crystal").hasClass("off");(!a.isShow&&!n.isScenelistOff||a.isShow&&n.isScenelistOff)&&n.$broadcast("evt.onsphereclick"),angular.element("#textf"+a.hotspot.name).toggleClass("active"),$("#icon-textf").toggleClass("active"),a.isShow=!a.isShow})}var a=this;a.hotspot=e.hotspot,a.onclick=i,a.isShow=!1,e.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotCrystalVideo",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$sce",function(t,o,n){function i(){a.hotspot.src&&(r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/crystal/tpl/video.html",scope:t,controller:["$scope","$uibModalInstance","$filter",function(e,t,o){a.cancel=function(){t.dismiss("cancel")},o("parseEmbed")(a.hotspot.src)&&(a.hotspot.src=o("parseEmbed")(a.hotspot.src),a.hotspot.src=n.trustAsHtml(a.hotspot.src))}]}))}var a=this,r=null;a.hotspot=t.hotspot,a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotDefaultArticle",["$uibModal",function(e){return{restrict:"E",controller:["$scope","$state","$timeout",function(t,o,n){function i(){r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/default/tpl/article.html",scope:t,controller:["$scope","$uibModalInstance",function(e,t){e.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotDefaultImage",["$uibModal",function(e){return{restrict:"E",controller:["$scope","$state","$timeout",function(t,o,n){function i(){if(a.hotspot.src)if(a.hotspot.theme_type=a.hotspot.theme_type||"modal","fancybox"==a.hotspot.theme_type){var o=[];o.push({src:a.hotspot.src,opts:{caption:a.hotspot.caption}}),$.fancybox.open(o,{loop:!0})}else r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/default/tpl/image.html",scope:t,windowClass:"modal-auto-width",controller:["$scope","$uibModalInstance",function(e,t){e.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotDefaultPoint",function(){return{restrict:"E",controller:["$scope","$state","$timeout",function(e,t,o){var n=this;n.hotspot=e.hotspot,n.project=e.project}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotDefaultTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/default/tpl/textf.html",controllerAs:"vm",controller:["$scope","LptHelper",function(e,t){function o(){angular.element("#textf"+i.hotspot.name).toggleClass("active"),n()}function n(){t.stickElementWithHotspot("#textf"+i.hotspot.name,i.hotspot.name,e.lptsphereinstance,25,-24)}var i=this;i.hotspot=e.hotspot,i.updatePopoverPosition=n,i.togglePopover=o,e.lptsphereinstance.addHotspotEventCallback(i.hotspot.name,"onclick",o),e.lptsphereinstance.on("onviewchange",n,i.hotspot.name)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotDefaultVideo",["$uibModal",function(e){return{restrict:"E",controller:["$scope","$state","$sce",function(t,o,n){function i(){a=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/default/tpl/video.html",scope:t,controllerAs:"vm",controller:["$scope","$uibModalInstance","$filter",function(e,t,o){var i=this;i.hotspot=e.hotspot,i.cancel=function(){t.dismiss("cancel")},o("parseEmbed")(i.hotspot.src)&&(i.hotspot.src=o("parseEmbed")(i.hotspot.src),i.hotspot.src=n.trustAsHtml(i.hotspot.src))}]})}var a=null;t.lptsphereinstance.addHotspotEventCallback(t.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGifyArticle",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/gify/tpl/article.html",scope:t,controller:["$scope","$uibModalInstance",function(e,t){a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGifyImage",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){if(a.hotspot.src)if(a.hotspot.theme_type=a.hotspot.theme_type||"modal","fancybox"==a.hotspot.theme_type){var o=[];o.push({src:a.hotspot.src,opts:{caption:a.hotspot.caption}}),$.fancybox.open(o,{loop:!0})}else r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/gify/tpl/image.html",scope:t,windowClass:"modal-auto-width",controller:["$scope","$uibModalInstance",function(e,t){a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGifyPoint",function(){return{restrict:"E",controllerAs:"vm",controller:["LptHelper","$scope","$rootScope","$state","$timeout",function(e,t,o,n,i){function a(){if(r.hotspot.target_scene_id){var t=e.getObjectBy("_id",r.hotspot.target_scene_id,r.project.scenes);r.hotspot.target_view&&(t.target_view=r.hotspot.target_view),o.$emit("evt.livesphere.changescene",t)}}var r=this;r.hotspot=t.hotspot,r.project=t.project,r.onclick=a;e.getObjectBy("_id",r.hotspot.target_scene_id,r.project.scenes);t.lptsphereinstance.addHotspotEventCallback("c-"+r.hotspot.name,"onclick",a),t.lptsphereinstance.addHotspotEventCallback(r.hotspot.name,"onclick",a)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGifyTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/gify/tpl/textf.html",controllerAs:"vm",controller:["$scope","LptHelper",function(e,t){function o(){angular.element("#textf"+n.hotspot.name).toggleClass("active")}var n=this;n.hotspot=e.hotspot,n.onclick=o,e.lptsphereinstance.addHotspotEventCallback(n.hotspot.name,"onclick",o)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGifyVideo",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$sce",function(t,o,n){function i(){a.hotspot.src&&(r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/gify/tpl/video.html",scope:t,controller:["$scope","$uibModalInstance","$filter",function(e,t,o){a.cancel=function(){t.dismiss("cancel")},o("parseEmbed")(a.hotspot.src)&&(a.hotspot.src=o("parseEmbed")(a.hotspot.src),a.hotspot.src=n.trustAsHtml(a.hotspot.src))}]}))}var a=this,r=null;a.hotspot=t.hotspot,a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGradyArticle",["$uibModal",function(e){return{restrict:"E",controller:["$scope","$state","$timeout",function(t,o,n){function i(){r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/grady/tpl/article.html",scope:t,controller:["$scope","$uibModalInstance",function(e,t){e.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGradyImage",["$uibModal",function(e){return{restrict:"E",controller:["$scope","$state","$timeout",function(t,o,n){function i(){if(a.hotspot.src)if(a.hotspot.theme_type=a.hotspot.theme_type||"modal","fancybox"==a.hotspot.theme_type){var o=[];o.push({src:a.hotspot.src,opts:{caption:a.hotspot.caption}}),$.fancybox.open(o,{loop:!0})}else r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/grady/tpl/image.html",scope:t,windowClass:"modal-auto-width",controller:["$scope","$uibModalInstance",function(e,t){e.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGradyTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/grady/tpl/textf.html",controllerAs:"vm",controller:["$scope","LptHelper",function(e,t){function o(){angular.element("#textf"+i.hotspot.name).toggleClass("active"),n()}function n(){t.stickElementWithHotspot("#textf"+i.hotspot.name,i.hotspot.name,e.lptsphereinstance,25,-24)}var i=this;i.hotspot=e.hotspot,i.updatePopoverPosition=n,i.togglePopover=o,e.lptsphereinstance.addHotspotEventCallback(i.hotspot.name,"onclick",o),e.lptsphereinstance.on("onviewchange",n,i.hotspot.name)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotGradyVideo",["$uibModal",function(e){return{restrict:"E",controller:["$scope","$state","$sce",function(t,o,n){function i(){a=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/grady/tpl/video.html",scope:t,controllerAs:"vm",controller:["$scope","$uibModalInstance","$filter",function(e,t,o){var i=this;i.hotspot=e.hotspot,i.cancel=function(){t.dismiss("cancel")},o("parseEmbed")(i.hotspot.src)&&(i.hotspot.src=o("parseEmbed")(i.hotspot.src),i.hotspot.src=n.trustAsHtml(i.hotspot.src))}]})}var a=null;t.lptsphereinstance.addHotspotEventCallback(t.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotRoyalArticle",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/royal/tpl/article.html",scope:t,controller:["$scope","$uibModalInstance",function(e,t){a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotRoyalImage",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$timeout",function(t,o,n){function i(){if(a.hotspot.src)if(a.hotspot.theme_type=a.hotspot.theme_type||"modal","fancybox"==a.hotspot.theme_type){var o=[];o.push({src:a.hotspot.src,opts:{caption:a.hotspot.caption}}),$.fancybox.open(o,{loop:!0})}else r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/royal/tpl/image.html",scope:t,windowClass:"modal-auto-width",controller:["$scope","$uibModalInstance",function(e,t){a.cancel=function(){t.dismiss("cancel")}}]})}var a=this;a.hotspot=t.hotspot,a.project=t.project;var r=null;a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotRoyalPoint",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/royal/tpl/point.html",controllerAs:"vm",controller:["LptHelper","$scope","$rootScope","$state","$timeout",function(e,t,o,n,i){function a(){i(function(){c.isActive=!0},800)}function r(){c.isActive=!1}function s(){c.hotspot.target_scene_id&&(c.hotspot.target_view&&(l.target_view=c.hotspot.target_view),o.$emit("evt.livesphere.changescene",l))}var c=this;c.hotspot=t.hotspot,c.project=t.project,c.onclick=s,c.onmouseover=a,c.onmouseout=r,c.isActive=!1;var l=e.getObjectBy("_id",c.hotspot.target_scene_id,c.project.scenes);t.lptsphereinstance.addHotspotEventCallback("c-"+c.hotspot.name,"onclick",s),t.lptsphereinstance.addHotspotEventCallback(c.hotspot.name,"onclick",s)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotRoyalTextf",function(){return{restrict:"E",templateUrl:"modules/lapentor.marketplace/themes/hotspot/royal/tpl/textf.html",controllerAs:"vm",controller:["$scope","LptHelper","$timeout",function(e,t,o){function n(){o(function(){a.isActive=!0},800)}function i(){a.isActive=!1}var a=this;a.hotspot=e.hotspot,a.onmouseover=n,a.onmouseout=i,a.isActive=!1,e.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",n)}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.themes").directive("hotspotRoyalVideo",["$uibModal",function(e){return{restrict:"E",controllerAs:"vm",controller:["$scope","$state","$sce",function(t,o,n){function i(){a.hotspot.src&&(r=e.open({templateUrl:"modules/lapentor.marketplace/themes/hotspot/royal/tpl/video.html",scope:t,controller:["$scope","$uibModalInstance","$filter",function(e,t,o){a.cancel=function(){t.dismiss("cancel")},o("parseEmbed")(a.hotspot.src)&&(a.hotspot.src=o("parseEmbed")(a.hotspot.src),a.hotspot.src=n.trustAsHtml(a.hotspot.src))}]}))}var a=this,r=null;a.hotspot=t.hotspot,a.onclick=i,t.lptsphereinstance.addHotspotEventCallback(a.hotspot.name,"onclick",i)}]}}])}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginGalleryClipped",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/gallery/lib/clipped/clipped.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout","$ocLazyLoad",function(e,t,o,n){var i=this;i.pluginInterface=e.pluginVm,i.config=i.pluginInterface.config,i.gallery=[],i.ShowGallery=!1,"yes"==i.config.show_on_start&&o(function(){i.ShowGallery=!0}),n.load("bower_components/snap.svg-min.js").then(function(){function n(e){this.element=e,this.slidesGallery=this.element.find(".gallery").children("li"),this.slidesCaption=this.element.find(".caption").children("li"),this.slidesNumber=this.slidesGallery.length,this.selectedSlide=this.slidesGallery.filter(".selected").index(),this.arrowNext=this.element.find(".navigation").find(".next"),this.arrowPrev=this.element.find(".navigation").find(".prev"),this.visibleSlidePath=this.element.data("selected"),this.lateralSlidePath=this.element.data("lateral"),this.bindEvents()}angular.isUndefined(i.config.gallery)&&(i.config.gallery={}),i.config.type||(i.config.type="project"),i.config.gallery.project&&"project"==i.config.type&&(i.gallery=$.map(i.config.gallery.project,function(e,t){return[e]}),o(function(){a=$(".no-csstransitions").length>0?0:300,$(".cd-svg-clipped-slider").each(function(){new n($(this))})},200)),e.$on("evt.krpano.onxmlcomplete",function(){"scene"==i.config.type&&(i.config.gallery[e.scene._id]||(i.gallery=[]),i.gallery=$.map(i.config.gallery[e.scene._id],function(e,t){return[e]}),o(function(){a=$(".no-csstransitions").length>0?0:300,$(".cd-svg-clipped-slider").each(function(){new n($(this))})},200))});var a,r="evt.controlbar."+i.pluginInterface.plugin.slug+"gallery-";t.$on(r+"toggle",function(e,t){"click"==t&&(i.ShowGallery=!i.ShowGallery)}),n.prototype.bindEvents=function(){var e=this;this.slidesGallery.on("click",function(t){if(!$(this).hasClass("selected")){$(this).hasClass("left")?e.showPrevSlide(e.selectedSlide-1):e.showNextSlide(e.selectedSlide+1)}})},n.prototype.showPrevSlide=function(e){var t=this;this.selectedSlide=e,this.slidesGallery.eq(e+1).add(this.slidesCaption.eq(e+1)).removeClass("selected").addClass("right"),this.slidesGallery.eq(e).add(this.slidesCaption.eq(e)).removeClass("left").addClass("selected"),Snap("#cd-morphing-path-"+(e+1)).animate({d:t.visibleSlidePath},a,mina.easeinout),Snap("#cd-morphing-path-"+(e+2)).animate({d:t.lateralSlidePath},a,mina.easeinout),e-1>=0&&this.slidesGallery.eq(e-1).add(this.slidesCaption.eq(e-1)).removeClass("left-hide").addClass("left"),e+2<this.slidesNumber&&this.slidesGallery.eq(e+2).add(this.slidesCaption.eq(e+2)).removeClass("right"),e<=0&&this.element.addClass("prev-hidden"),this.element.removeClass("next-hidden"),this.arrowPrev.addClass("active").on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){t.arrowPrev.removeClass("active")})},n.prototype.showNextSlide=function(e){var t=this;this.selectedSlide=e,this.slidesGallery.eq(e-1).add(this.slidesCaption.eq(e-1)).removeClass("selected").addClass("left"),this.slidesGallery.eq(e).add(this.slidesCaption.eq(e)).removeClass("right").addClass("selected"),Snap("#cd-morphing-path-"+(e+1)).animate({d:t.visibleSlidePath},a,mina.easeinout),Snap("#cd-morphing-path-"+e).animate({d:t.lateralSlidePath},a,mina.easeinout),e-2>=0&&this.slidesGallery.eq(e-2).add(this.slidesCaption.eq(e-2)).removeClass("left").addClass("left-hide"),e+1<this.slidesNumber&&this.slidesGallery.eq(e+1).add(this.slidesCaption.eq(e+1)).addClass("right"),e+1>=this.slidesNumber&&this.element.addClass("next-hidden"),this.element.removeClass("prev-hidden"),this.arrowNext.addClass("active").on("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){t.arrowNext.removeClass("active")})}})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginGalleryFancybox",function(){return{restrict:"E",controllerAs:"vm",controller:["$scope","$rootScope","$timeout","$ocLazyLoad",function(e,t,o,n){function i(){var e=[];a.gallery=a.gallery.sort(function(e,t){return e.sort-t.sort}),angular.forEach(a.gallery,function(t,o){e.push({src:t.path,opts:{}})}),$.fancybox.open(e,{loop:!0})}var a=this;a.pluginInterface=e.pluginVm,a.config=a.pluginInterface.config,a.gallery=[],a.ShowGallery=!1,angular.isUndefined(a.config.gallery)&&(a.config.gallery={}),a.config.type||(a.config.type="project"),a.config.gallery.project&&"project"==a.config.type&&(a.gallery=$.map(a.config.gallery.project,function(e,t){return[e]})),e.$on("evt.krpano.onxmlcomplete",function(){"scene"==a.config.type&&(a.config.gallery[e.scene._id]||(a.gallery=[]),a.gallery=$.map(a.config.gallery[e.scene._id],function(e,t){return[e]}))}),"yes"==a.config.show_on_start&&o(function(){i()});var r="evt.controlbar."+a.pluginInterface.plugin.slug+"gallery-";t.$on(r+"toggle",function(e,t){"click"==t&&i()})}]}})}(),function(){"use strict";function e(e,t){var o=this;o.config=e.config,o.config.theme_child_style=o.config.theme_child_style||"light"}e.$inject=["$scope","$rootScope"],angular.module("lapentor.marketplace.plugins").directive("pluginIntropopupBootstrapConfig",function(){return{templateUrl:Config.PLUGIN_PATH+"/intropopup/themes/bootstrap/bootstrap.config.html",restrict:"E",scope:{config:"="},controller:e,controllerAs:"vm"}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginIntropopupBootstrap",function(){return{restrict:"E",controllerAs:"vm",controller:["$scope","$rootScope","$sce","$timeout","$uibModal","$ocLazyLoad",function(e,t,o,n,i,a){function r(){i.open({animation:!0,templateUrl:Config.PLUGIN_PATH+"/intropopup/themes/bootstrap/bootstrap.html",controller:s,controllerAs:"vmM",resolve:{config:function(){return c.config}}})}function s(e,t,n){var i=this;i.config=n,i.config.theme_child_style=i.config.theme_child_style||"light";try{i.config.content=o.trustAsHtml(i.config.content)}catch(a){console.log("INFO:intropopup:content not exist")}i.dismiss=t.dismiss}s.$inject=["$scope","$uibModalInstance","config"];var c=this;c.pluginInterface=e.pluginVm,c.config=c.pluginInterface.config,c.config.start&&r();var l="evt.controlbar."+c.pluginInterface.plugin.slug+"intropopup-";t.$on(l+"toggle",function(e,t){"click"==t&&r()})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginIntropopupCircle",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/intropopup/themes/circle/circle.html",controllerAs:"vm",controller:["$scope","$rootScope","$sce",function(e,t,o){function n(){i.showModal=!0,i.config.content=o.trustAsHtml(i.config.content)}var i=this;i.showModal=!1,i.pluginInterface=e.pluginVm,i.config=i.pluginInterface.config,i.popupWidth=window.innerWidth>window.innerHeight?.9*window.innerHeight:.9*window.innerWidth,i.config.start&&n();var a="evt.controlbar."+i.pluginInterface.plugin.slug+"intropopup-";t.$on(a+"toggle",function(e,t){"click"==t&&n()})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginIntropopupFullscreenConfig",function(){return{templateUrl:Config.PLUGIN_PATH+"/intropopup/themes/fullscreen/fullscreen.config.html",restrict:"E",scope:{config:"="},controller:IntropopupFullscreenConfig,controllerAs:"vm"}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginIntropopupFullscreen",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/intropopup/themes/fullscreen/fullscreen.html",controllerAs:"vm",controller:["$scope","$rootScope","$sce",function(e,t,o){function n(){i.showModal=!0,i.config.content=o.trustAsHtml(i.config.content)}var i=this;i.showModal=!1,i.pluginInterface=e.pluginVm,i.config=i.pluginInterface.config,i.config.start&&n();var a="evt.controlbar."+i.pluginInterface.plugin.slug+"intropopup-";t.$on(a+"toggle",function(e,t){"click"==t&&n()})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneCircle",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/circle/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneDoubleflip",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/doubleflip/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneFillpath",function(){
return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/fillpath/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneOntheline",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/ontheline/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneRoundslide",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/roundslide/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneRoyal",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/royal/royal.html",controllerAs:"vm",controller:["$scope","$document","$rootScope","$timeout","$uibModal","$ocLazyLoad",function(e,t,o,n,i,a){function r(e){o.$emit("evt.livesphere.changescene",f.nextScene),isMobile.any&&(f.showNextPreview=!1)}function s(e){o.$emit("evt.livesphere.changescene",f.prevScene),isMobile.any,isMobile.any&&(f.showPrevPreview=!1)}function c(){f.showNextPreview=!1,f.showPrevPreview=!1,jQuery("#pluginNextscene .prev-scene, #pluginNextscene .next-scene").removeClass("show")}function l(){f.showNextPreview=!1,jQuery("#pluginNextscene .next-scene").removeClass("show")}function p(){f.showPrevPreview=!1,jQuery("#pluginNextscene .prev-scene").removeClass("show")}var f=this,u=[];f.pluginInterface=e.pluginVm,f.config=f.pluginInterface.config,f.goToNextScene=r,f.goToPrevScene=s,f.hideNextPreview=l,f.hidePrevPreview=p,f.nextScene={},f.prevScene={},f.showPrevPreview=!1,f.showNextPreview=!1,e.pluginVm.lptsphereinstance.on("onclick",c),t.on("click",c),e.project&&e.project.groups&&e.project.groups.length>0?(angular.forEach(e.project.groups,function(t,o){t.scenes.length>0&&angular.forEach(t.scenes,function(t,o){angular.forEach(e.project.scenes,function(e,o){t._id==e._id&&u.push(e)})})}),0==u.length&&(u=e.project.scenes)):u=e.project.scenes,e.$on("evt.krpano.onxmlcomplete",function(){f.nextScene=u[$.inArray(e.scene,u)+1],f.nextScene||(f.nextScene=u[0]),f.prevScene=u[$.inArray(e.scene,u)-1],f.prevScene||(f.prevScene=u[u.length-1])}),n(function(){isMobile.any||(jQuery("#pluginNextscene .prev-button").hover(function(){jQuery("#pluginNextscene .prev-scene").addClass("show"),f.showNextPreview=!1,l()}),jQuery("#pluginNextscene .prev-scene").hover(function(){jQuery("#pluginNextscene .prev-scene").addClass("show"),f.showNextPreview=!1,l()},function(){jQuery("#pluginNextscene .prev-scene").removeClass("show"),f.showPrevPreview=!1,p()}),jQuery("#pluginNextscene .next-button").hover(function(){jQuery("#pluginNextscene .next-scene").addClass("show"),f.showPrevPreview=!1,p()}),jQuery("#pluginNextscene .next-scene").hover(function(){jQuery("#pluginNextscene .next-scene").addClass("show"),p()},function(){jQuery("#pluginNextscene .next-scene").removeClass("show"),l()}))})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneSlide",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/slide/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginNextsceneSplit",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/nextscene/themes/split/tpl.html",controllerAs:"vm",controller:["$scope","$rootScope","$timeout",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.config=n.pluginInterface.config;var i=n.config.scenes;n.nextScene={},n.prevScene={},e.$on("evt.krpano.onxmlcomplete",function(){n.nextScene=i[$.inArray(e.scene,i)+1],n.nextScene||(n.nextScene=i[0]),n.prevScene=i[$.inArray(e.scene,i)-1],n.prevScene||(n.prevScene=i[i.length-1])}),n.goToNextScene=function(){t.$emit("evt.livesphere.changescene",n.nextScene)},n.goToPrevScene=function(){t.$emit("evt.livesphere.changescene",n.prevScene)}}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginSocialsharewidgetGooey",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/socialsharewidget/themes/gooey/sswgooey.html",controllerAs:"vm",controller:["$scope","$filter","$ocLazyLoad","LptHelper",function(e,t,o,n){var i=this;i.project=e.project,i.pluginInterface=e.pluginVm,i.config=i.pluginInterface.config,i.config.theme=i.config.theme?i.config.theme:{},i.shareUrl=n.inIframe?document.referrer:t("shareUrl")(i.project.slug),i.pluginInterface.initDefaultConfig(i.config,{position:"bottom-right"}),i.pluginInterface.initDefaultConfig(i.config.theme,{toggle_icon_color:"#464646",toggle_icon_bg_color:"#fff",open_on_start:0}),i.pluginInterface.initDefaultConfig(i.config.theme,{toggle_icon_color:"#464646",toggle_icon_bg_color:"#fff",position:"bottom-right",open_on_start:0}),o.load("modules/lapentor.marketplace/themes/controlbar/gooey/lib/TweenMax.min.js").then(function(){function e(e){l=!l,TweenMax.to(jQuery("#PluginSocialsharewidget .menu-toggle-icon"),.4,{rotation:l?45:0,ease:Quint.easeInOut,force3D:!0}),l?t():o()}function t(){jQuery("#PluginSocialsharewidget .menu-item").each(function(e){var t=.08*e,o=jQuery(this).children("#PluginSocialsharewidget .menu-item-bounce");TweenMax.fromTo(o,.2,{transformOrigin:"50% 50%"},{delay:t,scaleX:.8,scaleY:1.2,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,.15,{scaleY:.7,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,3,{scaleY:.8,force3D:!0,ease:Elastic.easeOut,easeParams:[1.1,.12]})}})}}),TweenMax.to(jQuery(this).children("#PluginSocialsharewidget .menu-item-button"),.5,{delay:t,y:r,force3D:!0,ease:Quint.easeInOut})})}function o(){1!=l&&jQuery("#PluginSocialsharewidget .menu-item").each(function(e){var t=.08*e,o=jQuery(this).children("#PluginSocialsharewidget .menu-item-bounce");TweenMax.fromTo(o,.2,{transformOrigin:"50% 50%"},{delay:t,scaleX:1,scaleY:.8,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,.15,{scaleY:1.2,force3D:!0,ease:Quad.easeInOut,onComplete:function(){TweenMax.to(o,3,{scaleY:1,force3D:!0,ease:Elastic.easeOut,easeParams:[1.1,.12]})}})}}),TweenMax.to(jQuery(this).children("#PluginSocialsharewidget .menu-item-button"),.3,{delay:t,y:0,force3D:!0,ease:Quint.easeIn})})}var n=jQuery("#PluginSocialsharewidget .menu-item").length,a=110,r=70,s=140+-a/2,c=a/(n-1);"bottom-left"==i.config.position&&(s+=85),"top-left"==i.config.position&&(s+=175),"top-right"==i.config.position&&(s-=95),TweenMax.globalTimeScale(.8),jQuery("#PluginSocialsharewidget .menu-item").each(function(e){var t=s+c*e;jQuery(this).css({transform:"rotate("+t+"deg)","-webkit-transform":"rotate("+t+"deg)"}),jQuery(this).find(".menu-item-icon").css({transform:"rotate("+-t+"deg)","-webkit-transform":"rotate("+-t+"deg)"})});var l=1==i.config.open_on_start;1==i.config.open_on_start&&t(),jQuery("#PluginSocialsharewidget .menu-toggle-button").mousedown(function(){TweenMax.to(jQuery("#PluginSocialsharewidget .menu-toggle-icon"),.1,{scale:.65})}),jQuery(document).mouseup(function(){TweenMax.to(jQuery("#PluginSocialsharewidget .menu-toggle-icon"),.1,{scale:1})}),jQuery(document).on("touchend",function(){jQuery(document).trigger("mouseup")}),jQuery("#PluginSocialsharewidget .menu-toggle-button").on("mousedown",e),jQuery("#PluginSocialsharewidget .menu-toggle-button").on("touchstart",function(e){jQuery(this).trigger("mousedown"),e.preventDefault(),e.stopPropagation()})})}]}})}(),function(){"use strict";angular.module("lapentor.marketplace.plugins").directive("pluginSocialsharewidgetSticky",function(){return{restrict:"E",templateUrl:Config.PLUGIN_PATH+"/socialsharewidget/themes/sticky/sswsticky.html",controllerAs:"vm",controller:["$scope","$filter","LptHelper",function(e,t,o){var n=this;n.pluginInterface=e.pluginVm,n.project=e.project,n.config=n.pluginInterface.config,n.shareUrl=o.inIframe?document.referrer:t("shareUrl")(n.project.slug),n.pluginInterface.initDefaultConfig(n.config,{position:"right"})}]}})}();